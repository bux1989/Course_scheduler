(()=>{var e={153:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var a=o(698),r=o.n(a),n=o(58),s=o.n(n)()(r());s.push([e.id,".grade-statistics[data-v-25da66c4]{padding:8px 16px;background:#f0f8ff;border-top:2px solid #007cba;border-radius:0 0 6px 6px;margin-top:8px}.compact-stats-container[data-v-25da66c4]{display:flex;flex-direction:column;gap:8px}.day-compact-stats[data-v-25da66c4]{display:flex;flex-direction:column}.day-title[data-v-25da66c4]{margin:0 0 4px 0;padding:4px 12px;background:#007cba;color:#fff;border-radius:3px;text-align:center;font-size:.85em;font-weight:500}.stats-row[data-v-25da66c4]{display:flex;flex-wrap:wrap;gap:8px;align-items:center}.grade-compact-stat[data-v-25da66c4]{display:flex;align-items:center;gap:4px;background:#fff;border:1px solid #e0e0e0;border-radius:4px;padding:4px 8px;font-size:.8em}.grade-number[data-v-25da66c4]{font-weight:600;color:#333;min-width:20px}.stats-icons[data-v-25da66c4]{display:flex;gap:6px}.stat-icon[data-v-25da66c4]{padding:2px 4px;background:#f8f9fa;border-radius:2px;font-size:.75em;color:#666;cursor:help;transition:background-color .2s ease}.stat-icon[data-v-25da66c4]:hover{background:#e9ecef;color:#333}@media(max-width: 768px){.grade-statistics[data-v-25da66c4]{padding:6px 12px}.stats-row[data-v-25da66c4]{flex-direction:column;align-items:stretch}.grade-compact-stat[data-v-25da66c4]{justify-content:space-between}}",""]);const l=s},680:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var a=o(698),r=o.n(a),n=o(58),s=o.n(n)()(r());s.push([e.id,".inline-editor[data-v-0d9016a8]{position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:2px solid #007cba;border-radius:6px;padding:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:100;display:flex;flex-direction:column;gap:4px;font-size:12px}.editor-field[data-v-0d9016a8]{display:flex;align-items:center;gap:4px}.editor-field label[data-v-0d9016a8]{font-weight:bold;min-width:50px;font-size:11px}.editor-select[data-v-0d9016a8]{flex:1;padding:2px 4px;border:1px solid #ddd;border-radius:3px;font-size:11px;background:#fff}.editor-actions[data-v-0d9016a8]{display:flex;gap:4px;margin-top:4px;justify-content:space-between}.save-btn[data-v-0d9016a8],.cancel-btn[data-v-0d9016a8],.delete-btn[data-v-0d9016a8]{padding:4px 8px;border:none;border-radius:3px;font-size:11px;cursor:pointer;font-weight:bold;transition:all .2s}.save-btn[data-v-0d9016a8]{background:#4caf50;color:#fff}.save-btn[data-v-0d9016a8]:hover{background:#45a049}.save-btn[data-v-0d9016a8]:disabled{background:#ccc;cursor:not-allowed}.cancel-btn[data-v-0d9016a8]{background:#f44336;color:#fff}.cancel-btn[data-v-0d9016a8]:hover{background:#da190b}.delete-btn[data-v-0d9016a8]{background:#ff9800;color:#fff}.delete-btn[data-v-0d9016a8]:hover{background:#f57c00}",""]);const l=s},944:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var a=o(698),r=o.n(a),n=o(58),s=o.n(n)()(r());s.push([e.id,'.scheduler-grid[data-v-f14582fc]{display:flex;flex-direction:column;width:100%;border:1px solid #ddd;border-radius:6px;overflow:hidden;background:#fff}.main-grid-container.emergency-mode[data-v-f14582fc]{border:3px solid #e74c3c;box-shadow:0 0 10px rgba(231,76,60,.3)}.main-grid-container.normal-mode[data-v-f14582fc]{border:2px solid #27ae60;box-shadow:0 0 5px rgba(39,174,96,.2)}.emergency-recovery-notice[data-v-f14582fc]{background:#ffe6e6;border:2px solid #e74c3c;padding:12px;margin:8px;border-radius:4px;text-align:center}.emergency-message[data-v-f14582fc]{color:#c0392b;font-weight:bold}.emergency-recover-btn[data-v-f14582fc]{background:#e74c3c;color:#fff;border:none;padding:6px 12px;border-radius:4px;margin-left:10px;cursor:pointer;font-size:.9em}.emergency-recover-btn[data-v-f14582fc]:hover{background:#c0392b}.scheduler-toolbar[data-v-f14582fc]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f8f9fa;border-bottom:1px solid #ddd;gap:16px;flex-wrap:wrap}.toolbar-section[data-v-f14582fc]{display:flex;align-items:center;gap:8px;position:relative}.search-input[data-v-f14582fc]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px;transition:border-color .2s ease}.search-input[data-v-f14582fc]:focus{outline:none;border-color:#007cba;box-shadow:0 0 0 2px rgba(0,123,186,.2)}.clear-search-btn[data-v-f14582fc]{background:#6c757d;color:#fff;border:none;border-radius:50%;width:20px;height:20px;font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:-30px;z-index:2}.clear-search-btn[data-v-f14582fc]:hover{background:#5a6268}.filter-status[data-v-f14582fc]{margin-left:8px;padding:4px 8px;background:rgba(0,123,186,.1);border:1px solid rgba(0,123,186,.3);border-radius:4px}.filter-tag[data-v-f14582fc]{display:inline-block;background:#007cba;color:#fff;padding:2px 6px;margin:0 2px;border-radius:3px;font-size:11px}.filter-label[data-v-f14582fc]{display:flex;align-items:center;gap:6px;font-size:.9em;cursor:pointer}.toolbar-actions[data-v-f14582fc]{display:flex;gap:8px}.undo-button[data-v-f14582fc],.save-button[data-v-f14582fc]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:.9em;transition:all .2s}.undo-button[data-v-f14582fc]:disabled{opacity:.5;cursor:not-allowed}.save-button[data-v-f14582fc]{background:#007cba;color:#fff;border-color:#007cba}.save-button.saving[data-v-f14582fc]{opacity:.7}.grid-header[data-v-f14582fc]{display:flex;background:#f5f5f5;border-bottom:1px solid #ddd;font-weight:600}.period-header-cell[data-v-f14582fc]{width:140px;padding:12px 8px;border-right:1px solid #ddd;display:flex;align-items:center;justify-content:center}.day-header-cell[data-v-f14582fc]{flex:1;padding:12px 8px;border-right:1px solid #ddd;text-align:center;display:flex;flex-direction:column;gap:2px}.day-name[data-v-f14582fc]{font-size:.95em}.day-date[data-v-f14582fc]{font-size:.8em;color:#666;font-weight:normal}.grid-body[data-v-f14582fc]{display:flex;flex-direction:column}.grid-row[data-v-f14582fc]{display:flex;border-bottom:1px solid #ddd;min-height:80px}.grid-row.non-instructional[data-v-f14582fc]{background:#f8f9fa}.period-label-cell[data-v-f14582fc]{width:140px;padding:8px;border-right:1px solid #ddd;background:#f9f9f9;display:flex;align-items:center}.period-info[data-v-f14582fc]{display:flex;flex-direction:column;gap:2px}.period-name[data-v-f14582fc]{font-weight:500;font-size:.9em}.period-time[data-v-f14582fc]{font-size:.8em;color:#666}.non-instructional-badge[data-v-f14582fc]{font-size:.75em;color:#888;background:#e9ecef;padding:2px 4px;border-radius:3px}.schedule-cell[data-v-f14582fc]{flex:1;border-right:1px solid #ddd;position:relative;cursor:pointer;transition:background-color .2s;min-height:80px}.schedule-cell[data-v-f14582fc]:hover{background:#f0f7ff}.schedule-cell.has-assignments[data-v-f14582fc]{background:#e6f7ff}.schedule-cell.multiple-assignments[data-v-f14582fc]{background:#d6f3ff}.schedule-cell.has-conflicts[data-v-f14582fc]{background:#fff2f0;border-left:3px solid #ff4d4f}.assignments-container[data-v-f14582fc]{padding:4px;height:100%;display:flex;flex-direction:column;gap:2px;position:relative}.assignment-item[data-v-f14582fc]{padding:4px 6px;border-radius:3px;border:1px solid #e0e0e0;position:relative;cursor:pointer;transition:all .2s}.assignment-item[data-v-f14582fc]:hover{transform:translateX(1px);box-shadow:0 1px 3px rgba(0,0,0,.1)}.assignment-item.has-conflict[data-v-f14582fc]{border-color:#ff4d4f;background:#fff2f0}.assignment-item.has-deleted-entities[data-v-f14582fc]{border-color:#faad14;background:#fff7e6}.assignment-item.lesson-schedule[data-v-f14582fc]{opacity:.6;border-style:dashed;background:#f5f5f5 !important;font-style:italic;font-size:.8em;transform:scale(0.95);margin:1px}.assignment-content[data-v-f14582fc]{display:flex;flex-direction:column;gap:1px}.course-name[data-v-f14582fc]{font-weight:500;font-size:.85em;line-height:1.2}.class-name[data-v-f14582fc],.teacher-names[data-v-f14582fc],.room-name[data-v-f14582fc]{font-size:.75em;color:#666;line-height:1.1}.conflict-indicator[data-v-f14582fc],.deleted-warning[data-v-f14582fc]{position:absolute;top:2px;right:2px;font-size:.7em}.add-more-button[data-v-f14582fc]{margin-top:2px;padding:2px 4px;background:#f0f0f0;border:1px dashed #ccc;border-radius:2px;cursor:pointer;font-size:.8em;align-self:stretch}.add-more-button[data-v-f14582fc]:hover{background:#e0e0e0}.empty-cell[data-v-f14582fc]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#ccc;font-size:.85em;gap:4px}.add-icon[data-v-f14582fc]{font-size:20px;opacity:.6}.add-text[data-v-f14582fc]{opacity:.8}.available-courses-panel[data-v-f14582fc]{padding:16px;background:#f0f8ff;border-top:1px solid #007cba;border-bottom:1px solid #ddd}.available-courses-panel h3[data-v-f14582fc]{margin:0 0 8px 0;color:#007cba;font-size:1.1em}.focused-period-info[data-v-f14582fc]{margin:0 0 16px 0;color:#666;font-size:.9em}.day-courses-grid[data-v-f14582fc]{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px}.day-courses-column h4[data-v-f14582fc]{margin:0 0 12px 0;padding:8px 12px;background:#007cba;color:#fff;border-radius:4px;text-align:center;font-size:.9em}.available-courses-list[data-v-f14582fc]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto}.course-card[data-v-f14582fc]{padding:10px;background:#fff;border:1px solid #ddd;border-radius:4px;cursor:pointer;transition:all .2s;font-size:.85em}.course-card[data-v-f14582fc]:hover{transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,124,186,.15);border-color:#007cba}.course-card .course-name[data-v-f14582fc]{font-weight:500;color:#333;margin-bottom:4px;display:block}.course-card .course-details[data-v-f14582fc]{display:flex;flex-direction:column;gap:2px}.course-card .course-details small[data-v-f14582fc]{color:#666;font-size:.8em}.no-courses[data-v-f14582fc]{padding:16px;text-align:center;color:#999;font-style:italic;background:#f9f9f9;border:1px dashed #ddd;border-radius:4px}.no-preferred-days-panel[data-v-f14582fc]{padding:16px;background:#f0f8e6;border:1px solid #52c41a;border-radius:4px;margin-top:16px}.no-preferred-days-panel h4[data-v-f14582fc]{margin:0 0 8px 0;color:#52c41a;font-size:1em;display:flex;align-items:center;gap:8px}.panel-description[data-v-f14582fc]{margin:0 0 12px 0;color:#666;font-size:.9em;font-style:italic}.no-preferred-courses-list[data-v-f14582fc]{display:grid;grid-template-columns:repeat(auto-fill, minmax(250px, 1fr));gap:12px}.flexible-tag[data-v-f14582fc]{color:#52c41a !important;font-weight:500}@media(max-width: 768px){.period-header-cell[data-v-f14582fc],.period-label-cell[data-v-f14582fc]{width:100px;font-size:.8em}.day-header-cell[data-v-f14582fc]{font-size:.8em}.scheduler-toolbar[data-v-f14582fc]{flex-direction:column;align-items:stretch;gap:8px}.stats-grid[data-v-f14582fc]{grid-template-columns:1fr}}.schedule-cell[data-v-f14582fc]:focus{outline:2px solid #007cba;outline-offset:-2px}.debug-message-panel[data-v-f14582fc]{padding:20px;background:#fff3cd;border:1px solid #ffeaa7;border-radius:4px;margin:16px}.debug-message-panel h3[data-v-f14582fc]{margin:0 0 12px 0;color:#856404}.debug-warning[data-v-f14582fc]{margin-bottom:16px;padding:12px;background:#fff;border-left:4px solid #ffc107;border-radius:4px}.debug-warning strong[data-v-f14582fc]{display:block;margin-bottom:8px;color:#856404}.debug-warning ul[data-v-f14582fc]{margin:8px 0 0 16px;color:#6c757d;font-family:monospace;font-size:.9em}.debug-warning li[data-v-f14582fc]{margin-bottom:4px;word-break:break-all}.debug-info[data-v-f14582fc]{font-size:.7em;color:#888;margin-top:2px;padding:2px;background:rgba(0,0,0,.05);border-radius:2px}.scheduler-grid[data-readonly=true] .schedule-cell[data-v-f14582fc]{cursor:default}.scheduler-grid[data-readonly=true] .schedule-cell[data-v-f14582fc]:hover{background:inherit}.filter-label[data-v-f14582fc]{display:flex;align-items:center;gap:6px;font-size:.9em;margin-right:16px}.mode-switcher[data-v-f14582fc]{display:flex;align-items:center;gap:8px;font-size:.9em}.mode-toggle[data-v-f14582fc]{width:40px;height:20px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#ccc;border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s}.mode-toggle[data-v-f14582fc]:checked{background:#007cba}.mode-toggle[data-v-f14582fc]::before{content:"";position:absolute;top:2px;left:2px;width:16px;height:16px;background:#fff;border-radius:50%;transition:left .3s}.mode-toggle[data-v-f14582fc]:checked::before{left:22px}.focus-button[data-v-f14582fc]{padding:6px 12px;border:1px solid #007cba;border-radius:4px;background:#fff;color:#007cba;cursor:pointer;font-size:.9em;transition:all .2s}.focus-button[data-v-f14582fc]:hover{background:#007cba;color:#fff}.focus-button.active[data-v-f14582fc]{background:#007cba;color:#fff}.focus-hint[data-v-f14582fc]{font-size:.85em;color:#666;font-style:italic}.period-label-cell.focused[data-v-f14582fc]{background:#e6f7ff !important;border-left:4px solid #007cba}.period-label-cell[data-v-f14582fc]{cursor:pointer;transition:background-color .2s}.period-label-cell[data-v-f14582fc]:hover{background:#f0f7ff !important}.debug-grid-info[data-v-f14582fc]{padding:8px 16px;background:#e8f5e8;border:1px solid #4caf50;border-radius:4px;margin-bottom:8px;font-family:monospace}.grid-hidden-debug[data-v-f14582fc]{padding:20px;background:#ffebee;border:2px solid #f44336;border-radius:8px;margin:16px;text-align:center}.grid-hidden-message[data-v-f14582fc]{color:#c62828;font-weight:bold;font-size:1.1em}.grid-hidden-message ul[data-v-f14582fc]{text-align:left;display:inline-block;margin:12px 0;color:#666;font-weight:normal;font-size:.9em;font-family:monospace}.grid-hidden-message li[data-v-f14582fc]{margin-bottom:6px}.emergency-show-btn[data-v-f14582fc]{padding:12px 24px;background:#f44336;color:#fff;border:none;border-radius:6px;font-size:1em;font-weight:bold;cursor:pointer;margin-top:16px;transition:all .2s}.emergency-show-btn[data-v-f14582fc]:hover{background:#d32f2f;transform:scale(1.05)}.main-grid-container[data-v-f14582fc]{border:2px solid #4caf50;border-radius:6px;padding:4px}.draggable-course[data-v-f14582fc]{cursor:grab;transition:all .2s ease;border:1px solid rgba(0,123,186,.3)}.draggable-course[data-v-f14582fc]:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.15);border-color:#007cba}.draggable-course[data-v-f14582fc]:active{cursor:grabbing}.draggable-assignment[data-v-f14582fc]{cursor:grab;transition:all .2s ease}.draggable-assignment[data-v-f14582fc]:hover{transform:scale(1.02);box-shadow:0 2px 6px rgba(0,0,0,.1)}.draggable-assignment[data-v-f14582fc]:active{cursor:grabbing}.drop-zone[data-v-f14582fc]{position:relative;transition:all .2s ease}.drop-zone.drag-over[data-v-f14582fc]{background:rgba(0,123,186,.1) !important;border:2px dashed #007cba !important;transform:scale(1.02)}.drop-zone.drag-over[data-v-f14582fc]::after{content:"ðŸ“‹ Drop here";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background:rgba(0,123,186,.9);color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold;pointer-events:none;z-index:10}.assignment-item.dragging[data-v-f14582fc]{opacity:.5;transform:rotate(5deg)}.course-card.dragging[data-v-f14582fc]{opacity:.5;transform:rotate(-3deg) scale(1.05)}.scheduler-grid:has(.dragging) .drop-zone[data-v-f14582fc]:not(.drag-over){background:rgba(255,255,255,.8);border:1px dashed #ddd}.scheduler-grid:has(.dragging) .assignment-item[data-v-f14582fc]:not(.dragging){opacity:.7}.assignment-content[data-v-f14582fc]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;gap:2px}.quick-edit-btn[data-v-f14582fc]{position:absolute;top:2px;right:2px;background:rgba(0,123,186,.8);color:#fff;border:none;border-radius:50%;width:16px;height:16px;font-size:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .2s ease;z-index:2}.assignment-item:hover .quick-edit-btn[data-v-f14582fc]{opacity:1}.quick-edit-btn[data-v-f14582fc]:hover{background:#007cba;transform:scale(1.1)}.assignment-item.editing[data-v-f14582fc]{z-index:100;position:relative}.assignment-item.editing .assignment-content[data-v-f14582fc]{display:none}',""]);const l=s},898:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var a=o(698),r=o.n(a),n=o(58),s=o.n(n)()(r());s.push([e.id,".modal-overlay[data-v-717d15e0]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[data-v-717d15e0]{background:#fff;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.3);width:90vw;max-width:600px;max-height:80vh;display:flex;flex-direction:column}.modal-header[data-v-717d15e0]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header h3[data-v-717d15e0]{margin:0;color:#333;font-size:18px}.close-btn[data-v-717d15e0]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[data-v-717d15e0]:hover{color:#333}.modal-body[data-v-717d15e0]{padding:20px;overflow-y:auto;flex:1}.selection-section[data-v-717d15e0]{margin-bottom:24px}.section-label[data-v-717d15e0]{display:block;font-weight:bold;margin-bottom:8px;color:#333}.search-box[data-v-717d15e0]{margin-bottom:12px}.search-input[data-v-717d15e0]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-input[data-v-717d15e0]:focus{outline:none;border-color:#007cba;box-shadow:0 0 0 2px rgba(0,124,186,.2)}.teacher-list[data-v-717d15e0],.room-list[data-v-717d15e0]{max-height:200px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px}.teacher-item[data-v-717d15e0],.room-item[data-v-717d15e0]{padding:12px;border-bottom:1px solid #f0f0f0;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color .2s}.teacher-item[data-v-717d15e0]:last-child,.room-item[data-v-717d15e0]:last-child{border-bottom:none}.teacher-item[data-v-717d15e0]:hover,.room-item[data-v-717d15e0]:hover{background-color:#f8f9fa}.teacher-item.selected[data-v-717d15e0],.room-item.selected[data-v-717d15e0]{background-color:#e3f2fd;border-left:3px solid #007cba}.teacher-item.primary[data-v-717d15e0]{background-color:#fff3e0;border-left:3px solid #ff9800}.teacher-info[data-v-717d15e0]{display:flex;flex-direction:column;flex:1}.teacher-name[data-v-717d15e0]{font-weight:500;color:#333}.teacher-email[data-v-717d15e0]{font-size:12px;color:#666;margin-top:2px}.teacher-controls[data-v-717d15e0]{display:flex;align-items:center}.primary-btn[data-v-717d15e0]{background:none;border:1px solid #ddd;border-radius:3px;padding:4px 8px;cursor:pointer;font-size:14px;color:#666;transition:all .2s}.primary-btn[data-v-717d15e0]:hover{background-color:#f0f0f0}.primary-btn.active[data-v-717d15e0]{background-color:#ff9800;border-color:#ff9800;color:#fff}.room-name[data-v-717d15e0]{font-weight:500;color:#333}.room-capacity[data-v-717d15e0]{font-size:12px;color:#666}.modal-footer[data-v-717d15e0]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #e0e0e0}.cancel-btn[data-v-717d15e0],.submit-btn[data-v-717d15e0]{padding:8px 16px;border-radius:4px;font-size:14px;cursor:pointer;border:1px solid;transition:all .2s}.cancel-btn[data-v-717d15e0]{background:#fff;border-color:#ddd;color:#666}.cancel-btn[data-v-717d15e0]:hover{background-color:#f8f9fa}.submit-btn[data-v-717d15e0]{background:#007cba;border-color:#007cba;color:#fff}.submit-btn[data-v-717d15e0]:hover:not(:disabled){background:#005a84;border-color:#005a84}.submit-btn[data-v-717d15e0]:disabled{background:#ccc;border-color:#ccc;cursor:not-allowed;opacity:.6}",""]);const l=s},797:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var a=o(698),r=o.n(a),n=o(58),s=o.n(n)()(r());s.push([e.id,'.course-scheduler-wrapper[data-v-f69e9c76]{width:100%;min-height:500px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;position:relative}.scheduler-header[data-v-f69e9c76]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;border-radius:6px 6px 0 0}.scheduler-header h2[data-v-f69e9c76]{margin:0;color:#333;font-size:1.3em}.scheduler-header .scheduler-controls[data-v-f69e9c76]{display:flex;align-items:center;gap:16px}.scheduler-header .mode-indicator[data-v-f69e9c76]{padding:6px 12px;border-radius:4px;font-size:.9em;font-weight:500;background:#e6f7ff;color:#1890ff}.scheduler-header .mode-indicator.read-only[data-v-f69e9c76]{background:#fff2f0;color:#ff4d4f}.scheduler-header .header-actions[data-v-f69e9c76]{display:flex;gap:8px;align-items:center}.scheduler-header .editing-controls[data-v-f69e9c76]{display:flex;gap:8px}.scheduler-header .undo-btn[data-v-f69e9c76],.scheduler-header .conflicts-btn[data-v-f69e9c76]{padding:6px 12px;border:1px solid #d9d9d9;border-radius:4px;background:#fff;cursor:pointer;font-size:.9em;transition:all .2s}.scheduler-header .undo-btn[data-v-f69e9c76]:disabled,.scheduler-header .conflicts-btn[data-v-f69e9c76]:disabled{opacity:.5;cursor:not-allowed}.scheduler-header .undo-btn[data-v-f69e9c76]:hover:not(:disabled),.scheduler-header .conflicts-btn[data-v-f69e9c76]:hover:not(:disabled){background:#f0f0f0;transform:translateY(-1px)}.scheduler-header .conflicts-btn.active[data-v-f69e9c76]{background:#ff4d4f;color:#fff;border-color:#ff4d4f}.scheduler-content[data-v-f69e9c76]{display:flex;gap:16px;position:relative}.conflicts-sidebar[data-v-f69e9c76]{width:400px;position:sticky;top:20px;height:fit-content}.test-data-section[data-v-f69e9c76]{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:#fff;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:2000;min-width:400px}.close-test[data-v-f69e9c76]{position:absolute;top:8px;right:12px;background:none;border:none;font-size:1.2em;cursor:pointer;color:#999}.test-info[data-v-f69e9c76]{margin-top:16px}.test-info>div[data-v-f69e9c76]{margin-bottom:8px;font-size:.9em}.test-button[data-v-f69e9c76]{margin-top:12px;padding:8px 16px;background:#007cba;color:#fff;border:none;border-radius:4px;cursor:pointer}.test-toggle[data-v-f69e9c76]{position:fixed;bottom:20px;right:20px;width:40px;height:40px;border:none;border-radius:50%;background:#007cba;color:#fff;font-size:1.2em;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:1000;transition:all .2s}.test-toggle[data-v-f69e9c76]:hover{transform:scale(1.1)}.debug-toggle[data-v-f69e9c76]{position:fixed;bottom:70px;right:20px;width:40px;height:40px;border:none;border-radius:50%;background:#ff6b6b;color:#fff;font-size:1.2em;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:1000;transition:all .2s}.debug-toggle[data-v-f69e9c76]:hover{transform:scale(1.1)}@media(max-width: 1200px){.conflicts-sidebar[data-v-f69e9c76]{width:350px}}@media(max-width: 900px){.scheduler-content[data-v-f69e9c76]{flex-direction:column}.conflicts-sidebar[data-v-f69e9c76]{width:100%;position:relative;top:auto}.scheduler-header[data-v-f69e9c76]{flex-direction:column;gap:12px;align-items:stretch}.scheduler-header .scheduler-controls[data-v-f69e9c76]{justify-content:space-between}.scheduler-header .header-actions[data-v-f69e9c76]{justify-content:center}}@media(max-width: 600px){.course-scheduler-wrapper[data-v-f69e9c76]{font-size:.9em}.test-data-section[data-v-f69e9c76]{width:90vw;min-width:unset}.test-toggle[data-v-f69e9c76]{bottom:10px;right:10px;width:35px;height:35px;font-size:1em}}@media(prefers-reduced-motion: reduce){[data-v-f69e9c76]{transition-duration:.01ms !important;animation-duration:.01ms !important}}@media(prefers-contrast: high){.scheduler-header[data-v-f69e9c76],.mode-indicator[data-v-f69e9c76],.undo-btn[data-v-f69e9c76],.conflicts-btn[data-v-f69e9c76]{border-width:2px}}@media print{.test-toggle[data-v-f69e9c76],.header-actions[data-v-f69e9c76],.conflicts-sidebar[data-v-f69e9c76]{display:none !important}.scheduler-header .mode-indicator.read-only[data-v-f69e9c76]::after{content:" (Read-Only)"}}',""]);const l=s},735:(e,t,o)=>{"use strict";function a(e,t){for(var o=[],a={},r=0;r<t.length;r++){var n=t[r],s=n[0],l={id:e+":"+r,css:n[1],media:n[2],sourceMap:n[3]};a[s]?a[s].parts.push(l):o.push(a[s]={id:s,parts:[l]})}return o}o.d(t,{Z:()=>p});var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n={},s=r&&(document.head||document.getElementsByTagName("head")[0]),l=null,d=0,i=!1,c=function(){},u=null,f="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,o,r){i=o,u=r||{};var s=a(e,t);return g(s),function(t){for(var o=[],r=0;r<s.length;r++){var l=s[r];(d=n[l.id]).refs--,o.push(d)}for(t?g(s=a(e,t)):s=[],r=0;r<o.length;r++){var d;if(0===(d=o[r]).refs){for(var i=0;i<d.parts.length;i++)d.parts[i]();delete n[d.id]}}}}function g(e){for(var t=0;t<e.length;t++){var o=e[t],a=n[o.id];if(a){a.refs++;for(var r=0;r<a.parts.length;r++)a.parts[r](o.parts[r]);for(;r<o.parts.length;r++)a.parts.push(v(o.parts[r]));a.parts.length>o.parts.length&&(a.parts.length=o.parts.length)}else{var s=[];for(r=0;r<o.parts.length;r++)s.push(v(o.parts[r]));n[o.id]={id:o.id,refs:1,parts:s}}}}function h(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function v(e){var t,o,a=document.querySelector("style["+f+'~="'+e.id+'"]');if(a){if(i)return c;a.parentNode.removeChild(a)}if(m){var r=d++;a=l||(l=h()),t=x.bind(null,a,r,!1),o=x.bind(null,a,r,!0)}else a=h(),t=k.bind(null,a),o=function(){a.parentNode.removeChild(a)};return t(e),function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap)return;t(e=a)}else o()}}var b,y=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function x(e,t,o,a){var r=o?"":a.css;if(e.styleSheet)e.styleSheet.cssText=y(t,r);else{var n=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(n,s[t]):e.appendChild(n)}}function k(e,t){var o=t.css,a=t.media,r=t.sourceMap;if(a&&e.setAttribute("media",a),u.ssrId&&e.setAttribute(f,t.id),r&&(o+="\n/*# sourceURL="+r.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}},58:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o="",a=void 0!==t[5];return t[4]&&(o+="@supports (".concat(t[4],") {")),t[2]&&(o+="@media ".concat(t[2]," {")),a&&(o+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),o+=e(t),a&&(o+="}"),t[2]&&(o+="}"),t[4]&&(o+="}"),o}).join("")},t.i=function(e,o,a,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(a)for(var l=0;l<this.length;l++){var d=this[l][0];null!=d&&(s[d]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);a&&s[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),o&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=o):c[2]=o),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},698:e=>{"use strict";e.exports=function(e){return e[1]}},20:(e,t)=>{"use strict";t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[e,a]of t)o[e]=a;return o}},194:(e,t,o)=>{var a=o(153);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,o(735).Z)("7690351c",a,!1,{})},997:(e,t,o)=>{var a=o(680);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,o(735).Z)("4b03a100",a,!1,{})},184:(e,t,o)=>{var a=o(944);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,o(735).Z)("06619358",a,!1,{})},116:(e,t,o)=>{var a=o(898);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,o(735).Z)("651942ff",a,!1,{})},336:(e,t,o)=>{var a=o(797);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,o(735).Z)("48b673d4",a,!1,{})}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={id:a,exports:{}};return e[a](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=Vue,t=t=>((0,e.pushScopeId)("data-v-f69e9c76"),t=t(),(0,e.popScopeId)(),t),a={class:"course-scheduler-wrapper"},r={class:"scheduler-header"},n=t(()=>(0,e.createElementVNode)("h2",null,"Course Scheduler",-1)),s={class:"scheduler-controls"},l={class:"header-actions"},d={key:0,class:"editing-controls"},i=["disabled"],c={class:"scheduler-content"},u={key:0,class:"conflicts-sidebar"},f={key:1,class:"test-data-section"},m=t(()=>(0,e.createElementVNode)("h3",null,"Component Test Data",-1)),p={class:"test-info"},g=t(()=>(0,e.createElementVNode)("strong",null,"School ID:",-1)),h=t(()=>(0,e.createElementVNode)("strong",null,"Draft ID:",-1)),v=t(()=>(0,e.createElementVNode)("strong",null,"Published By:",-1)),b=t(()=>(0,e.createElementVNode)("strong",null,"Data Counts:",-1)),y=t=>((0,e.pushScopeId)("data-v-f14582fc"),t=t(),(0,e.popScopeId)(),t),x={class:"scheduler-grid",role:"grid","aria-label":"School schedule grid"},k={class:"scheduler-toolbar"},C={class:"toolbar-section"},S={class:"filter-label"},E={class:"filter-label"},_={class:"toolbar-section"},N={class:"mode-switcher"},I=y(()=>(0,e.createElementVNode)("span",null,"Planning Mode",-1)),D=y(()=>(0,e.createElementVNode)("span",null,"Live Mode",-1)),w={class:"toolbar-section"},V=y(()=>(0,e.createElementVNode)("option",{value:""},"All Years",-1)),A=["value"],B={class:"toolbar-section"},T=y(()=>(0,e.createElementVNode)("option",{value:""},"All Classes",-1)),L=["value"],P={class:"toolbar-section"},j={key:1,class:"filter-status"},M={key:0,class:"filter-tag"},z={key:1,class:"filter-tag"},O={key:2,class:"filter-tag"},F={key:3,class:"filter-tag"},$={class:"toolbar-section"},W={key:1,class:"focus-hint"},R={class:"toolbar-actions"},U=["disabled"],q={key:0,class:"main-grid-container"},G={class:"debug-grid-info"},Y={class:"grid-header",role:"row"},Z={class:"period-header-cell",role:"columnheader"},H=y(()=>(0,e.createElementVNode)("span",{class:"period-label"},"Period",-1)),J={class:"debug-info"},K=["aria-colindex"],Q={class:"day-name"},X={key:0,class:"day-date"},ee={class:"debug-info"},te={class:"grid-body"},oe=["aria-rowindex"],ae=["onClick"],re={class:"period-info"},ne={class:"period-name"},se={class:"period-time"},le={key:0,class:"non-instructional-badge"},de={class:"debug-info"},ie=["onClick","onKeydown","aria-label","onDragover","onDragenter","onDragleave","onDrop","data-day-id","data-period-id"],ce={key:0,class:"assignments-container"},ue=["onClick","draggable","onDragstart","data-assignment-id","data-day-id","data-period-id"],fe={key:0,class:"assignment-content"},me={class:"course-name"},pe={key:0,class:"class-name"},ge={key:1,class:"teacher-names"},he={key:2,class:"room-name"},ve=["onClick"],be={key:2,class:"conflict-indicator",title:"Has conflicts"},ye={key:3,class:"deleted-warning",title:"Missing data"},xe=["onClick"],ke=["onClick"],Ce=[y(()=>(0,e.createElementVNode)("span",{class:"add-icon"},"+",-1)),y(()=>(0,e.createElementVNode)("span",{class:"add-text"},"Add Course",-1))],Se={class:"grid-hidden-debug"},Ee={class:"grid-hidden-message"},_e={key:2,class:"available-courses-panel"},Ne=y(()=>(0,e.createElementVNode)("div",{class:"focused-period-info"},[(0,e.createElementVNode)("em",null,"Courses that can be scheduled during this period on each day")],-1)),Ie={class:"day-courses-grid"},De={class:"available-courses-list"},we=["onClick","title","data-course-id","data-day-id","data-period-id","onDragstart"],Ve={class:"course-name"},Ae={class:"course-details"},Be={key:0},Te={key:1},Le={key:2},Pe={key:0,class:"no-courses"},je={key:0,class:"no-preferred-days-panel"},Me=y(()=>(0,e.createElementVNode)("h4",null,"ðŸ“… Courses with No Preferred Days",-1)),ze=y(()=>(0,e.createElementVNode)("p",{class:"panel-description"}," These courses have no time slot restrictions and can be scheduled on any day: ",-1)),Oe={class:"no-preferred-courses-list"},Fe=["onClick","title"],$e={class:"course-name"},We={class:"course-details"},Re={key:0},Ue={key:1},qe={key:2},Ge=y(()=>(0,e.createElementVNode)("small",{class:"flexible-tag"},"ðŸ“… Flexible scheduling",-1)),Ye=t=>((0,e.pushScopeId)("data-v-0d9016a8"),t=t(),(0,e.popScopeId)(),t),Ze={class:"editor-field"},He=Ye(()=>(0,e.createElementVNode)("label",null,"Course:",-1)),Je=Ye(()=>(0,e.createElementVNode)("option",{value:""},"Select Course",-1)),Ke=["value"],Qe={class:"editor-field"},Xe=Ye(()=>(0,e.createElementVNode)("label",null,"Teacher:",-1)),et=Ye(()=>(0,e.createElementVNode)("option",{value:""},"Select Teacher",-1)),tt=["value"],ot={class:"editor-field"},at=Ye(()=>(0,e.createElementVNode)("label",null,"Room:",-1)),rt=Ye(()=>(0,e.createElementVNode)("option",{value:""},"Select Room",-1)),nt=["value"],st={class:"editor-field"},lt=Ye(()=>(0,e.createElementVNode)("label",null,"Class:",-1)),dt=Ye(()=>(0,e.createElementVNode)("option",{value:""},"Select Class",-1)),it=["value"],ct={class:"editor-actions"},ut=["disabled"],ft={name:"InlineAssignmentEditor",props:{assignment:{type:Object,required:!0},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]}},emits:["save","cancel","delete"],setup(t,{emit:o}){const a=(0,e.ref)({...t.assignment}),r=(0,e.ref)(t.assignment.teacher_ids&&t.assignment.teacher_ids.length>0?t.assignment.teacher_ids[0]:"");(0,e.watch)(r,e=>{a.value.teacher_ids=e?[e]:[]});const n=(0,e.computed)(()=>t.courses.filter(e=>!0)),s=(0,e.computed)(()=>a.value.course_id||a.value.subject_id);return{editableAssignment:a,selectedTeacherId:r,availableCourses:n,isValid:s,saveChanges:function(){s.value&&(r.value&&!a.value.teacher_ids.includes(r.value)&&(a.value.teacher_ids=[r.value]),o("save",a.value))},cancelEdit:function(){o("cancel")},deleteAssignment:function(){confirm("Are you sure you want to delete this assignment?")&&o("delete",t.assignment)}}}};o(997);var mt=o(20);const pt=(0,mt.Z)(ft,[["render",function(t,o,a,r,n,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"inline-editor",onClick:o[7]||(o[7]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createCommentVNode)(" Course Selection "),(0,e.createElementVNode)("div",Ze,[He,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":o[0]||(o[0]=e=>r.editableAssignment.course_id=e),class:"editor-select"},[Je,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.availableCourses,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||t.course_name||t.title),9,Ke))),128))],512),[[e.vModelSelect,r.editableAssignment.course_id]])]),(0,e.createCommentVNode)(" Teacher Selection "),(0,e.createElementVNode)("div",Qe,[Xe,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>r.selectedTeacherId=e),class:"editor-select"},[et,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(a.teachers,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||`${t.first_name} ${t.last_name}`),9,tt))),128))],512),[[e.vModelSelect,r.selectedTeacherId]])]),(0,e.createCommentVNode)(" Room Selection "),(0,e.createElementVNode)("div",ot,[at,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>r.editableAssignment.room_id=e),class:"editor-select"},[rt,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(a.rooms,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||t.room_name),9,nt))),128))],512),[[e.vModelSelect,r.editableAssignment.room_id]])]),(0,e.createCommentVNode)(" Class Selection "),(0,e.createElementVNode)("div",st,[lt,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":o[3]||(o[3]=e=>r.editableAssignment.class_id=e),class:"editor-select"},[dt,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(a.classes,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||t.class_name),9,it))),128))],512),[[e.vModelSelect,r.editableAssignment.class_id]])]),(0,e.createCommentVNode)(" Action Buttons "),(0,e.createElementVNode)("div",ct,[(0,e.createElementVNode)("button",{onClick:o[4]||(o[4]=(...e)=>r.saveChanges&&r.saveChanges(...e)),class:"save-btn",disabled:!r.isValid},"âœ… Save",8,ut),(0,e.createElementVNode)("button",{onClick:o[5]||(o[5]=(...e)=>r.cancelEdit&&r.cancelEdit(...e)),class:"cancel-btn"},"âŒ Cancel"),(0,e.createElementVNode)("button",{onClick:o[6]||(o[6]=(...e)=>r.deleteAssignment&&r.deleteAssignment(...e)),class:"delete-btn",title:"Delete assignment"},"ðŸ—‘ï¸ Delete")])])}],["__scopeId","data-v-0d9016a8"]]),gt=t=>((0,e.pushScopeId)("data-v-717d15e0"),t=t(),(0,e.popScopeId)(),t),ht={class:"modal-header"},vt={class:"modal-body"},bt={class:"selection-section"},yt=gt(()=>(0,e.createElementVNode)("label",{class:"section-label"},"Teachers:",-1)),xt={class:"search-box"},kt={class:"teacher-list"},Ct=["onClick"],St={class:"teacher-info"},Et={class:"teacher-name"},_t={key:0,class:"teacher-email"},Nt={class:"teacher-controls"},It=["onClick"],Dt={class:"selection-section"},wt=gt(()=>(0,e.createElementVNode)("label",{class:"section-label"},"Room:",-1)),Vt={class:"search-box"},At={class:"room-list"},Bt=["onClick"],Tt={class:"room-name"},Lt={key:0,class:"room-capacity"},Pt={class:"modal-footer"},jt=["disabled"],Mt={name:"TeacherRoomSelectionModal",props:{courseId:{type:String,required:!0},courseName:{type:String,required:!0},dayId:{type:[String,Number],required:!0},periodId:{type:String,required:!0},draftId:{type:String,default:null},schoolId:{type:String,default:null},teachers:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]}},emits:["submit","cancel"],setup(t,{emit:o}){const a=(0,e.ref)(""),r=(0,e.ref)(""),n=(0,e.ref)([]),s=(0,e.ref)(null),l=(0,e.ref)(null),d=(0,e.computed)(()=>{if(!a.value)return t.teachers;const e=a.value.toLowerCase();return t.teachers.filter(t=>{const o=t.name||`${t.first_name} ${t.last_name}`,a=t.email||"";return o.toLowerCase().includes(e)||a.toLowerCase().includes(e)})}),i=(0,e.computed)(()=>{if(!r.value)return t.rooms;const e=r.value.toLowerCase();return t.rooms.filter(t=>(t.name||t.room_name||"").toLowerCase().includes(e))}),c=(0,e.computed)(()=>n.value.length>0);return(0,e.watch)(n,e=>{s.value&&!e.includes(s.value)&&(s.value=null),1===e.length&&(s.value=e[0])}),{teacherSearchTerm:a,roomSearchTerm:r,selectedTeachers:n,primaryTeacherId:s,selectedRoomId:l,filteredTeachers:d,filteredRooms:i,isValid:c,toggleTeacher:function(e){const t=n.value.indexOf(e);t>-1?n.value.splice(t,1):n.value.push(e)},setPrimaryTeacher:function(e){n.value.includes(e)&&(s.value=e)},selectRoom:function(e){l.value=l.value===e?null:e},submitAssignment:function(){if(!c.value)return;const e={courseId:t.courseId,courseName:t.courseName,teacherIds:n.value,primaryTeacherId:s.value,roomId:l.value,periodId:t.periodId,draftId:t.draftId,dayId:t.dayId,schoolId:t.schoolId,source:"modal-assignment",timestamp:(new Date).toISOString()};o("submit",e)},cancelSelection:function(){o("cancel")}}}};o(116);const zt=(0,mt.Z)(Mt,[["render",function(t,o,a,r,n,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"modal-overlay",onClick:o[6]||(o[6]=(...e)=>r.cancelSelection&&r.cancelSelection(...e))},[(0,e.createElementVNode)("div",{class:"modal-content",onClick:o[5]||(o[5]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createElementVNode)("div",ht,[(0,e.createElementVNode)("h3",null,"Assign "+(0,e.toDisplayString)(a.courseName)+" to Schedule",1),(0,e.createElementVNode)("button",{onClick:o[0]||(o[0]=(...e)=>r.cancelSelection&&r.cancelSelection(...e)),class:"close-btn"},"Ã—")]),(0,e.createElementVNode)("div",vt,[(0,e.createCommentVNode)(" Teacher Selection "),(0,e.createElementVNode)("div",bt,[yt,(0,e.createElementVNode)("div",xt,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>r.teacherSearchTerm=e),type:"text",placeholder:"Search teachers...",class:"search-input"},null,512),[[e.vModelText,r.teacherSearchTerm]])]),(0,e.createElementVNode)("div",kt,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.filteredTeachers,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:(0,e.normalizeClass)(["teacher-item",{selected:r.selectedTeachers.includes(t.id),primary:r.primaryTeacherId===t.id}]),onClick:e=>r.toggleTeacher(t.id)},[(0,e.createElementVNode)("div",St,[(0,e.createElementVNode)("span",Et,(0,e.toDisplayString)(t.name||`${t.first_name} ${t.last_name}`),1),t.email?((0,e.openBlock)(),(0,e.createElementBlock)("span",_t,(0,e.toDisplayString)(t.email),1)):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createElementVNode)("div",Nt,[r.selectedTeachers.includes(t.id)?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:(0,e.withModifiers)(e=>r.setPrimaryTeacher(t.id),["stop"]),class:(0,e.normalizeClass)(["primary-btn",{active:r.primaryTeacherId===t.id}]),title:"Set as primary teacher"},(0,e.toDisplayString)(r.primaryTeacherId===t.id?"â˜…":"â˜†"),11,It)):(0,e.createCommentVNode)("v-if",!0)])],10,Ct))),128))])]),(0,e.createCommentVNode)(" Room Selection "),(0,e.createElementVNode)("div",Dt,[wt,(0,e.createElementVNode)("div",Vt,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>r.roomSearchTerm=e),type:"text",placeholder:"Search rooms...",class:"search-input"},null,512),[[e.vModelText,r.roomSearchTerm]])]),(0,e.createElementVNode)("div",At,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.filteredRooms,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:(0,e.normalizeClass)(["room-item",{selected:r.selectedRoomId===t.id}]),onClick:e=>r.selectRoom(t.id)},[(0,e.createElementVNode)("span",Tt,(0,e.toDisplayString)(t.name||t.room_name),1),t.capacity?((0,e.openBlock)(),(0,e.createElementBlock)("span",Lt,"Capacity: "+(0,e.toDisplayString)(t.capacity),1)):(0,e.createCommentVNode)("v-if",!0)],10,Bt))),128))])])]),(0,e.createElementVNode)("div",Pt,[(0,e.createElementVNode)("button",{onClick:o[3]||(o[3]=(...e)=>r.cancelSelection&&r.cancelSelection(...e)),class:"cancel-btn"},"Cancel"),(0,e.createElementVNode)("button",{onClick:o[4]||(o[4]=(...e)=>r.submitAssignment&&r.submitAssignment(...e)),class:"submit-btn",disabled:!r.isValid},"Assign Course",8,jt)])])])}],["__scopeId","data-v-717d15e0"]]),Ot={key:0,class:"grade-statistics"},Ft={class:"compact-stats-container"},$t={class:"day-title"},Wt={class:"stats-row"},Rt={class:"grade-number"},Ut={class:"stats-icons"},qt=["title"],Gt=["title"],Yt=["title"];function Zt(e){if(!e)return[];if(Array.isArray(e))return e;if(void 0!==e?.value)return Array.isArray(e.value)?e.value:Zt(e.value);if("object"==typeof e){const t=Object.keys(e),o=t.filter(e=>/^\d+$/.test(e));if(o.length>0)return o.sort((e,t)=>Number(e)-Number(t)).map(t=>e[t]).filter(e=>null!=e);if("function"==typeof e.values)try{return Array.from(e.values())}catch(e){}const a=["data","items","list","array","results","collection"];for(const t of a)if(e[t]&&Array.isArray(e[t]))return e[t];const r=Object.values(e).filter(e=>null!=e);if(r.length>0&&t.length>2){const e=r[0];if("object"==typeof e&&null!==e&&r.every(e=>"object"==typeof e&&null!==e&&Object.keys(e).length>0))return r}}return[]}function Ht(e){return Array.isArray(e)?e.length:0}function Jt(e){return Ht(e)>0}function Kt(e){return Ht(e)||(e&&"object"==typeof e&&"number"==typeof e.length?e.length:0)}function Qt(e){const t=Zt(e);return Jt(t)?t:Array.isArray(e)?e:Array.isArray(e?.value)?e.value:e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.forEach?Array.from(e):[]}function Xt(e,t){return{id:e.id??e.course_id??e.uuid??`course-fallback-${t}`,name:e.name??e.title??e.course_name??"",code:e.code??e.short_code??e.course_code??"",capacity:e.capacity??e.max??e.max_students??null,subject:e.subject??e.subject_name??"",yearGroups:Zt(e.year_groups??e.yearGroups??e.is_for_year_groups??[]),possibleSlots:(o=e.possible_time_slots??e.possibleSlots??[],Zt(o).map(e=>{if("string"==typeof e&&e.includes("|")){const[t,o]=e.split("|");return{dayId:Number(t),periodId:String(o)}}return"object"==typeof e&&null!==e?{dayId:Number(e.day_id??e.dayId),periodId:String(e.period_id??e.periodId)}:{dayId:-1,periodId:""}}).filter(e=>e.dayId>0&&e.periodId)),possible_time_slots:e.possible_time_slots,...e};var o}const eo={name:"GradeStatistics",props:{courses:{type:Array,default:()=>[]},draftSchedules:{type:Array,default:()=>[]},visibleDays:{type:Array,default:()=>[]},periods:{type:Array,default:()=>[]},focusedPeriodId:{type:String,default:null},showStatistics:{type:Boolean,default:!0},getAvailableCoursesForSlot:{type:Function,required:!0},getFocusedPeriodName:{type:Function,required:!0}},setup(t){function o(e){const t=[];if(e.is_for_year_g&&"object"==typeof e.is_for_year_g)for(const[o,a]of Object.entries(e.is_for_year_g))a&&a>0&&t.push(Number(a));else e.is_for_year_groups&&Array.isArray(e.is_for_year_groups)?t.push(...e.is_for_year_groups.map(e=>Number(e)).filter(e=>e>0)):e.year_groups&&Array.isArray(e.year_groups)&&t.push(...e.year_groups.map(e=>Number(e)).filter(e=>e>0));return[...new Set(t)].sort((e,t)=>e-t)}const a=(0,e.computed)(()=>{const e=new Set;return Qt(t.courses).forEach(t=>{o(t).forEach(t=>e.add(t))}),Array.from(e).sort((e,t)=>e-t)});return{allGrades:a,getDailyGradeStats:function(e){if(!t.focusedPeriodId)return[];const r=function(e,o){const a=[];return Qt(t.draftSchedules).filter(t=>t.day_id===e&&t.period_id===o).forEach(e=>{const o=(r=e.course_id,Qt(t.courses).find(e=>e.id===r));var r;if(o){const t=o.max_students||o.capacity||0,r=void 0!==e.free_spaces?e.free_spaces:t;a.push({...o,scheduledEntry:e,freeSpots:r,totalSpots:t})}}),a}(e,t.focusedPeriodId),n=[];return a.value.forEach(e=>{let t=0,a=0,s=0;r.forEach(r=>{const n=o(r);if(n.includes(e)){a++;const e=r.freeSpots||0;if(1===n.length)t+=e,s+=e;else{const o=e/n.length;t+=e,s+=o}}}),(a>0||t>0)&&n.push({grade:e,totalSpots:t,averageSpots:s,coursesCount:a})}),n},safeLength:Kt}}};o(194);const to={name:"SchedulerGrid",components:{InlineAssignmentEditor:pt,TeacherRoomSelectionModal:zt,GradeStatistics:(0,mt.Z)(eo,[["render",function(t,o,a,r,n,s){return a.showStatistics&&a.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ot,[(0,e.createCommentVNode)(" Compact Statistics Display "),(0,e.createElementVNode)("div",Ft,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(a.visibleDays,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:"day-compact-stats"},[(0,e.createElementVNode)("h4",$t,(0,e.toDisplayString)(t.name),1),(0,e.createElementVNode)("div",Wt,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.getDailyGradeStats(t.id),o=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`${t.id}-${o.grade}`,class:"grade-compact-stat"},[(0,e.createElementVNode)("div",Rt,(0,e.toDisplayString)(o.grade)+":",1),(0,e.createElementVNode)("div",Ut,[(0,e.createElementVNode)("span",{class:"stat-icon",title:`ðŸ“Š Total free spots: ${o.totalSpots}`},(0,e.toDisplayString)(o.totalSpots),9,qt),(0,e.createElementVNode)("span",{class:"stat-icon",title:`âš–ï¸ Average spots available: ${o.averageSpots.toFixed(1)}`},(0,e.toDisplayString)(o.averageSpots.toFixed(1)),9,Gt),(0,e.createElementVNode)("span",{class:"stat-icon",title:`ðŸ“š Amount of courses: ${o.coursesCount}`},(0,e.toDisplayString)(o.coursesCount),9,Yt)])]))),128))])]))),128))])])):(0,e.createCommentVNode)("v-if",!0)}],["__scopeId","data-v-25da66c4"]])},props:{periods:{type:Array,default:()=>[]},schoolDays:{type:Array,default:()=>[]},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},draftSchedules:{type:Array,default:()=>[]},liveSchedules:{type:Array,default:()=>[]},isReadOnly:{type:Boolean,default:!1},showStatistics:{type:Boolean,default:!0},maxDays:{type:Number,default:6},schoolId:{type:String,default:null},draftId:{type:String,default:null},conflicts:{type:Array,default:()=>[]},canUndo:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1}},emits:["cell-click","assignment-details","toggle-non-instructional","toggle-lesson-schedules","filter-year","undo-last","save-draft","update-assignments","mode-changed","period-focus-changed"],setup(t,{emit:o}){const a=(0,e.ref)(!0),r=(0,e.ref)(!0),n=(0,e.ref)(!1),s=(0,e.ref)(""),l=(0,e.ref)(""),d=(0,e.ref)(null),i=(0,e.ref)(null),c=(0,e.ref)(null),u=(0,e.ref)(!1),f=(0,e.ref)(null);(0,e.watch)(d,(e,t)=>{e!==t&&console.log("ðŸ” [SchedulerGrid] focusedPeriodId changed:",{from:t,to:e})});const m=(0,e.computed)(()=>{const e=function(e,t="unknown"){const o=Zt(e);if(!Jt(o)){const t=function(e){if(!e)return[];const t=Zt(e);if(Jt(t))return t;if(e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.forEach)return Array.from(e);if(e&&"object"==typeof e){const t=["data","items","list","array","results"];for(const o of t)if(Array.isArray(e[o]))return e[o];for(const t in e)if(Array.isArray(e[t]))return e[t]}return[]}(e);if(Jt(t))return t}if(!Jt(o)&&e){const o=e&&"object"==typeof e?Object.keys(e):null,a=o?o.filter(e=>/^\d+$/.test(e)):[];console.warn(`[${t}] Could not extract array from:`,{type:typeof e,isArray:Array.isArray(e),hasLength:e?.length,hasForEach:"function"==typeof e?.forEach,hasValue:!!e?.value,keys:o,numericKeys:a,isNumericKeyObject:a.length>0,sampleData:e&&"object"==typeof e&&a.length>0?e[a[0]]:e})}return Jt(o)?o:[]}(t.schoolDays,"schoolDays");if(0===Kt(e))return[];const o=t.maxDays||7;return e.slice(0,o)}),p=(0,e.computed)(()=>{const e=Qt(t.periods);if(0===Kt(e))return console.log("ðŸ” [SchedulerGrid] No periods available:",{periodsType:typeof t.periods,periodsLength:t.periods?.length,periodsKeys:Object.keys(t.periods||{}),samplePeriod:Array.isArray(t.periods)?t.periods[0]:t.periods}),[];Kt(e)>0&&console.log("ðŸ” [SchedulerGrid] Period processing summary:",{totalPeriods:Kt(e),focusedPeriodId:d.value,showNonInstructional:a.value,stableIds:e.slice(0,3).map(e=>e.id)});let o=e;if(d.value){const t=e.filter(e=>e.id===d.value);0===Kt(t)?(console.warn("ðŸš¨ [SchedulerGrid] Focused period ID does not match any periods. Clearing focus.",{focusedId:d.value,availableIds:e.slice(0,5).map(e=>e.id)}),d.value=null):o=t}else a.value||(o=e.filter(e=>{let t="flexible"===e.attendance_requirement||"required"===e.attendance_requirement||"contracted"===e.attendance_requirement;if(t||e.attendance_requirement)!t&&e.attendance_requirement&&"optional"!==e.attendance_requirement&&(t=!0);else if(void 0!==e.is_instructional)t=!0===e.is_instructional;else if(e.block_type)t=!["break","pause","lunch","recess","assembly","flexband","frÃ¼hdienst"].includes(e.block_type.toLowerCase());else if(e.label||e.name){const o=(e.label||e.name).toLowerCase();t=!(o.includes("break")||o.includes("pause")||o.includes("lunch")||o.includes("flexband")||o.includes("frÃ¼hdienst")||o.includes("benutzerdefiniert"))}else t=!0;return t}));return 0===Kt(o)&&Kt(t.periods)>0&&(o=Qt(t.periods)),o}),g=(0,e.ref)(""),h=(0,e.ref)("");let v=null;(0,e.watch)(h,e=>{clearTimeout(v),v=setTimeout(()=>{g.value=e},300)});const b=(0,e.computed)(()=>{let e=n.value?t.liveSchedules:t.draftSchedules;if(console.log("ðŸ” [SchedulerGrid] filteredEntries - Schedule debugging:",{isLiveMode:n.value,draftSchedulesCount:Kt(t.draftSchedules),liveSchedulesCount:Kt(t.liveSchedules),rawDraftSchedules:t.draftSchedules,rawLiveSchedules:t.liveSchedules,selectedEntries:e,selectedEntriesCount:Kt(e),sampleEntry:Kt(e)>0?e[0]:null}),g.value){const t=g.value.toLowerCase();e=e.filter(e=>e.course_name&&e.course_name.toLowerCase().includes(t)||e.subject_name&&e.subject_name.toLowerCase().includes(t)||e.class_name&&e.class_name.toLowerCase().includes(t)||e.teacher_names&&e.teacher_names.some(e=>e.toLowerCase().includes(t)))}return l.value&&(e=e.filter(e=>e.class_id===l.value)),r.value||(e=e.filter(e=>e.course_id)),e}),y=(0,e.computed)(()=>{const e=new Set;return t.classes.forEach(t=>{t.year_group&&e.add(t.year_group)}),Array.from(e).sort()}),x=(0,e.computed)(()=>s.value?t.classes.filter(e=>e.year_group===s.value):t.classes.slice().sort((e,t)=>e.name.localeCompare(t.name)));function k(e,o){return b.value.filter(a=>{const r=t.schoolDays.find(t=>t.id===e||t.day_id===e),n=a.day_id===e||a.day_id===r?.day_id||a.day_id===r?.id||a.day_number===r?.day_number||a.day_number===r?.id||r?.name&&a.day_name_en===r.name||r?.name_en&&a.day_name_en===r.name_en,s=t.periods.find(e=>e.id===o),l=a.period_id===o||a.block_number&&s?.blockNumber&&a.block_number===s.blockNumber;return n&&l}).sort((e,t)=>{const o=_(e.class_id),a=_(t.class_id);if(o!==a)return o.localeCompare(a);const r=C(e.course_id)||S(e.subject_id),n=C(t.course_id)||S(t.subject_id);return r.localeCompare(n)})}function C(e){if(!e)return null;const o=t.courses.find(t=>t.id===e);return o&&(o?.name||o?.course_name||o?.title)||null}function S(e){if(!e)return null;const o=t.subjects.find(t=>t.id===e);return o?.name||o?.title||o?.subject_name||`Subject ${e}`}function E(e){const t=C(e.course_id);if(t)return t;return S(e.subject_id)||"No Course"}function _(e){if(!e)return"";const o=t.classes.find(t=>t.id===e);return o?.name||"No Class"}function N(e){return t.conflicts.some(t=>t.day_id===e.day_id&&t.period_id===e.period_id&&(t.assignment_id===e.id||t.teacher_ids?.some(t=>e.teacher_ids?.includes(t))||t.class_id===e.class_id||t.room_id===e.room_id))}function I(e){const o=!e.course_id||t.courses.some(t=>t.id===e.course_id),a=!e.class_id||t.classes.some(t=>t.id===e.class_id),r=!e.room_id||t.rooms.some(t=>t.id===e.room_id),n=!e.teacher_ids?.length||e.teacher_ids.every(e=>t.teachers.some(t=>t.id===e));return!(o&&a&&r&&n)}function D(e){o("assignment-details",e)}function w(e,a,r){console.log("ðŸŽ¯ [Scheduler] Opening teacher/room selection for course:",e.name||e.course_name,"to day:",a,"period:",r,t.isReadOnly?"(READ-ONLY MODE - EVENTS ONLY)":"(EDITABLE MODE)"),f.value={courseId:e.id,courseName:e.name||e.course_name||"",courseCode:e.code||e.course_code||"",dayId:a,periodId:r},u.value=!0,o("scheduler-drag-end",{courseId:e.id,courseName:e.name||e.course_name||"",courseCode:e.code||e.course_code||"",success:!0,source:"drag-end",timestamp:(new Date).toISOString()}),console.log("âœ… [Scheduler] Drop events emitted to parent component")}const V=(0,e.ref)(null),A=(0,e.ref)(null),B=(0,e.ref)(null);function T(e){return i.value?.id===e}function L(){console.log("âŒ [InlineEdit] Cancelling edit"),i.value=null,c.value=null}return{showNonInstructional:a,showLessonSchedules:r,isLiveMode:n,selectedYearFilter:s,selectedClassFilter:l,focusedPeriodId:d,draggedCourse:V,draggedAssignment:A,dragOverCell:B,editingAssignment:i,editingCell:c,showTeacherRoomModal:u,modalCourseData:f,searchTerm:h,debouncedSearchTerm:g,visibleDays:m,visiblePeriods:p,filteredEntries:b,yearGroups:y,availableClasses:x,formatTime:function(e){if(!e)return"";const t=e.split(":");return t.length>=2?`${t[0]}:${t[1]}`:e},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""},getCellAssignments:k,getCellClasses:function(e,o){const a=k(e,o),r=[];return Kt(a)>0&&(r.push("has-assignments"),Kt(a)>1&&r.push("multiple-assignments")),a.some(a=>t.conflicts.some(t=>t.day_id===e&&t.period_id===o))&&r.push("has-conflicts"),r},getCellAriaLabel:function(e,t){const o=k(e.id,t.id);if(0===Kt(o))return`${e.name} ${t.name}: Empty, click to add assignment`;const a=o.map(e=>E(e)).join(", ");return`${e.name} ${t.name}: ${a}, ${Kt(o)} assignment${Kt(o)>1?"s":""}`},getAssignmentClasses:function(e){const t=[];return N(e)&&t.push("has-conflict"),I(e)&&t.push("has-deleted-entities"),!C(e.course_id)&&e.subject_id&&t.push("lesson-schedule"),t},getAssignmentStyles:function(e){const o=t.courses.find(t=>t.id===e.course_id),a=t.classes.find(t=>t.id===e.class_id);return{borderLeft:`4px solid ${o?.color||a?.color||"#e0e0e0"}`,backgroundColor:o?.color?`${o.color}15`:a?.color?`${a.color}15`:"#f9f9f9"}},getCourseName:C,getSubjectName:S,getDisplayName:E,getClassName:_,getTeacherNames:function(e){return e?.length?e.map(e=>{const o=t.teachers.find(t=>t.id===e);return o?.name||"Unknown Teacher"}).join(", "):"No Teacher"},getRoomName:function(e){if(!e)return"No Room";const o=t.rooms.find(t=>t.id===e);return o?.name||"Unknown Room"},hasConflicts:N,hasDeletedEntities:I,handleCellClick:function(e,a,r){t.isReadOnly||o("cell-click",{dayId:e,periodId:a,period:r})},openAssignmentModal:function(e,a,r){t.isReadOnly||o("cell-click",{dayId:e,periodId:a,period:r,mode:"add"})},openAssignmentDetails:D,handleLessonScheduleToggle:function(){o("toggle-lesson-schedules",r.value)},handleClassFilterChange:function(){},handleModeSwitch:function(){o("mode-changed",n.value?"live":"planning")},togglePeriodFocus:function(e){d.value===e?d.value=null:d.value=e,o("period-focus-changed",d.value)},clearPeriodFocus:function(){d.value=null,o("period-focus-changed",null)},getFocusedPeriodName:function(){const e=t.periods.find(e=>e.id===d.value);return e?.name||e?.label||"Unknown Period"},getAvailableCoursesForSlot:function(e,o){console.log("ðŸŽ¯ [SchedulerGrid] getAvailableCoursesForSlot:",{dayId:e,periodId:o,coursesTotal:Kt(t.courses)});let a=t.courses.map((e,t)=>Xt(e,t)).filter(t=>{if(0===Kt(t.possibleSlots))return!0;const a=t.possibleSlots.some(t=>t.dayId===e&&t.periodId===o);return a&&console.log("  âœ… Course available for slot:",{courseName:t.name,courseId:t.id,possibleSlots:t.possibleSlots,dayId:e,periodId:o}),a});if(g.value){const e=g.value.toLowerCase();a=a.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.course_name&&t.course_name.toLowerCase().includes(e)||t.title&&t.title.toLowerCase().includes(e)||t.course_code&&t.course_code.toLowerCase().includes(e)||t.subject_name&&t.subject_name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}if(l.value){const e=t.classes.find(e=>e.id===l.value);e&&(a=a.filter(t=>!(t.is_for_year_groups&&Kt(t.is_for_year_groups)>0)||t.is_for_year_groups.includes(e.year_group)))}return console.log("ðŸŽ¯ [SchedulerGrid] Available courses for slot (after filtering):",{dayId:e,periodId:o,availableCount:Kt(a),searchTerm:g.value,classFilter:l.value,courses:a.map(e=>({id:e.id,name:e.name||e.course_name}))}),a},getCourseCardStyle:function(e){return{borderLeft:`4px solid ${e.color||"#007cba"}`,backgroundColor:e.color?`${e.color}15`:"#f0f8ff"}},assignCourseToSlot:w,getNoPreferredDaysCourses:function(){const e=t.courses.filter(e=>!e.possible_time_slots||0===Kt(e.possible_time_slots));let o=e;if(g.value){const e=g.value.toLowerCase();o=o.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.course_name&&t.course_name.toLowerCase().includes(e)||t.title&&t.title.toLowerCase().includes(e)||t.course_code&&t.course_code.toLowerCase().includes(e)||t.subject_name&&t.subject_name.toLowerCase().includes(e))}return l.value&&(o=o.filter(e=>{const o=t.classes.find(e=>e.id===l.value);return!o||!e.is_for_year_groups||e.is_for_year_groups.includes(o.year_group)})),console.log("ðŸ“… [NoPreferredDays] Filtered courses:",{total:Kt(e),afterSearch:Kt(o),searchTerm:g.value,classFilter:l.value}),o},assignCourseToFocusedSlot:function(e){if(t.isReadOnly||!d.value)return;const o=m.value[0];o&&w(e,o.id,d.value)},handleCourseDragStart:function(e,a){console.log("ðŸš€ [Scheduler] Drag started:",a.name||a.course_name,t.isReadOnly?"(READ-ONLY MODE)":"(EDITABLE MODE)"),V.value=a,o("scheduler-drag-start",{courseId:a.id,courseName:a.name||a.course_name||"",courseCode:a.code||a.course_code||"",source:"drag-start",timestamp:(new Date).toISOString()}),e.dataTransfer.setData("text/plain",JSON.stringify({type:"course",course:a,id:a.id})),e.dataTransfer.effectAllowed="copy",e.target.style.opacity="0.5"},handleCourseDragEnd:function(e){console.log("ðŸŽ¯ [DragDrop] Course drag ended");const t=V.value;o("scheduler-drag-end",{courseId:t?.id||null,courseName:t?.name||t?.course_name||null,courseCode:t?.code||t?.course_code||null,success:!1,source:"drag-end",timestamp:(new Date).toISOString()}),V.value=null,e.target.style.opacity="1"},handleAssignmentDragStart:function(e,o,a,r){console.log("ðŸŽ¯ [DragDrop] Assignment drag started:",o.course_name||o.subject_name,t.isReadOnly?"(READ-ONLY MODE)":"(EDITABLE MODE)"),A.value={assignment:o,originalDayId:a,originalPeriodId:r},e.dataTransfer.setData("text/plain",JSON.stringify({type:"assignment",assignment:o,originalDayId:a,originalPeriodId:r})),e.dataTransfer.effectAllowed="move",e.target.style.opacity="0.5"},handleAssignmentDragEnd:function(e){console.log("ðŸŽ¯ [DragDrop] Assignment drag ended"),A.value=null,e.target.style.opacity="1",B.value=null},handleCellDragOver:function(e,t,o){if(e.preventDefault(),V.value||A.value)return e.dataTransfer.dropEffect=A.value?"move":"copy",!1},handleCellDragEnter:function(e,t,o){e.preventDefault(),(V.value||A.value)&&(B.value=`${t}-${o}`,e.currentTarget.classList.add("drag-over"))},handleCellDragLeave:function(e,t,o){e.currentTarget.contains(e.relatedTarget)||(B.value=null,e.currentTarget.classList.remove("drag-over"))},handleCellDrop:function(e,a,r){e.preventDefault(),B.value=null,e.currentTarget.classList.remove("drag-over");try{const n=JSON.parse(e.dataTransfer.getData("text/plain"));if("course"===n.type){const e=n.course;console.log("ðŸŽ¯ [Scheduler] Dropping:",e.name||e.course_name,"to day:",a,"period:",r),w(e,a,r)}else if("assignment"===n.type){const e=n.assignment,s=n.originalDayId,l=n.originalPeriodId;console.log("ðŸŽ¯ [DragDrop] Moving assignment from:",s,l,"to:",a,r),s===a&&l===r||(o("scheduler-drop",{schoolId:t.schoolId||null,draftId:t.draftId||null,dayId:a,periodId:r,courseId:e.course_id||"",courseName:e.course_name||e.display_cell||"",courseCode:e.course_code||"",teacherIds:e.teacher_ids||[],primaryTeacherId:e.primary_teacher_id||null,roomId:e.room_id||null,source:"assignment-move",timestamp:(new Date).toISOString(),fromDayId:s,fromPeriodId:l,action:"move"}),o("update-assignments",{action:"move",assignment:e,fromDayId:s,fromPeriodId:l,toDayId:a,toPeriodId:r}))}}catch(e){console.error("ðŸš¨ [DragDrop] Error handling drop:",e)}},isEditing:T,handleAssignmentClick:function(e,o,a){t.isReadOnly||T(e.id)||(i.value&&L(),D(e))},startInlineEdit:function(e,o,a){t.isReadOnly||(console.log("âœï¸ [InlineEdit] Starting edit for assignment:",e.id),i.value&&L(),i.value=e,c.value={dayId:o,periodId:a})},saveInlineEdit:function(e){console.log("ðŸ’¾ [InlineEdit] Saving changes for assignment:",e.id);const a=(n.value?t.liveSchedules:t.draftSchedules).map(t=>t.id===e.id?e:t);o("update-assignments",a),i.value=null,c.value=null},cancelInlineEdit:L,deleteInlineAssignment:function(e){if(console.log("ðŸ—‘ï¸ [InlineEdit] Deleting assignment:",e.id),t.emitDropEvents){const a=t.parentEmit||o;emitSchedulerRemoveEvent(a,{schoolId:t.schoolId,draftId:t.draftId,dayId:e.day_id,periodId:e.period_id,assignmentId:e.id,courseId:e.course_id,courseName:e.course_name||e.display_cell||""})}const a=(n.value?t.liveSchedules:t.draftSchedules).filter(t=>t.id!==e.id);o("update-assignments",a),i.value=null,c.value=null},handleTeacherRoomSubmit:function(e){console.log("ðŸŽ¯ [Modal] Teacher/room assignment submitted:",e),o("scheduler-drop",{schoolId:t.schoolId||null,draftId:t.draftId||null,dayId:e.dayId,periodId:e.periodId,courseId:e.courseId,courseName:e.courseName,courseCode:f.value?.courseCode||"",teacherIds:e.teacherIds,primaryTeacherId:e.primaryTeacherId,roomId:e.roomId,source:"modal-assignment",timestamp:e.timestamp}),u.value=!1,f.value=null},handleTeacherRoomCancel:function(){console.log("âŒ [Modal] Teacher/room assignment cancelled"),u.value=!1,f.value=null},safeLength:Kt,safeArray:Qt}}};o(184);const oo={name:"CourseScheduler",components:{SchedulerGrid:(0,mt.Z)(to,[["render",function(t,o,a,r,n,s){const l=(0,e.resolveComponent)("InlineAssignmentEditor"),d=(0,e.resolveComponent)("GradeStatistics"),i=(0,e.resolveComponent)("TeacherRoomSelectionModal");return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,null,[(0,e.createElementVNode)("div",x,[(0,e.createCommentVNode)(" Toolbar "),(0,e.createElementVNode)("div",k,[(0,e.createElementVNode)("div",C,[(0,e.createElementVNode)("label",S,[(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=e=>r.showNonInstructional=e),onChange:o[1]||(o[1]=e=>t.$emit("toggle-non-instructional",r.showNonInstructional))},null,544),[[e.vModelCheckbox,r.showNonInstructional]]),(0,e.createTextVNode)(" Show Non-Instructional Blocks ")]),(0,e.createElementVNode)("label",E,[(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=e=>r.showLessonSchedules=e),onChange:o[3]||(o[3]=(...e)=>r.handleLessonScheduleToggle&&r.handleLessonScheduleToggle(...e))},null,544),[[e.vModelCheckbox,r.showLessonSchedules]]),(0,e.createTextVNode)(" Show Lesson Schedules (No Course) ")])]),(0,e.createElementVNode)("div",_,[(0,e.createElementVNode)("label",N,[I,(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=e=>r.isLiveMode=e),onChange:o[5]||(o[5]=(...e)=>r.handleModeSwitch&&r.handleModeSwitch(...e)),class:"mode-toggle"},null,544),[[e.vModelCheckbox,r.isLiveMode]]),D])]),(0,e.createElementVNode)("div",w,[(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":o[6]||(o[6]=e=>r.selectedYearFilter=e),onChange:o[7]||(o[7]=e=>t.$emit("filter-year",r.selectedYearFilter))},[V,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.yearGroups,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t,value:t},(0,e.toDisplayString)(t),9,A))),128))],544),[[e.vModelSelect,r.selectedYearFilter]])]),(0,e.createElementVNode)("div",B,[(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":o[8]||(o[8]=e=>r.selectedClassFilter=e),onChange:o[9]||(o[9]=(...e)=>r.handleClassFilterChange&&r.handleClassFilterChange(...e))},[T,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.availableClasses,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name),9,L))),128))],544),[[e.vModelSelect,r.selectedClassFilter]])]),(0,e.createElementVNode)("div",P,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":o[10]||(o[10]=e=>r.searchTerm=e),type:"text",placeholder:"Search courses/classes...",class:"search-input",title:"Search assignments by course, class, or teacher name"},null,512),[[e.vModelText,r.searchTerm]]),r.searchTerm?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:o[11]||(o[11]=e=>r.searchTerm=""),class:"clear-search-btn",title:"Clear search"}," âœ• ")):(0,e.createCommentVNode)("v-if",!0),r.debouncedSearchTerm||r.selectedClassFilter?((0,e.openBlock)(),(0,e.createElementBlock)("div",j,[(0,e.createElementVNode)("small",null,[(0,e.createTextVNode)(" Filters active: "),r.debouncedSearchTerm?((0,e.openBlock)(),(0,e.createElementBlock)("span",M,'Search: "'+(0,e.toDisplayString)(r.debouncedSearchTerm)+'"',1)):(0,e.createCommentVNode)("v-if",!0),r.selectedClassFilter?((0,e.openBlock)(),(0,e.createElementBlock)("span",z,"Class: "+(0,e.toDisplayString)(r.getClassName(r.selectedClassFilter)),1)):(0,e.createCommentVNode)("v-if",!0),r.showLessonSchedules?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",O,"Courses only")),r.showNonInstructional?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",F,"Instructional periods only"))])])):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createElementVNode)("div",$,[r.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:o[12]||(o[12]=(...e)=>r.clearPeriodFocus&&r.clearPeriodFocus(...e)),class:"focus-button active",title:"Show all periods"}," Show All Periods (Currently: "+(0,e.toDisplayString)(r.getFocusedPeriodName())+") ",1)):((0,e.openBlock)(),(0,e.createElementBlock)("span",W,"Click a period name to focus on that period and see available courses"))]),(0,e.createElementVNode)("div",R,[(0,e.createElementVNode)("button",{onClick:o[13]||(o[13]=e=>t.$emit("undo-last")),disabled:!a.canUndo,class:"undo-button",title:"Undo last change"}," â†¶ Undo ",8,U),(0,e.createElementVNode)("button",{onClick:o[14]||(o[14]=e=>t.$emit("save-draft")),class:(0,e.normalizeClass)(["save-button",{saving:a.isSaving}])},(0,e.toDisplayString)(a.isSaving?"Saving...":"Save Draft"),3)])]),(0,e.createCommentVNode)(" Main Grid "),r.safeLength(r.visibleDays)>0&&r.safeLength(r.visiblePeriods)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",q,[(0,e.createCommentVNode)(" Debug info for main grid with visibility status "),(0,e.createElementVNode)("div",G,[(0,e.createElementVNode)("small",null," âœ… NORMAL MODE - Days: "+(0,e.toDisplayString)(r.safeLength(r.visibleDays))+", Periods: "+(0,e.toDisplayString)(r.safeLength(r.visiblePeriods))+" | Drafts: "+(0,e.toDisplayString)(r.safeLength(a.draftSchedules))+", Live: "+(0,e.toDisplayString)(r.safeLength(a.liveSchedules))+" | Mode: "+(0,e.toDisplayString)(r.isLiveMode?"Live":"Planning"),1)]),(0,e.createCommentVNode)(" Grid Header with Days "),(0,e.createElementVNode)("div",Y,[(0,e.createElementVNode)("div",Z,[H,(0,e.createElementVNode)("div",J,[(0,e.createElementVNode)("small",null,"Days: "+(0,e.toDisplayString)(r.safeLength(r.visibleDays))+", Periods: "+(0,e.toDisplayString)(r.safeLength(r.visiblePeriods)),1)])]),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.visibleDays,(t,o)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:"day-header-cell",role:"columnheader","aria-colindex":o+1},[(0,e.createElementVNode)("span",Q,(0,e.toDisplayString)(t.name),1),t.date?((0,e.openBlock)(),(0,e.createElementBlock)("span",X,(0,e.toDisplayString)(r.formatDate(t.date)),1)):(0,e.createCommentVNode)("v-if",!0),(0,e.createElementVNode)("div",ee,[(0,e.createElementVNode)("small",null,"ID: "+(0,e.toDisplayString)(t.id),1)])],8,K))),128))]),(0,e.createCommentVNode)(" Grid Body "),(0,e.createElementVNode)("div",te,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.visiblePeriods,(t,n)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:(0,e.normalizeClass)(["grid-row",{"non-instructional":!t.is_instructional}]),role:"row","aria-rowindex":n+1},[(0,e.createCommentVNode)(" Period Label "),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["period-label-cell",{focused:r.focusedPeriodId===t.id}]),role:"rowheader",onClick:e=>r.togglePeriodFocus(t.id),title:"Click to focus on this period"},[(0,e.createElementVNode)("div",re,[(0,e.createElementVNode)("span",ne,(0,e.toDisplayString)(t.name),1),(0,e.createElementVNode)("span",se,(0,e.toDisplayString)(r.formatTime(t.start_time))+" - "+(0,e.toDisplayString)(r.formatTime(t.end_time)),1),t.is_instructional?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",le,(0,e.toDisplayString)(t.type||"Break"),1)),(0,e.createElementVNode)("div",de,[(0,e.createElementVNode)("small",null,"ID: "+(0,e.toDisplayString)(t.id)+", Instructional: "+(0,e.toDisplayString)(!1!==t.is_instructional?"Yes":"No"),1)])])],10,ae),(0,e.createCommentVNode)(" Day Cells "),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.visibleDays,n=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`${t.id}-${n.id}`,class:(0,e.normalizeClass)(["schedule-cell drop-zone",r.getCellClasses(n.id,t.id)]),role:"gridcell",tabindex:"0",onClick:e=>r.handleCellClick(n.id,t.id,t),onKeydown:[(0,e.withKeys)(e=>r.handleCellClick(n.id,t.id,t),["enter"]),(0,e.withKeys)((0,e.withModifiers)(e=>r.handleCellClick(n.id,t.id,t),["prevent"]),["space"])],"aria-label":r.getCellAriaLabel(n,t),onDragover:(0,e.withModifiers)(e=>r.handleCellDragOver(e,n.id,t.id),["prevent"]),onDragenter:(0,e.withModifiers)(e=>r.handleCellDragEnter(e,n.id,t.id),["prevent"]),onDragleave:e=>r.handleCellDragLeave(e,n.id,t.id),onDrop:e=>r.handleCellDrop(e,n.id,t.id),"data-day-id":n.id,"data-period-id":t.id},[(0,e.createCommentVNode)(" Multiple Assignments Display "),r.safeLength(r.getCellAssignments(n.id,t.id))>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",ce,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.getCellAssignments(n.id,t.id),(s,d)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:d,class:(0,e.normalizeClass)(["assignment-item draggable-assignment",r.getAssignmentClasses(s)]),style:(0,e.normalizeStyle)(r.getAssignmentStyles(s)),onClick:(0,e.withModifiers)(e=>r.handleAssignmentClick(s,n.id,t.id),["stop"]),draggable:!r.isEditing(s.id),onDragstart:e=>r.handleAssignmentDragStart(e,s,n.id,t.id),onDragend:o[15]||(o[15]=e=>r.handleAssignmentDragEnd(e)),"data-assignment-id":s.id,"data-day-id":n.id,"data-period-id":t.id},[(0,e.createCommentVNode)(" Normal Assignment Display "),r.isEditing(s.id)?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",fe,[(0,e.createElementVNode)("span",me,(0,e.toDisplayString)(r.getDisplayName(s)),1),s.class_id?((0,e.openBlock)(),(0,e.createElementBlock)("span",pe,(0,e.toDisplayString)(r.getClassName(s.class_id)),1)):(0,e.createCommentVNode)("v-if",!0),r.safeLength(s.teacher_ids)>0?((0,e.openBlock)(),(0,e.createElementBlock)("span",ge,(0,e.toDisplayString)(r.getTeacherNames(s.teacher_ids)),1)):(0,e.createCommentVNode)("v-if",!0),s.room_id?((0,e.openBlock)(),(0,e.createElementBlock)("span",he,(0,e.toDisplayString)(r.getRoomName(s.room_id)),1)):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Quick Edit Button "),a.isReadOnly?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:3,onClick:(0,e.withModifiers)(e=>r.startInlineEdit(s,n.id,t.id),["stop"]),class:"quick-edit-btn",title:"Click to edit inline"}," âœï¸ ",8,ve))])),(0,e.createCommentVNode)(" Inline Editor "),r.isEditing(s.id)?((0,e.openBlock)(),(0,e.createBlock)(l,{key:1,assignment:s,courses:a.courses,teachers:a.teachers,classes:a.classes,rooms:a.rooms,subjects:a.subjects,onSave:r.saveInlineEdit,onCancel:r.cancelInlineEdit,onDelete:r.deleteInlineAssignment},null,8,["assignment","courses","teachers","classes","rooms","subjects","onSave","onCancel","onDelete"])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Conflict Indicators "),r.hasConflicts(s)?((0,e.openBlock)(),(0,e.createElementBlock)("div",be," âš ï¸ ")):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Deleted Entity Warnings "),r.hasDeletedEntities(s)?((0,e.openBlock)(),(0,e.createElementBlock)("div",ye," âŒ ")):(0,e.createCommentVNode)("v-if",!0)],46,ue))),128)),(0,e.createCommentVNode)(" Add More Button for cells with assignments "),(0,e.createElementVNode)("button",{class:"add-more-button",onClick:(0,e.withModifiers)(e=>r.openAssignmentModal(n.id,t.id,t),["stop"]),title:"Add another assignment"}," + ",8,xe)])):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createCommentVNode)(" Empty Cell "),(0,e.createElementVNode)("div",{class:"empty-cell",onClick:e=>r.openAssignmentModal(n.id,t.id,t)},Ce,8,ke)],2112))],42,ie))),128))],10,oe))),128))])])):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createCommentVNode)(" Debug info when grid is hidden "),(0,e.createElementVNode)("div",Se,[(0,e.createElementVNode)("div",Ee,[(0,e.createTextVNode)(" âŒ Grid Hidden - Debug Info: "),(0,e.createElementVNode)("ul",null,[(0,e.createElementVNode)("li",null,"Visible Days: "+(0,e.toDisplayString)(r.safeLength(r.visibleDays))+" ("+(0,e.toDisplayString)(r.visibleDays.map(e=>e.name).join(", "))+")",1),(0,e.createElementVNode)("li",null," Visible Periods: "+(0,e.toDisplayString)(r.safeLength(r.visiblePeriods))+" ("+(0,e.toDisplayString)(r.visiblePeriods.map(e=>e.name||e.label).join(", "))+") ",1),(0,e.createElementVNode)("li",null,"Show Non-Instructional: "+(0,e.toDisplayString)(r.showNonInstructional),1),(0,e.createElementVNode)("li",null,"Focused Period: "+(0,e.toDisplayString)(r.focusedPeriodId),1),(0,e.createElementVNode)("li",null,"Total Periods Available: "+(0,e.toDisplayString)(r.safeLength(a.periods)),1),(0,e.createElementVNode)("li",null,"Total School Days Available: "+(0,e.toDisplayString)(r.safeLength(a.schoolDays)),1)]),(0,e.createElementVNode)("button",{onClick:o[16]||(o[16]=e=>{r.showNonInstructional=!0,r.focusedPeriodId=null}),class:"emergency-show-btn"}," ðŸš¨ Emergency: Show All Data ")])])],2112)),(0,e.createCommentVNode)(" Available Courses for Focused Period "),r.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("div",_e,[(0,e.createElementVNode)("h3",null,"Available Courses for "+(0,e.toDisplayString)(r.getFocusedPeriodName()),1),Ne,(0,e.createElementVNode)("div",Ie,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.visibleDays,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:"day-courses-column"},[(0,e.createElementVNode)("h4",null,(0,e.toDisplayString)(t.name),1),(0,e.createElementVNode)("div",De,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.getAvailableCoursesForSlot(t.id,r.focusedPeriodId),a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:"course-card draggable-course",style:(0,e.normalizeStyle)(r.getCourseCardStyle(a)),onClick:e=>r.assignCourseToSlot(a,t.id,r.focusedPeriodId),title:`Click to assign or drag ${a.name||a.course_name} to schedule`,draggable:!0,"data-course-id":a.id,"data-day-id":t.id,"data-period-id":r.focusedPeriodId,onDragstart:e=>r.handleCourseDragStart(e,a),onDragend:o[17]||(o[17]=e=>r.handleCourseDragEnd(e))},[(0,e.createElementVNode)("div",Ve,(0,e.toDisplayString)(a.name||a.course_name||a.title),1),(0,e.createElementVNode)("div",Ae,[a.course_code?((0,e.openBlock)(),(0,e.createElementBlock)("small",Be,"Code: "+(0,e.toDisplayString)(a.course_code),1)):(0,e.createCommentVNode)("v-if",!0),a.max_students?((0,e.openBlock)(),(0,e.createElementBlock)("small",Te,"Max: "+(0,e.toDisplayString)(a.max_students),1)):(0,e.createCommentVNode)("v-if",!0),a.subject_name?((0,e.openBlock)(),(0,e.createElementBlock)("small",Le,(0,e.toDisplayString)(a.subject_name),1)):(0,e.createCommentVNode)("v-if",!0)])],44,we))),128)),0===r.safeLength(r.getAvailableCoursesForSlot(t.id,r.focusedPeriodId))?((0,e.openBlock)(),(0,e.createElementBlock)("div",Pe," No courses available for this day/period ")):(0,e.createCommentVNode)("v-if",!0)])]))),128))]),(0,e.createCommentVNode)(" No Preferred Days Courses Panel "),r.safeLength(r.getNoPreferredDaysCourses())>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",je,[Me,ze,(0,e.createElementVNode)("div",Oe,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(r.getNoPreferredDaysCourses(),t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`no-pref-${t.id}`,class:"course-card",style:(0,e.normalizeStyle)(r.getCourseCardStyle(t)),onClick:e=>r.assignCourseToFocusedSlot(t),title:`${t.name||t.course_name} - Can be scheduled on any day`},[(0,e.createElementVNode)("div",$e,(0,e.toDisplayString)(t.name||t.course_name||t.title),1),(0,e.createElementVNode)("div",We,[t.course_code?((0,e.openBlock)(),(0,e.createElementBlock)("small",Re,"Code: "+(0,e.toDisplayString)(t.course_code),1)):(0,e.createCommentVNode)("v-if",!0),t.max_students?((0,e.openBlock)(),(0,e.createElementBlock)("small",Ue,"Max: "+(0,e.toDisplayString)(t.max_students),1)):(0,e.createCommentVNode)("v-if",!0),t.subject_name?((0,e.openBlock)(),(0,e.createElementBlock)("small",qe,(0,e.toDisplayString)(t.subject_name),1)):(0,e.createCommentVNode)("v-if",!0),Ge])],12,Fe))),128))])])):(0,e.createCommentVNode)("v-if",!0)])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Grade Statistics Component "),a.showStatistics&&r.focusedPeriodId?((0,e.openBlock)(),(0,e.createBlock)(d,{key:3,courses:a.courses,"draft-schedules":a.draftSchedules,"visible-days":r.visibleDays,periods:a.periods,"focused-period-id":r.focusedPeriodId,"show-statistics":a.showStatistics,"get-available-courses-for-slot":r.getAvailableCoursesForSlot,"get-focused-period-name":r.getFocusedPeriodName},null,8,["courses","draft-schedules","visible-days","periods","focused-period-id","show-statistics","get-available-courses-for-slot","get-focused-period-name"])):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createCommentVNode)(" Teacher/Room Selection Modal "),r.showTeacherRoomModal&&r.modalCourseData?((0,e.openBlock)(),(0,e.createBlock)(i,{key:0,courseId:r.modalCourseData.courseId,courseName:r.modalCourseData.courseName,dayId:r.modalCourseData.dayId,periodId:r.modalCourseData.periodId,draftId:a.draftId,schoolId:a.schoolId,teachers:a.teachers,rooms:a.rooms,onSubmit:r.handleTeacherRoomSubmit,onCancel:r.handleTeacherRoomCancel},null,8,["courseId","courseName","dayId","periodId","draftId","schoolId","teachers","rooms","onSubmit","onCancel"])):(0,e.createCommentVNode)("v-if",!0)],64)}],["__scopeId","data-v-f14582fc"]])},props:{content:{type:Object,required:!0,default:()=>({schoolId:null,draftId:null,publishedBy:null,periods:[],courses:[],teachers:[],classes:[],rooms:[],schoolDays:[],draftSchedules:[],liveSchedules:[],subjects:[],emitDropEvents:!1})},wwElementState:{type:Object,required:!0},wwEditorState:{type:Object,required:!0}},setup(t,{emit:o}){const a=(0,e.ref)(!1),r=(0,e.ref)(!1),n=(0,e.ref)(!1),s=(0,e.ref)(!1),l=(0,e.ref)([]),d=(0,e.ref)({dayId:null,periodId:null,period:null,assignments:[],conflicts:[]}),i=(0,e.computed)(()=>t.content.schoolId||"No School ID"),c=(0,e.computed)(()=>t.content.draftId||"No Draft ID"),u=(0,e.computed)(()=>t.content.publishedBy||null),f=(0,e.computed)(()=>{const e=function(e){const t=Zt(e);return Jt(t)?t.map((e,t)=>{const o=e.block_number||e.blocknumber||t+1;let a=e.label||e.name_de||e.name||`Period ${o}`,r=e.time;e.start_time&&e.end_time?r=`${e.start_time} - ${e.end_time}`:(e.start_time||e.end_time)&&(r=e.start_time||e.end_time);let n=!0;if(e.block_type)n=!["break","pause","lunch","recess","assembly","flexband","frÃ¼hdienst","hofpause","before_school"].includes(e.block_type.toLowerCase());else if("optional"===e.attendance_requirement)n=!1;else if(a&&"string"==typeof a){const e=a.toLowerCase();n=!["break","pause","lunch","flexband","frÃ¼hdienst","hofpause"].some(t=>e.includes(t))}const s=e.id||`period-${o}`;return{...e,id:s,blockNumber:Number(o),label:a,name:a,time:r||`${o}. Period`,is_instructional:void 0!==e.is_instructional?e.is_instructional:n,type:e.block_type||e.type||(n?"lesson":"break"),block_number:Number(o)}}).sort((e,t)=>e.blockNumber-t.blockNumber):[]}(t.content.periods);return Jt(e)?e:(console.log("ðŸ“‹ [Periods] No periods data available"),[])}),m=(0,e.computed)(()=>{const e=Zt(t.content.courses);return Jt(e)||console.log("ðŸŽ¯ [wwElement] Courses processing: no data available"),e.map((e,t)=>Xt(e,t))}),p=(0,e.computed)(()=>{const e=Zt(t.content.teachers);return Jt(e)||console.log("ðŸ‘¥ [wwElement] Teachers processing: no data available"),e}),g=(0,e.computed)(()=>{const e=Zt(t.content.classes);return Jt(e)||console.log("ðŸ« [wwElement] Classes processing: no data available"),e}),h=(0,e.computed)(()=>{const e=Zt(t.content.rooms);return Jt(e)||console.log("ðŸ  [wwElement] Rooms processing: no data available"),e}),v=(0,e.computed)(()=>{const e=Zt(t.content.schoolDays);if(!Jt(e))return console.log("ðŸ“… [wwElement] SchoolDays processing: no data available"),[];const o=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map((e,t)=>{const a=e.name||e.name_en||e.day_name||o[t]||`Day ${t+1}`;return{...e,id:e.day_id||e.id,name:a,date:e.date||e.day_date||null,is_active:void 0===e.is_active||e.is_active,day_number:e.day_number||t+1,day_id:e.day_id||e.id}})}),b=(0,e.computed)(()=>{const e=Zt(t.content.draftSchedules);return Jt(e)||console.log("ðŸ“ [wwElement] Draft Schedules processing: no data available"),e}),y=(0,e.computed)(()=>{const e=Zt(t.content.liveSchedules);return Jt(e)||console.log("ðŸ“º [wwElement] Live Schedules processing: no data available"),e}),x=(0,e.computed)(()=>{const e=Zt(t.content.subjects);return Jt(e)||console.log("ðŸ“š [wwElement] Subjects processing: no data available"),e}),k=(0,e.computed)(()=>!!u.value),C=(0,e.computed)(()=>Kt(l.value)>0),S=(0,e.computed)(()=>function(e){const t=[],o=Date.now(),a=new Map;return e.forEach((e,t)=>{const o=`${e.day_id}-${e.period_id}`;a.has(o)||a.set(o,[]),a.get(o).push({...e,index:t})}),a.forEach((e,a)=>{if(Kt(e)<2)return;const[r,n]=a.split("-").map(Number),s=new Map;e.forEach(e=>{e.teacher_ids?.forEach(t=>{s.has(t)||s.set(t,[]),s.get(t).push(e)})}),s.forEach((e,s)=>{Kt(e)>1&&t.push({id:`${o}-teacher-${s}-${a}`,type:"teacher",severity:"high",day_id:r,period_id:n,affected_teachers:[s],affected_courses:e.map(e=>e.course_id),message:`Teacher is assigned to ${Kt(e)} courses at the same time`,auto_resolvable:!1})});const l=new Map;e.forEach(e=>{e.room_id&&(l.has(e.room_id)||l.set(e.room_id,[]),l.get(e.room_id).push(e))}),l.forEach((e,s)=>{Kt(e)>1&&t.push({id:`${o}-room-${s}-${a}`,type:"room",severity:"high",day_id:r,period_id:n,affected_rooms:[s],affected_courses:e.map(e=>e.course_id),message:`Room is booked for ${Kt(e)} courses at the same time`,auto_resolvable:!0})});const d=new Map;e.forEach(e=>{e.class_id&&(d.has(e.class_id)||d.set(e.class_id,[]),d.get(e.class_id).push(e))}),d.forEach((e,s)=>{Kt(e)>1&&t.push({id:`${o}-class-${s}-${a}`,type:"class",severity:"medium",day_id:r,period_id:n,affected_classes:[s],affected_courses:e.map(e=>e.course_id),message:`Class has ${Kt(e)} overlapping assignments`,auto_resolvable:!1})})}),t}(b.value)),E=(0,e.computed)(()=>{if(!d.value.dayId||!d.value.periodId)return m.value;const e=d.value.dayId,t=d.value.periodId;return e&&t&&console.log("ðŸŽ¯ [wwElement] availableCoursesForSlot filtering:",{currentDayId:e,currentPeriodId:t,totalCourses:Kt(m.value)}),m.value.filter(o=>{if(0===Kt(o.possibleSlots))return!0;const a=o.possibleSlots.some(o=>o.dayId===e&&o.periodId===t);return a&&console.log("  âœ… Available course:",{courseName:o.name,possibleSlots:o.possibleSlots}),a})});function _(){const e=JSON.stringify(b.value);l.value.push(e),Kt(l.value)>10&&l.value.shift()}function N(){a.value=!1,d.value={dayId:null,periodId:null,period:null,assignments:[],conflicts:[],preSelectedCourse:null}}function I(e){o("trigger-event",{name:"updateDraftSchedules",event:{draftSchedules:e}})}async function D(){s.value=!0;try{o("trigger-event",{name:"saveDraft",event:{draftId:c.value,schedules:b.value,timestamp:(new Date).toISOString(),action:"save_draft"}}),o("save-draft-external",{draftId:c.value,schedules:b.value,timestamp:(new Date).toISOString()}),await new Promise(e=>setTimeout(e,1e3)),console.log("ðŸ’¾ [wwElement] Draft saved successfully")}catch(e){console.error("âŒ [wwElement] Error saving draft:",e)}finally{s.value=!1}}let w;return(0,e.watch)(b,()=>{k.value||(clearTimeout(w),w=setTimeout(()=>{D()},2e3))},{deep:!0}),(0,e.onMounted)(()=>{console.log("ðŸš€ [wwElement] Component mounted - Course Scheduler loaded successfully")}),(0,e.watch)(()=>t.content,(e,t)=>{e&&t&&(e?.periods?.length!==t?.periods?.length||e?.schoolDays?.length!==t?.schoolDays?.length||e?.courses?.length!==t?.courses?.length)&&console.log("ðŸ”„ [wwElement] Content structure changed:",{periods:e?.periods?.length||0,schoolDays:e?.schoolDays?.length||0,courses:e?.courses?.length||0})},{deep:!0}),{schoolId:i,draftId:c,publishedBy:u,periods:f,courses:m,teachers:p,classes:g,rooms:h,schoolDays:v,draftSchedules:b,liveSchedules:y,subjects:x,showAssignmentModal:a,showConflicts:r,showTestData:n,selectedCell:d,isSaving:s,isReadOnly:k,canUndo:C,allConflicts:S,availableCoursesForSlot:E,handleCellClick:function({dayId:e,periodId:t,period:o,mode:r,preSelectedCourse:n}){if(k.value)return;const s=b.value.filter(o=>o.day_id===e&&o.period_id===t),l=S.value.filter(o=>o.day_id===e&&o.period_id===t);d.value={dayId:e,periodId:t,period:o,assignments:s,conflicts:l,preSelectedCourse:n},a.value=!0},closeAssignmentModal:N,addAssignment:function(e){_(),I([...b.value,e]),N()},editAssignment:function(e){N(),o("edit-assignment-requested",e)},removeAssignment:function(e){var a;_(),t.content.emitDropEvents&&function(e,t,o){try{if(console.log(`ðŸš€ [WeWeb Event] Attempting to emit trigger-event: ${t}`),"function"==typeof e){console.log(`ðŸ“¡ [WeWeb Event] Using parent emit function for: ${t}`);try{return e("trigger-event",{name:t,event:o}),console.log(`âœ… [WeWeb Event] ${t} emitted successfully via parent emit`),!0}catch(e){return console.error(`âŒ [WeWeb Event] ${t} failed via parent emit:`,e),!1}}if(e&&"function"==typeof e.$emit){console.log(`ðŸ“¡ [WeWeb Event] Fallback: Using Vue 2 $emit for: ${t}`);try{return e.$emit("trigger-event",{name:t,event:o}),console.log(`âœ… [WeWeb Event] ${t} emitted successfully via $emit`),!0}catch(e){return console.error(`âŒ [WeWeb Event] ${t} failed via $emit:`,e),!1}}return console.error(`âŒ [WeWeb Event] No valid emit function found for: ${t}`),!1}catch(e){return console.error(`âŒ [WeWeb Event] Fatal error emitting ${t}:`,e),!1}}(o,"scheduler:remove",{schoolId:(a={schoolId:t.content.schoolId,draftId:t.content.draftId,dayId:e.day_id,periodId:e.period_id,assignmentId:e.id,courseId:e.course_id,courseName:e.course_name||e.display_cell||""}).schoolId||null,draftId:a.draftId||null,dayId:Number(a.dayId),periodId:String(a.periodId),assignmentId:String(a.assignmentId),courseId:a.courseId?String(a.courseId):null,courseName:a.courseName?String(a.courseName):null,source:"remove",timestamp:(new Date).toISOString()}),I(b.value.filter(t=>!(t.day_id===e.day_id&&t.period_id===e.period_id&&t.course_id===e.course_id&&t.class_id===e.class_id)))},updateAssignments:function(e){if("move"===e.action&&e.assignment){const t=[...b.value],o=t.findIndex(t=>t.id===e.assignment.id);if(-1!==o){const a={...t[o],day_id:e.toDayId,period_id:e.toPeriodId,day_name_de:v.value.find(t=>t.id===e.toDayId)?.name_de,day_name_en:v.value.find(t=>t.id===e.toDayId)?.name_en};t[o]=a,l.value.push(JSON.stringify(b.value)),I(t),console.log("âœ… [DragDrop] Assignment moved successfully:",{assignmentId:e.assignment.id,from:`${e.fromDayId}-${e.fromPeriodId}`,to:`${e.toDayId}-${e.toPeriodId}`})}else console.warn("âš ï¸ [DragDrop] Could not find assignment to move:",e.assignment.id)}else I(e)},undo:function(){if(0===Kt(l.value))return;const e=l.value.pop();I(JSON.parse(e))},saveDraft:D,handleAssignmentDetails:function(e){o("trigger-event",{name:"assignmentDetails",event:{assignment:e}})},handleToggleNonInstructional:function(e){o("trigger-event",{name:"toggleNonInstructional",event:{showNonInstructional:e}})},handleToggleLessonSchedules:function(e){o("trigger-event",{name:"toggleLessonSchedules",event:{showLessonSchedules:e}})},handleModeChanged:function(e){o("trigger-event",{name:"modeChanged",event:{mode:e}})},handlePeriodFocusChanged:function(e){o("trigger-event",{name:"periodFocusChanged",event:{focusedPeriodId:e}})},handleFilterYear:function(e){o("trigger-event",{name:"filterYear",event:{selectedYear:e}})},handleSchedulerDrop:function(e){const t={schoolId:e?.schoolId||null,draftId:e?.draftId||null,dayId:e?.dayId||0,periodId:e?.periodId||"",courseId:e?.courseId||"",courseName:e?.courseName||"",courseCode:e?.courseCode||"",teacherIds:Array.isArray(e?.teacherIds)?e.teacherIds:[],primaryTeacherId:e?.primaryTeacherId||null,roomId:e?.roomId||null,source:e?.source||"drag-drop",timestamp:e?.timestamp||(new Date).toISOString(),...void 0!==e?.fromDayId&&{fromDayId:e.fromDayId},...void 0!==e?.fromPeriodId&&{fromPeriodId:e.fromPeriodId},...void 0!==e?.action&&{action:e.action}};console.log("ðŸš€ [WeWeb Event] scheduler:drop - Emitting trigger-event with data:",t);try{o("trigger-event",{name:"scheduler:drop",event:t}),console.log("âœ… [WeWeb Event] scheduler:drop emitted successfully")}catch(e){console.error("âŒ [WeWeb Event] scheduler:drop emission failed:",e)}},handleSchedulerDragStart:function(e){const t={courseId:e?.courseId||"",courseName:e?.courseName||"",courseCode:e?.courseCode||"",source:e?.source||"drag-start",timestamp:e?.timestamp||(new Date).toISOString()};console.log("ðŸš€ [WeWeb Event] scheduler:drag-start - Emitting trigger-event with data:",t);try{o("trigger-event",{name:"scheduler:drag-start",event:t}),console.log("âœ… [WeWeb Event] scheduler:drag-start emitted successfully")}catch(e){console.error("âŒ [WeWeb Event] scheduler:drag-start emission failed:",e)}},handleSchedulerDragEnd:function(e){const t={courseId:e?.courseId||"",courseName:e?.courseName||"",courseCode:e?.courseCode||"",success:void 0!==e?.success&&e.success,source:e?.source||"drag-end",timestamp:e?.timestamp||(new Date).toISOString()};console.log("ðŸš€ [WeWeb Event] scheduler:drag-end - Emitting trigger-event with data:",t);try{o("trigger-event",{name:"scheduler:drag-end",event:t}),console.log("âœ… [WeWeb Event] scheduler:drag-end emitted successfully")}catch(e){console.error("âŒ [WeWeb Event] scheduler:drag-end emission failed:",e)}},testEventEmission:function(){console.log("ðŸ§ª [WeWeb Event Test] ================================="),console.log("ðŸ§ª [WeWeb Event Test] Manual scheduler:drop event test"),console.log("ðŸ§ª [WeWeb Event Test] =================================");const e={schoolId:content.value?.schoolId||null,draftId:content.value?.draftId||null,dayId:1,periodId:"test-period-id",courseId:"test-course-id",courseName:"Test Course",courseCode:"TEST101",source:"manual-test",timestamp:(new Date).toISOString()};console.log("ðŸ“‹ [WeWeb Event Test] Test event data:",e);try{console.log("ðŸš€ [WeWeb Event Test] Attempting to emit scheduler:drop..."),o("trigger-event",{name:"scheduler:drop",event:e}),console.log("âœ… [WeWeb Event Test] âœ… SUCCESS: scheduler:drop trigger-event emitted!"),console.log("ðŸ“Œ [WeWeb Event Test] Event data should be accessible directly in workflows")}catch(e){console.error("âŒ [WeWeb Event Test] scheduler:drop test failed:",e)}},navigateToConflict:function(e){d.value={dayId:e.day_id,periodId:e.period_id,period:f.value.find(t=>t.id===e.period_id),assignments:b.value.filter(t=>t.day_id===e.day_id&&t.period_id===e.period_id),conflicts:[e]},a.value=!0,r.value=!1},applySuggestion:function(e){o("trigger-event",{name:"applySuggestion",event:{suggestion:e}})},ignoreConflict:function(e){o("trigger-event",{name:"ignoreConflict",event:{conflictId:e.id}})},autoResolveConflicts:function(){o("trigger-event",{name:"autoResolveConflicts",event:{conflicts:S.value.filter(e=>e.auto_resolvable)}})},emitTestEvent:function(){try{o("element-event",{name:"scheduler:drop",event:"scheduler:drop",data:{message:"Test WeWeb element event from Course Scheduler!",timestamp:(new Date).toISOString(),testData:{periods:Kt(f.value),courses:Kt(m.value),teachers:Kt(p.value),classes:Kt(g.value),rooms:Kt(h.value),draftSchedules:Kt(b.value),conflicts:Kt(S.value),isReadOnly:k.value}}}),console.log("âœ… Test WeWeb element event emitted successfully!"),alert("Test WeWeb element event emitted successfully!")}catch(e){console.error("âŒ Failed to emit test WeWeb element event:",e),alert("Error emitting WeWeb element event: "+e.message)}},logCurrentData:function(){if(console.log("ðŸ› [wwElement] === COMPLETE DATA DUMP ==="),console.log("Raw content object:",t.content),console.log("School ID:",i.value),console.log("Draft ID:",c.value),console.log("Published By:",u.value),console.log("ðŸ“… PERIODS ANALYSIS:"),console.log("  Raw periods:",t.content.periods),console.log("  Processed periods:",f.value),Kt(f.value)>0){const e=f.value[0];console.log("  Sample period object keys:",Object.keys(e)),console.log("  Sample period values:",e)}if(console.log("ðŸ—“ï¸ SCHOOL DAYS ANALYSIS:"),console.log("  Raw schoolDays:",t.content.schoolDays),console.log("  Processed schoolDays:",v.value),Kt(v.value)>0){const e=v.value[0];console.log("  Sample day object keys:",Object.keys(e)),console.log("  Sample day values:",e)}console.log("Courses:",Kt(m.value),m.value.slice(0,2)),console.log("Teachers:",Kt(p.value),p.value.slice(0,2)),console.log("Classes:",Kt(g.value),g.value.slice(0,2)),console.log("Rooms:",Kt(h.value),h.value.slice(0,2)),console.log("Draft Schedules:",Kt(b.value),b.value.slice(0,2)),console.log("Live Schedules:",Kt(y.value),y.value.slice(0,2)),console.log("Is Read Only:",k.value),console.log("Can Undo:",C.value),console.log("All Conflicts:",Kt(S.value),S.value),console.log("ðŸ› [wwElement] === END COMPLETE DATA DUMP ===")},safeLength:Kt,safeArray:Qt}}};o(336);const ao=(0,mt.Z)(oo,[["render",function(t,o,y,x,k,C){const S=(0,e.resolveComponent)("SchedulerGrid"),E=(0,e.resolveComponent)("AssignmentModal"),_=(0,e.resolveComponent)("ConflictPanel");return(0,e.openBlock)(),(0,e.createElementBlock)("div",a,[(0,e.createCommentVNode)(" Header with Planning Mode Controls "),(0,e.createElementVNode)("div",r,[n,(0,e.createElementVNode)("div",s,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mode-indicator",{"read-only":x.isReadOnly}])},(0,e.toDisplayString)(x.isReadOnly?"Published Schedule (Read-Only) - Event Testing Available":"Planning Mode"),3),(0,e.createElementVNode)("div",l,[(0,e.createCommentVNode)(" Always show test button for WeWeb event testing "),(0,e.createElementVNode)("button",{onClick:o[0]||(o[0]=(...e)=>x.testEventEmission&&x.testEventEmission(...e)),class:"test-btn",style:{background:"#007bff",color:"white",border:"none",padding:"8px 12px","border-radius":"4px","margin-right":"8px"},title:"Test WeWeb events (always available)"}," ðŸ§ª Test Event "),(0,e.createCommentVNode)(" Only show editing controls when not read-only "),x.isReadOnly?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",d,[(0,e.createElementVNode)("button",{onClick:o[1]||(o[1]=(...e)=>x.undo&&x.undo(...e)),disabled:!x.canUndo,class:"undo-btn"},"â†¶ Undo",8,i),(0,e.createElementVNode)("button",{onClick:o[2]||(o[2]=e=>x.showConflicts=!x.showConflicts),class:(0,e.normalizeClass)(["conflicts-btn",{active:x.showConflicts}])}," âš ï¸ Conflicts ("+(0,e.toDisplayString)(x.safeLength(x.allConflicts))+") ",3)]))])])]),(0,e.createCommentVNode)(" Main Scheduler Grid "),(0,e.createElementVNode)("div",c,[(0,e.createVNode)(S,{periods:x.periods,"school-days":x.schoolDays,courses:x.courses,teachers:x.teachers,classes:x.classes,rooms:x.rooms,subjects:x.subjects,"draft-schedules":x.draftSchedules,"live-schedules":x.liveSchedules,conflicts:x.allConflicts,"can-undo":x.canUndo,"is-saving":x.isSaving,"is-read-only":x.isReadOnly,"show-statistics":!0,"school-id":y.content.schoolId,"draft-id":y.content.draftId,onCellClick:x.handleCellClick,onAssignmentDetails:x.handleAssignmentDetails,onToggleNonInstructional:x.handleToggleNonInstructional,onToggleLessonSchedules:x.handleToggleLessonSchedules,onModeChanged:x.handleModeChanged,onPeriodFocusChanged:x.handlePeriodFocusChanged,onFilterYear:x.handleFilterYear,onSchedulerDrop:x.handleSchedulerDrop,onSchedulerDragStart:x.handleSchedulerDragStart,onSchedulerDragEnd:x.handleSchedulerDragEnd,onUndoLast:x.undo,onSaveDraft:x.saveDraft,onUpdateAssignments:x.updateAssignments},null,8,["periods","school-days","courses","teachers","classes","rooms","subjects","draft-schedules","live-schedules","conflicts","can-undo","is-saving","is-read-only","school-id","draft-id","onCellClick","onAssignmentDetails","onToggleNonInstructional","onToggleLessonSchedules","onModeChanged","onPeriodFocusChanged","onFilterYear","onSchedulerDrop","onSchedulerDragStart","onSchedulerDragEnd","onUndoLast","onSaveDraft","onUpdateAssignments"])]),(0,e.createCommentVNode)(" Assignment Modal "),(0,e.createVNode)(E,{visible:x.showAssignmentModal,"day-id":x.selectedCell.dayId,"period-id":x.selectedCell.periodId,period:x.selectedCell.period,courses:x.availableCoursesForSlot,teachers:x.teachers,classes:x.classes,rooms:x.rooms,subjects:x.subjects,"school-days":x.schoolDays,"existing-assignments":x.selectedCell.assignments,conflicts:x.selectedCell.conflicts,"is-read-only":x.isReadOnly,"pre-selected-course":x.selectedCell.preSelectedCourse,onClose:x.closeAssignmentModal,onAddAssignment:x.addAssignment,onEditAssignment:x.editAssignment,onRemoveAssignment:x.removeAssignment},null,8,["visible","day-id","period-id","period","courses","teachers","classes","rooms","subjects","school-days","existing-assignments","conflicts","is-read-only","pre-selected-course","onClose","onAddAssignment","onEditAssignment","onRemoveAssignment"]),(0,e.createCommentVNode)(" Conflict Panel "),x.showConflicts&&x.safeLength(x.allConflicts)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",u,[(0,e.createVNode)(_,{visible:x.showConflicts,conflicts:x.allConflicts,courses:x.courses,teachers:x.teachers,classes:x.classes,rooms:x.rooms,periods:x.periods,"school-days":x.schoolDays,onClose:o[3]||(o[3]=e=>x.showConflicts=!1),onNavigateToConflict:x.navigateToConflict,onApplySuggestion:x.applySuggestion,onIgnoreConflict:x.ignoreConflict,onAutoResolveAll:x.autoResolveConflicts},null,8,["visible","conflicts","courses","teachers","classes","rooms","periods","school-days","onNavigateToConflict","onApplySuggestion","onIgnoreConflict","onAutoResolveAll"])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Hidden test section for development "),x.showTestData?((0,e.openBlock)(),(0,e.createElementBlock)("div",f,[(0,e.createElementVNode)("button",{onClick:o[4]||(o[4]=e=>x.showTestData=!1),class:"close-test"},"Ã—"),m,(0,e.createElementVNode)("div",p,[(0,e.createElementVNode)("div",null,[g,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.schoolId),1)]),(0,e.createElementVNode)("div",null,[h,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.draftId),1)]),(0,e.createElementVNode)("div",null,[v,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.publishedBy||"Not Published"),1)]),(0,e.createElementVNode)("div",null,[b,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.safeLength(x.periods))+" periods, "+(0,e.toDisplayString)(x.safeLength(x.courses))+" courses, "+(0,e.toDisplayString)(x.safeLength(x.teachers))+" teachers ",1)]),(0,e.createElementVNode)("button",{onClick:o[5]||(o[5]=(...e)=>x.emitTestEvent&&x.emitTestEvent(...e)),class:"test-button"},"Test Event Emission")])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Show test data toggle "),(0,e.createElementVNode)("button",{onClick:o[6]||(o[6]=e=>x.showTestData=!x.showTestData),class:"test-toggle",title:"Toggle test data"},"ðŸ§ª"),(0,e.createCommentVNode)(" Debug data button "),(0,e.createElementVNode)("button",{onClick:o[7]||(o[7]=(...e)=>x.logCurrentData&&x.logCurrentData(...e)),class:"debug-toggle",title:"Log current data to console"},"ðŸ›")])}],["__scopeId","data-v-f69e9c76"]]),ro="course-scheduler",no={options:{lazyHydrate:!0},editor:{label:{en:"Course Scheduler"},icon:"calendar",bubble:{icon:"calendar"}},properties:{schoolId:{label:{en:"School ID",fr:"ID Ã‰cole"},type:"Text",options:{placeholder:"Enter school UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the school for which the schedule is being created"}},draftId:{label:{en:"Draft ID",fr:"ID Brouillon"},type:"Text",options:{placeholder:"Enter draft UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the current draft being edited"}},publishedBy:{label:{en:"Published By",fr:"PubliÃ© par"},type:"Text",options:{placeholder:"Enter user UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the user publishing the schedule, or null if not published"}},periods:{label:{en:"Periods",fr:"PÃ©riodes"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of period objects with id, name, start_time, end_time properties"}},courses:{label:{en:"Courses",fr:"Cours"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of course objects with id, name, color properties"}},teachers:{label:{en:"Teachers",fr:"Enseignants"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of teacher objects with id, name, color properties"}},classes:{label:{en:"Classes",fr:"Classes"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of class objects with id, name, color properties"}},rooms:{label:{en:"Rooms",fr:"Salles"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of room objects with id, name properties"}},subjects:{label:{en:"Subjects",fr:"MatiÃ¨res"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of subject objects with id, name properties"}},schoolDays:{label:{en:"School Days",fr:"Jours scolaires"},type:"Array",bindable:!0,defaultValue:[{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"}],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of school day objects with id, name properties (1=Sunday to 7=Saturday)"}},draftSchedules:{label:{en:"Draft Schedules",fr:"Brouillons horaires"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of draft schedule entries with day_id, period_id/time, course_id, teacher_ids, etc."}},liveSchedules:{label:{en:"Live Schedules",fr:"Horaires publiÃ©s"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of published schedule entries for reference/conflict checking"}}},events:{"scheduler:drop":{label:{en:"On course dropped",fr:"Lors du dÃ©pÃ´t de cours"},tooltip:{en:"Triggered when a course is dropped onto the schedule grid",fr:"DÃ©clenchÃ© quand un cours est dÃ©posÃ© sur la grille horaire"}},"scheduler:drag-start":{label:{en:"On drag start",fr:"DÃ©but du glissement"},tooltip:{en:"Triggered when dragging a course begins",fr:"DÃ©clenchÃ© quand le glissement d'un cours commence"}},"scheduler:drag-end":{label:{en:"On drag end",fr:"Fin du glissement"},tooltip:{en:"Triggered when dragging ends (success or failure)",fr:"DÃ©clenchÃ© quand le glissement se termine (succÃ¨s ou Ã©chec)"}},"scheduler:remove":{label:{en:"On assignment removed",fr:"Assignation supprimÃ©e"},tooltip:{en:"Triggered when a course assignment is deleted",fr:"DÃ©clenchÃ© quand une assignation de cours est supprimÃ©e"}}},triggerEvents:[{name:"scheduler:drop",label:{en:"On Scheduler Drop"},event:{schoolId:null,draftId:null,dayId:0,periodId:"",courseId:"",courseName:"",courseCode:"",teacherIds:[],primaryTeacherId:null,roomId:null,source:"modal-assignment",timestamp:"",fromDayId:null,fromPeriodId:null,action:null}},{name:"scheduler:drag-start",label:{en:"On Drag Start"},event:{courseId:"",courseName:"",courseCode:"",source:"drag-start",timestamp:""}},{name:"scheduler:drag-end",label:{en:"On Drag End"},event:{courseId:"",courseName:"",courseCode:"",source:"drag-end",success:!1,timestamp:""}},{name:"scheduler:cell-click",label:{en:"On Cell Click"},event:{dayId:0,periodId:"",periodName:"",mode:"add",preSelectedCourse:null,timestamp:""}}]};function so(){return!!window.addWwComponent&&(window.addWwComponent({name:ro,version:"1.0.0",content:ao,type:"wwobject",wwDev:!1,port:void 0,config:no}),!0)}if(0!==ro.indexOf("__")&&(no.name=ro),no.wwDev=!1,no.port=void 0,!so()){const e=setInterval(function(){so()&&clearInterval(e)},10)}})()})();