(()=>{var e={10:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var o=t(698),n=t.n(o),r=t(58),s=t.n(r)()(n());s.push([e.id,".modal-overlay[data-v-25ebf1ad]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[data-v-25ebf1ad]{background:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);width:90%;max-width:500px;max-height:80vh;display:flex;flex-direction:column}.modal-header[data-v-25ebf1ad]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e8e8e8}.modal-header h3[data-v-25ebf1ad]{margin:0;font-size:18px;color:#333}.close-btn[data-v-25ebf1ad]{background:none;border:none;font-size:24px;color:#666;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[data-v-25ebf1ad]:hover{color:#333}.modal-body[data-v-25ebf1ad]{padding:20px;flex:1;overflow-y:auto}.search-box[data-v-25ebf1ad]{margin-bottom:16px}.search-input[data-v-25ebf1ad]{width:100%;padding:10px;border:1px solid #d9d9d9;border-radius:4px;font-size:14px}.search-input[data-v-25ebf1ad]:focus{outline:none;border-color:#1890ff;box-shadow:0 0 0 2px rgba(24,144,255,.2)}.course-list[data-v-25ebf1ad]{max-height:300px;overflow-y:auto}.course-item[data-v-25ebf1ad]{padding:12px;border:1px solid #e8e8e8;border-radius:4px;margin-bottom:8px;cursor:pointer;transition:background-color .2s}.course-item[data-v-25ebf1ad]:hover{background-color:#f5f5f5;border-color:#1890ff}.course-item[data-v-25ebf1ad]:last-child{margin-bottom:0}.course-info[data-v-25ebf1ad]{display:flex;flex-direction:column;gap:4px}.course-name[data-v-25ebf1ad]{font-weight:500;color:#333;font-size:14px}.course-details[data-v-25ebf1ad]{display:flex;gap:12px;font-size:12px;color:#666}.course-code[data-v-25ebf1ad]{font-family:monospace;background-color:#f0f0f0;padding:2px 6px;border-radius:3px}.course-subject[data-v-25ebf1ad]{color:#1890ff}.no-courses[data-v-25ebf1ad]{text-align:center;padding:40px 20px;color:#666}.no-courses p[data-v-25ebf1ad]{margin:0 0 8px 0}.help-text[data-v-25ebf1ad]{font-size:12px;color:#999}.modal-footer[data-v-25ebf1ad]{padding:16px 20px;border-top:1px solid #e8e8e8;display:flex;justify-content:flex-end}.cancel-btn[data-v-25ebf1ad]{padding:8px 16px;border:1px solid #d9d9d9;border-radius:4px;background:#fff;color:#666;cursor:pointer;font-size:14px}.cancel-btn[data-v-25ebf1ad]:hover{border-color:#1890ff;color:#1890ff}",""]);const l=s},953:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var o=t(698),n=t.n(o),r=t(58),s=t.n(r)()(n());s.push([e.id,".modal-backdrop[data-v-04fcf514]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:999}.inline-editor[data-v-04fcf514]{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:#fff;border:2px solid #007cba;border-radius:8px;padding:20px;box-shadow:0 8px 32px rgba(0,0,0,.3);z-index:1000;display:flex;flex-direction:column;gap:16px;font-size:14px;width:450px;max-width:90vw;max-height:90vh;box-sizing:border-box;overflow-y:auto}.editor-field[data-v-04fcf514]{display:flex;align-items:flex-start;gap:12px}.editor-field.teacher-selection[data-v-04fcf514]{flex-direction:column;align-items:stretch}.teacher-list-container[data-v-04fcf514]{flex:1;display:flex;flex-direction:column;gap:8px}.teacher-search[data-v-04fcf514]{margin-bottom:4px}.search-input[data-v-04fcf514]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:13px;background:#fff}.teacher-list[data-v-04fcf514]{max-height:120px;overflow-y:auto;border:1px solid #ddd;border-radius:4px;background:#fff}.teacher-item[data-v-04fcf514]{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;cursor:pointer;border-bottom:1px solid #f0f0f0;font-size:13px;transition:background-color .2s}.teacher-item[data-v-04fcf514]:hover{background:#f0f7ff}.teacher-item.selected[data-v-04fcf514]{background:rgba(0,124,186,.1);border-left:3px solid #007cba}.teacher-item.primary[data-v-04fcf514]{background:rgba(0,124,186,.2);font-weight:bold}.teacher-info[data-v-04fcf514]{flex:1}.teacher-name[data-v-04fcf514]{font-size:13px}.teacher-controls[data-v-04fcf514]{display:flex;gap:4px}.primary-btn[data-v-04fcf514]{background:none;border:none;cursor:pointer;font-size:14px;color:#999;padding:4px 6px;border-radius:3px;transition:color .2s}.primary-btn[data-v-04fcf514]:hover{color:#007cba}.primary-btn.active[data-v-04fcf514]{color:#ffb400}.editor-field.info-field[data-v-04fcf514]{background:rgba(0,124,186,.1);padding:12px;border-radius:6px;border:1px solid rgba(0,124,186,.2)}.course-info[data-v-04fcf514]{font-weight:bold;color:#007cba;flex:1;font-size:14px}.editor-field label[data-v-04fcf514]{font-weight:bold;min-width:60px;font-size:14px}.editor-select[data-v-04fcf514]{flex:1;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:13px;background:#fff}.editor-actions[data-v-04fcf514]{display:flex;gap:12px;margin-top:8px;justify-content:space-between}.save-btn[data-v-04fcf514],.cancel-btn[data-v-04fcf514],.delete-btn[data-v-04fcf514],.edit-course-btn[data-v-04fcf514]{padding:8px 16px;border:none;border-radius:4px;font-size:13px;cursor:pointer;font-weight:bold;transition:all .2s}.save-btn[data-v-04fcf514]{background:#4caf50;color:#fff}.save-btn[data-v-04fcf514]:hover{background:#45a049}.save-btn[data-v-04fcf514]:disabled{background:#ccc;cursor:not-allowed}.cancel-btn[data-v-04fcf514]{background:#f44336;color:#fff}.cancel-btn[data-v-04fcf514]:hover{background:#da190b}.delete-btn[data-v-04fcf514]{background:#ff9800;color:#fff}.delete-btn[data-v-04fcf514]:hover{background:#f57c00}.edit-course-btn[data-v-04fcf514]{background:#2196f3;color:#fff}.edit-course-btn[data-v-04fcf514]:hover{background:#1976d2}",""]);const l=s},97:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var o=t(698),n=t.n(o),r=t(58),s=t.n(r)()(n());s.push([e.id,'.scheduler-grid[data-v-28a7eaa1]{display:flex;flex-direction:column;width:100%;border:1px solid #ddd;border-radius:6px;overflow:hidden;background:#fff}.main-grid-container.emergency-mode[data-v-28a7eaa1]{border:3px solid #e74c3c;box-shadow:0 0 10px rgba(231,76,60,.3)}.main-grid-container.normal-mode[data-v-28a7eaa1]{border:2px solid #27ae60;box-shadow:0 0 5px rgba(39,174,96,.2)}.emergency-recovery-notice[data-v-28a7eaa1]{background:#ffe6e6;border:2px solid #e74c3c;padding:12px;margin:8px;border-radius:4px;text-align:center}.emergency-message[data-v-28a7eaa1]{color:#c0392b;font-weight:bold}.emergency-recover-btn[data-v-28a7eaa1]{background:#e74c3c;color:#fff;border:none;padding:6px 12px;border-radius:4px;margin-left:10px;cursor:pointer;font-size:.9em}.emergency-recover-btn[data-v-28a7eaa1]:hover{background:#c0392b}.scheduler-toolbar[data-v-28a7eaa1]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f8f9fa;border-bottom:1px solid #ddd;gap:16px;flex-wrap:wrap}.toolbar-section[data-v-28a7eaa1]{display:flex;align-items:center;gap:8px;position:relative}.search-input[data-v-28a7eaa1]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px;transition:border-color .2s ease}.search-input[data-v-28a7eaa1]:focus{outline:none;border-color:#007cba;box-shadow:0 0 0 2px rgba(0,123,186,.2)}.clear-search-btn[data-v-28a7eaa1]{background:#6c757d;color:#fff;border:none;border-radius:50%;width:20px;height:20px;font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:-30px;z-index:2}.clear-search-btn[data-v-28a7eaa1]:hover{background:#5a6268}.filter-status[data-v-28a7eaa1]{margin-left:8px;padding:4px 8px;background:rgba(0,123,186,.1);border:1px solid rgba(0,123,186,.3);border-radius:4px}.filter-tag[data-v-28a7eaa1]{display:inline-block;background:#007cba;color:#fff;padding:2px 6px;margin:0 2px;border-radius:3px;font-size:11px}.filter-label[data-v-28a7eaa1]{display:flex;align-items:center;gap:6px;font-size:.9em;cursor:pointer}.toolbar-actions[data-v-28a7eaa1]{display:flex;gap:8px}.undo-button[data-v-28a7eaa1],.save-button[data-v-28a7eaa1]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:.9em;transition:all .2s}.undo-button[data-v-28a7eaa1]:disabled{opacity:.5;cursor:not-allowed}.save-button[data-v-28a7eaa1]{background:#007cba;color:#fff;border-color:#007cba}.save-button.saving[data-v-28a7eaa1]{opacity:.7}.grid-header[data-v-28a7eaa1]{display:flex;background:#f5f5f5;border-bottom:1px solid #ddd;font-weight:600}.period-header-cell[data-v-28a7eaa1]{width:140px;padding:12px 8px;border-right:1px solid #ddd;display:flex;align-items:center;justify-content:center}.day-header-cell[data-v-28a7eaa1]{flex:1;padding:12px 8px;border-right:1px solid #ddd;text-align:center;display:flex;flex-direction:column;gap:2px}.day-name[data-v-28a7eaa1]{font-size:.95em}.day-date[data-v-28a7eaa1]{font-size:.8em;color:#666;font-weight:normal}.grid-body[data-v-28a7eaa1]{display:flex;flex-direction:column}.grid-row[data-v-28a7eaa1]{display:flex;border-bottom:1px solid #ddd;min-height:80px}.grid-row.non-instructional[data-v-28a7eaa1]{background:#f8f9fa}.period-label-cell[data-v-28a7eaa1]{width:140px;padding:8px;border-right:1px solid #ddd;background:#f9f9f9;display:flex;align-items:center}.period-info[data-v-28a7eaa1]{display:flex;flex-direction:column;gap:2px}.period-name[data-v-28a7eaa1]{font-weight:500;font-size:.9em}.period-time[data-v-28a7eaa1]{font-size:.8em;color:#666}.non-instructional-badge[data-v-28a7eaa1]{font-size:.75em;color:#888;background:#e9ecef;padding:2px 4px;border-radius:3px}.schedule-cell[data-v-28a7eaa1]{flex:1;border-right:1px solid #ddd;position:relative;cursor:pointer;transition:background-color .2s;min-height:80px}.schedule-cell[data-v-28a7eaa1]:hover{background:#f0f7ff}.schedule-cell.has-assignments[data-v-28a7eaa1]{background:#e6f7ff}.schedule-cell.multiple-assignments[data-v-28a7eaa1]{background:#d6f3ff}.schedule-cell.has-conflicts[data-v-28a7eaa1]{background:#fff2f0;border-left:3px solid #ff4d4f}.assignments-container[data-v-28a7eaa1]{padding:4px;height:100%;display:flex;flex-direction:column;gap:2px;position:relative}.assignment-item[data-v-28a7eaa1]{padding:4px 6px;border-radius:3px;border:1px solid #e0e0e0;position:relative;cursor:pointer;transition:all .2s}.assignment-item[data-v-28a7eaa1]:hover{transform:translateX(1px);box-shadow:0 1px 3px rgba(0,0,0,.1)}.assignment-item.has-conflict[data-v-28a7eaa1]{border-color:#ff4d4f;background:#fff2f0}.assignment-item.has-deleted-entities[data-v-28a7eaa1]{border-color:#faad14;background:#fff7e6}.assignment-item.lesson-schedule[data-v-28a7eaa1]{opacity:.6;border-style:dashed;background:#f5f5f5 !important;font-style:italic;font-size:.8em;transform:scale(0.95);margin:1px}.assignment-content[data-v-28a7eaa1]{display:flex;flex-direction:column;gap:1px}.course-name[data-v-28a7eaa1]{font-weight:500;font-size:.85em;line-height:1.2}.class-name[data-v-28a7eaa1],.teacher-names[data-v-28a7eaa1],.room-name[data-v-28a7eaa1]{font-size:.75em;color:#666;line-height:1.1}.conflict-indicator[data-v-28a7eaa1],.deleted-warning[data-v-28a7eaa1]{position:absolute;top:2px;right:2px;font-size:.7em}.add-more-button[data-v-28a7eaa1]{margin-top:2px;padding:2px 4px;background:#f0f0f0;border:1px dashed #ccc;border-radius:2px;cursor:pointer;font-size:.8em;align-self:stretch}.add-more-button[data-v-28a7eaa1]:hover{background:#e0e0e0}.empty-cell[data-v-28a7eaa1]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#ccc;font-size:.85em;gap:4px}.add-icon[data-v-28a7eaa1]{font-size:20px;opacity:.6}.add-text[data-v-28a7eaa1]{opacity:.8}.available-courses-panel[data-v-28a7eaa1]{padding:16px;background:#f0f8ff;border-top:1px solid #007cba;border-bottom:1px solid #ddd}.available-courses-panel h3[data-v-28a7eaa1]{margin:0 0 8px 0;color:#007cba;font-size:1.1em}.focused-period-info[data-v-28a7eaa1]{margin:0 0 16px 0;color:#666;font-size:.9em}.day-courses-grid[data-v-28a7eaa1]{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px}.day-courses-column h4[data-v-28a7eaa1]{margin:0 0 12px 0;padding:8px 12px;background:#007cba;color:#fff;border-radius:4px;text-align:center;font-size:.9em}.available-courses-list[data-v-28a7eaa1]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto}.course-card[data-v-28a7eaa1]{padding:10px;background:#fff;border:1px solid #ddd;border-radius:4px;cursor:pointer;transition:all .2s;font-size:.85em}.course-card[data-v-28a7eaa1]:hover{transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,124,186,.15);border-color:#007cba}.course-card .course-name[data-v-28a7eaa1]{font-weight:500;color:#333;margin-bottom:4px;display:block}.course-card .course-details[data-v-28a7eaa1]{display:flex;flex-direction:column;gap:2px}.course-card .course-details small[data-v-28a7eaa1]{color:#666;font-size:.8em}.no-courses[data-v-28a7eaa1]{padding:16px;text-align:center;color:#999;font-style:italic;background:#f9f9f9;border:1px dashed #ddd;border-radius:4px}.no-preferred-days-panel[data-v-28a7eaa1]{padding:16px;background:#f0f8e6;border:1px solid #52c41a;border-radius:4px;margin-top:16px}.no-preferred-days-panel h4[data-v-28a7eaa1]{margin:0 0 8px 0;color:#52c41a;font-size:1em;display:flex;align-items:center;gap:8px}.panel-description[data-v-28a7eaa1]{margin:0 0 12px 0;color:#666;font-size:.9em;font-style:italic}.no-preferred-courses-list[data-v-28a7eaa1]{display:grid;grid-template-columns:repeat(auto-fill, minmax(250px, 1fr));gap:12px}.flexible-tag[data-v-28a7eaa1]{color:#52c41a !important;font-weight:500}@media(max-width: 768px){.period-header-cell[data-v-28a7eaa1],.period-label-cell[data-v-28a7eaa1]{width:100px;font-size:.8em}.day-header-cell[data-v-28a7eaa1]{font-size:.8em}.scheduler-toolbar[data-v-28a7eaa1]{flex-direction:column;align-items:stretch;gap:8px}.stats-grid[data-v-28a7eaa1]{grid-template-columns:1fr}}.schedule-cell[data-v-28a7eaa1]:focus{outline:2px solid #007cba;outline-offset:-2px}.debug-message-panel[data-v-28a7eaa1]{padding:20px;background:#fff3cd;border:1px solid #ffeaa7;border-radius:4px;margin:16px}.debug-message-panel h3[data-v-28a7eaa1]{margin:0 0 12px 0;color:#856404}.debug-warning[data-v-28a7eaa1]{margin-bottom:16px;padding:12px;background:#fff;border-left:4px solid #ffc107;border-radius:4px}.debug-warning strong[data-v-28a7eaa1]{display:block;margin-bottom:8px;color:#856404}.debug-warning ul[data-v-28a7eaa1]{margin:8px 0 0 16px;color:#6c757d;font-family:monospace;font-size:.9em}.debug-warning li[data-v-28a7eaa1]{margin-bottom:4px;word-break:break-all}.debug-info[data-v-28a7eaa1]{font-size:.7em;color:#888;margin-top:2px;padding:2px;background:rgba(0,0,0,.05);border-radius:2px}.scheduler-grid[data-readonly=true] .schedule-cell[data-v-28a7eaa1]{cursor:default}.scheduler-grid[data-readonly=true] .schedule-cell[data-v-28a7eaa1]:hover{background:inherit}.filter-label[data-v-28a7eaa1]{display:flex;align-items:center;gap:6px;font-size:.9em;margin-right:16px}.mode-switcher[data-v-28a7eaa1]{display:flex;align-items:center;gap:8px;font-size:.9em}.mode-toggle[data-v-28a7eaa1]{width:40px;height:20px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#ccc;border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s}.mode-toggle[data-v-28a7eaa1]:checked{background:#007cba}.mode-toggle[data-v-28a7eaa1]::before{content:"";position:absolute;top:2px;left:2px;width:16px;height:16px;background:#fff;border-radius:50%;transition:left .3s}.mode-toggle[data-v-28a7eaa1]:checked::before{left:22px}.focus-button[data-v-28a7eaa1]{padding:6px 12px;border:1px solid #007cba;border-radius:4px;background:#fff;color:#007cba;cursor:pointer;font-size:.9em;transition:all .2s}.focus-button[data-v-28a7eaa1]:hover{background:#007cba;color:#fff}.focus-button.active[data-v-28a7eaa1]{background:#007cba;color:#fff}.focus-hint[data-v-28a7eaa1]{font-size:.85em;color:#666;font-style:italic}.period-label-cell.focused[data-v-28a7eaa1]{background:#e6f7ff !important;border-left:4px solid #007cba}.period-label-cell[data-v-28a7eaa1]{cursor:pointer;transition:background-color .2s}.period-label-cell[data-v-28a7eaa1]:hover{background:#f0f7ff !important}.debug-grid-info[data-v-28a7eaa1]{padding:8px 16px;background:#e8f5e8;border:1px solid #4caf50;border-radius:4px;margin-bottom:8px;font-family:monospace}.grid-hidden-debug[data-v-28a7eaa1]{padding:20px;background:#ffebee;border:2px solid #f44336;border-radius:8px;margin:16px;text-align:center}.grid-hidden-message[data-v-28a7eaa1]{color:#c62828;font-weight:bold;font-size:1.1em}.grid-hidden-message ul[data-v-28a7eaa1]{text-align:left;display:inline-block;margin:12px 0;color:#666;font-weight:normal;font-size:.9em;font-family:monospace}.grid-hidden-message li[data-v-28a7eaa1]{margin-bottom:6px}.emergency-show-btn[data-v-28a7eaa1]{padding:12px 24px;background:#f44336;color:#fff;border:none;border-radius:6px;font-size:1em;font-weight:bold;cursor:pointer;margin-top:16px;transition:all .2s}.emergency-show-btn[data-v-28a7eaa1]:hover{background:#d32f2f;transform:scale(1.05)}.main-grid-container[data-v-28a7eaa1]{border:2px solid #4caf50;border-radius:6px;padding:4px}.draggable-course[data-v-28a7eaa1]{cursor:grab;transition:all .2s ease;border:1px solid rgba(0,123,186,.3)}.draggable-course[data-v-28a7eaa1]:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.15);border-color:#007cba}.draggable-course[data-v-28a7eaa1]:active{cursor:grabbing}.draggable-assignment[data-v-28a7eaa1]{cursor:grab;transition:all .2s ease}.draggable-assignment[data-v-28a7eaa1]:hover{transform:scale(1.02);box-shadow:0 2px 6px rgba(0,0,0,.1)}.draggable-assignment[data-v-28a7eaa1]:active{cursor:grabbing}.drop-zone[data-v-28a7eaa1]{position:relative;transition:all .2s ease}.drop-zone.drag-over[data-v-28a7eaa1]{background:rgba(0,123,186,.1) !important;border:2px dashed #007cba !important;transform:scale(1.02)}.drop-zone.drag-over[data-v-28a7eaa1]::after{content:"📋 Drop here";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background:rgba(0,123,186,.9);color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold;pointer-events:none;z-index:10}.assignment-item.dragging[data-v-28a7eaa1]{opacity:.5;transform:rotate(5deg)}.course-card.dragging[data-v-28a7eaa1]{opacity:.5;transform:rotate(-3deg) scale(1.05)}.scheduler-grid:has(.dragging) .drop-zone[data-v-28a7eaa1]:not(.drag-over){background:rgba(255,255,255,.8);border:1px dashed #ddd}.scheduler-grid:has(.dragging) .assignment-item[data-v-28a7eaa1]:not(.dragging){opacity:.7}.assignment-content[data-v-28a7eaa1]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;gap:2px}.quick-edit-btn[data-v-28a7eaa1]{position:absolute;top:2px;right:2px;background:rgba(0,123,186,.8);color:#fff;border:none;border-radius:50%;width:16px;height:16px;font-size:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .2s ease;z-index:2}.assignment-item:hover .quick-edit-btn[data-v-28a7eaa1]{opacity:1}.quick-edit-btn[data-v-28a7eaa1]:hover{background:#007cba;transform:scale(1.1)}.statistics-row[data-v-28a7eaa1]{display:flex;border-bottom:2px solid #007cba;background:#f0f8ff;border-top:2px solid #007cba}.stats-label-cell[data-v-28a7eaa1]{background:#007cba !important;color:#fff;display:flex;align-items:center;justify-content:center}.stats-title[data-v-28a7eaa1]{display:flex;align-items:center;gap:6px;font-size:.85em;font-weight:600}.stats-emoji[data-v-28a7eaa1]{font-size:1.1em}.day-statistics-cell[data-v-28a7eaa1]{flex:1;border-right:1px solid #ddd;padding:8px;background:#fff;display:flex;flex-direction:column;gap:4px;min-height:100px}.stats-headers[data-v-28a7eaa1]{display:flex;justify-content:space-between;align-items:center;gap:2px;margin-bottom:4px;padding:2px;background:rgba(0,124,186,.1);border-radius:3px}.stat-header[data-v-28a7eaa1]{font-size:.9em;text-align:center;cursor:help;padding:2px 4px;border-radius:2px;flex:1}.stat-header[data-v-28a7eaa1]:hover{background:rgba(0,124,186,.2)}.stats-rows[data-v-28a7eaa1]{display:flex;flex-direction:column;gap:2px;flex-grow:1}.grade-stats-row[data-v-28a7eaa1]{display:flex;align-items:center;justify-content:space-between;gap:4px;background:#f8f9fa;border:1px solid #e0e0e0;border-radius:2px;padding:2px 4px;font-size:.75em}.grade-number[data-v-28a7eaa1]{font-weight:600;color:#333;min-width:20px;font-size:.8em}.stat-value[data-v-28a7eaa1]{text-align:center;padding:1px 2px;background:#fff;border-radius:2px;font-size:.7em;color:#666;min-width:18px;flex:1}.no-stats[data-v-28a7eaa1]{display:flex;align-items:center;justify-content:center;flex-grow:1;color:#999}.no-stats-text[data-v-28a7eaa1]{font-size:.7em;font-style:italic;text-align:center}.assignment-item.editing[data-v-28a7eaa1]{z-index:100;position:relative}.assignment-item.editing .assignment-content[data-v-28a7eaa1]{display:none}.context-menu[data-v-28a7eaa1]{position:fixed;background:#fff;border:1px solid #ccc;border-radius:4px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:2000;min-width:150px;padding:4px 0}.context-menu-item[data-v-28a7eaa1]{padding:8px 12px;cursor:pointer;font-size:13px;display:flex;align-items:center;gap:8px;transition:background-color .2s}.context-menu-item[data-v-28a7eaa1]:hover{background-color:#f5f5f5}.context-menu-item.delete[data-v-28a7eaa1]:hover{background-color:#ffe6e6;color:#d32f2f}.context-menu-backdrop[data-v-28a7eaa1]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1999}',""]);const l=s},898:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var o=t(698),n=t.n(o),r=t(58),s=t.n(r)()(n());s.push([e.id,".modal-overlay[data-v-717d15e0]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[data-v-717d15e0]{background:#fff;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.3);width:90vw;max-width:600px;max-height:80vh;display:flex;flex-direction:column}.modal-header[data-v-717d15e0]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #e0e0e0}.modal-header h3[data-v-717d15e0]{margin:0;color:#333;font-size:18px}.close-btn[data-v-717d15e0]{background:none;border:none;font-size:24px;cursor:pointer;color:#666;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.close-btn[data-v-717d15e0]:hover{color:#333}.modal-body[data-v-717d15e0]{padding:20px;overflow-y:auto;flex:1}.selection-section[data-v-717d15e0]{margin-bottom:24px}.section-label[data-v-717d15e0]{display:block;font-weight:bold;margin-bottom:8px;color:#333}.search-box[data-v-717d15e0]{margin-bottom:12px}.search-input[data-v-717d15e0]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.search-input[data-v-717d15e0]:focus{outline:none;border-color:#007cba;box-shadow:0 0 0 2px rgba(0,124,186,.2)}.teacher-list[data-v-717d15e0],.room-list[data-v-717d15e0]{max-height:200px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px}.teacher-item[data-v-717d15e0],.room-item[data-v-717d15e0]{padding:12px;border-bottom:1px solid #f0f0f0;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background-color .2s}.teacher-item[data-v-717d15e0]:last-child,.room-item[data-v-717d15e0]:last-child{border-bottom:none}.teacher-item[data-v-717d15e0]:hover,.room-item[data-v-717d15e0]:hover{background-color:#f8f9fa}.teacher-item.selected[data-v-717d15e0],.room-item.selected[data-v-717d15e0]{background-color:#e3f2fd;border-left:3px solid #007cba}.teacher-item.primary[data-v-717d15e0]{background-color:#fff3e0;border-left:3px solid #ff9800}.teacher-info[data-v-717d15e0]{display:flex;flex-direction:column;flex:1}.teacher-name[data-v-717d15e0]{font-weight:500;color:#333}.teacher-email[data-v-717d15e0]{font-size:12px;color:#666;margin-top:2px}.teacher-controls[data-v-717d15e0]{display:flex;align-items:center}.primary-btn[data-v-717d15e0]{background:none;border:1px solid #ddd;border-radius:3px;padding:4px 8px;cursor:pointer;font-size:14px;color:#666;transition:all .2s}.primary-btn[data-v-717d15e0]:hover{background-color:#f0f0f0}.primary-btn.active[data-v-717d15e0]{background-color:#ff9800;border-color:#ff9800;color:#fff}.room-name[data-v-717d15e0]{font-weight:500;color:#333}.room-capacity[data-v-717d15e0]{font-size:12px;color:#666}.modal-footer[data-v-717d15e0]{display:flex;justify-content:flex-end;gap:12px;padding:16px 20px;border-top:1px solid #e0e0e0}.cancel-btn[data-v-717d15e0],.submit-btn[data-v-717d15e0]{padding:8px 16px;border-radius:4px;font-size:14px;cursor:pointer;border:1px solid;transition:all .2s}.cancel-btn[data-v-717d15e0]{background:#fff;border-color:#ddd;color:#666}.cancel-btn[data-v-717d15e0]:hover{background-color:#f8f9fa}.submit-btn[data-v-717d15e0]{background:#007cba;border-color:#007cba;color:#fff}.submit-btn[data-v-717d15e0]:hover:not(:disabled){background:#005a84;border-color:#005a84}.submit-btn[data-v-717d15e0]:disabled{background:#ccc;border-color:#ccc;cursor:not-allowed;opacity:.6}",""]);const l=s},580:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var o=t(698),n=t.n(o),r=t(58),s=t.n(r)()(n());s.push([e.id,'.course-scheduler-wrapper[data-v-5d6093bf]{width:100%;min-height:500px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;position:relative}.scheduler-header[data-v-5d6093bf]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;border-radius:6px 6px 0 0}.scheduler-header h2[data-v-5d6093bf]{margin:0;color:#333;font-size:1.3em}.scheduler-header .scheduler-controls[data-v-5d6093bf]{display:flex;align-items:center;gap:16px}.scheduler-header .mode-indicator[data-v-5d6093bf]{padding:6px 12px;border-radius:4px;font-size:.9em;font-weight:500;background:#e6f7ff;color:#1890ff}.scheduler-header .mode-indicator.read-only[data-v-5d6093bf]{background:#fff2f0;color:#ff4d4f}.scheduler-header .header-actions[data-v-5d6093bf]{display:flex;gap:8px;align-items:center}.scheduler-header .editing-controls[data-v-5d6093bf]{display:flex;gap:8px}.scheduler-header .undo-btn[data-v-5d6093bf],.scheduler-header .conflicts-btn[data-v-5d6093bf]{padding:6px 12px;border:1px solid #d9d9d9;border-radius:4px;background:#fff;cursor:pointer;font-size:.9em;transition:all .2s}.scheduler-header .undo-btn[data-v-5d6093bf]:disabled,.scheduler-header .conflicts-btn[data-v-5d6093bf]:disabled{opacity:.5;cursor:not-allowed}.scheduler-header .undo-btn[data-v-5d6093bf]:hover:not(:disabled),.scheduler-header .conflicts-btn[data-v-5d6093bf]:hover:not(:disabled){background:#f0f0f0;transform:translateY(-1px)}.scheduler-header .conflicts-btn.active[data-v-5d6093bf]{background:#ff4d4f;color:#fff;border-color:#ff4d4f}.scheduler-content[data-v-5d6093bf]{display:flex;gap:16px;position:relative}.conflicts-sidebar[data-v-5d6093bf]{width:400px;position:sticky;top:20px;height:fit-content}.test-data-section[data-v-5d6093bf]{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:#fff;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:2000;min-width:400px}.close-test[data-v-5d6093bf]{position:absolute;top:8px;right:12px;background:none;border:none;font-size:1.2em;cursor:pointer;color:#999}.test-info[data-v-5d6093bf]{margin-top:16px}.test-info>div[data-v-5d6093bf]{margin-bottom:8px;font-size:.9em}.test-button[data-v-5d6093bf]{margin-top:12px;padding:8px 16px;background:#007cba;color:#fff;border:none;border-radius:4px;cursor:pointer}.test-toggle[data-v-5d6093bf]{position:fixed;bottom:20px;right:20px;width:40px;height:40px;border:none;border-radius:50%;background:#007cba;color:#fff;font-size:1.2em;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:1000;transition:all .2s}.test-toggle[data-v-5d6093bf]:hover{transform:scale(1.1)}.debug-toggle[data-v-5d6093bf]{position:fixed;bottom:70px;right:20px;width:40px;height:40px;border:none;border-radius:50%;background:#ff6b6b;color:#fff;font-size:1.2em;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:1000;transition:all .2s}.debug-toggle[data-v-5d6093bf]:hover{transform:scale(1.1)}@media(max-width: 1200px){.conflicts-sidebar[data-v-5d6093bf]{width:350px}}@media(max-width: 900px){.scheduler-content[data-v-5d6093bf]{flex-direction:column}.conflicts-sidebar[data-v-5d6093bf]{width:100%;position:relative;top:auto}.scheduler-header[data-v-5d6093bf]{flex-direction:column;gap:12px;align-items:stretch}.scheduler-header .scheduler-controls[data-v-5d6093bf]{justify-content:space-between}.scheduler-header .header-actions[data-v-5d6093bf]{justify-content:center}}@media(max-width: 600px){.course-scheduler-wrapper[data-v-5d6093bf]{font-size:.9em}.test-data-section[data-v-5d6093bf]{width:90vw;min-width:unset}.test-toggle[data-v-5d6093bf]{bottom:10px;right:10px;width:35px;height:35px;font-size:1em}}@media(prefers-reduced-motion: reduce){[data-v-5d6093bf]{transition-duration:.01ms !important;animation-duration:.01ms !important}}@media(prefers-contrast: high){.scheduler-header[data-v-5d6093bf],.mode-indicator[data-v-5d6093bf],.undo-btn[data-v-5d6093bf],.conflicts-btn[data-v-5d6093bf]{border-width:2px}}@media print{.test-toggle[data-v-5d6093bf],.header-actions[data-v-5d6093bf],.conflicts-sidebar[data-v-5d6093bf]{display:none !important}.scheduler-header .mode-indicator.read-only[data-v-5d6093bf]::after{content:" (Read-Only)"}}',""]);const l=s},735:(e,a,t)=>{"use strict";function o(e,a){for(var t=[],o={},n=0;n<a.length;n++){var r=a[n],s=r[0],l={id:e+":"+n,css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(l):t.push(o[s]={id:s,parts:[l]})}return t}t.d(a,{Z:()=>f});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},s=n&&(document.head||document.getElementsByTagName("head")[0]),l=null,d=0,i=!1,c=function(){},u=null,m="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,a,t,n){i=t,u=n||{};var s=o(e,a);return g(s),function(a){for(var t=[],n=0;n<s.length;n++){var l=s[n];(d=r[l.id]).refs--,t.push(d)}for(a?g(s=o(e,a)):s=[],n=0;n<t.length;n++){var d;if(0===(d=t[n]).refs){for(var i=0;i<d.parts.length;i++)d.parts[i]();delete r[d.id]}}}}function g(e){for(var a=0;a<e.length;a++){var t=e[a],o=r[t.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](t.parts[n]);for(;n<t.parts.length;n++)o.parts.push(h(t.parts[n]));o.parts.length>t.parts.length&&(o.parts.length=t.parts.length)}else{var s=[];for(n=0;n<t.parts.length;n++)s.push(h(t.parts[n]));r[t.id]={id:t.id,refs:1,parts:s}}}}function v(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function h(e){var a,t,o=document.querySelector("style["+m+'~="'+e.id+'"]');if(o){if(i)return c;o.parentNode.removeChild(o)}if(p){var n=d++;o=l||(l=v()),a=x.bind(null,o,n,!1),t=x.bind(null,o,n,!0)}else o=v(),a=C.bind(null,o),t=function(){o.parentNode.removeChild(o)};return a(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;a(e=o)}else t()}}var b,y=(b=[],function(e,a){return b[e]=a,b.filter(Boolean).join("\n")});function x(e,a,t,o){var n=t?"":o.css;if(e.styleSheet)e.styleSheet.cssText=y(a,n);else{var r=document.createTextNode(n),s=e.childNodes;s[a]&&e.removeChild(s[a]),s.length?e.insertBefore(r,s[a]):e.appendChild(r)}}function C(e,a){var t=a.css,o=a.media,n=a.sourceMap;if(o&&e.setAttribute("media",o),u.ssrId&&e.setAttribute(m,a.id),n&&(t+="\n/*# sourceURL="+n.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},58:e=>{"use strict";e.exports=function(e){var a=[];return a.toString=function(){return this.map(function(a){var t="",o=void 0!==a[5];return a[4]&&(t+="@supports (".concat(a[4],") {")),a[2]&&(t+="@media ".concat(a[2]," {")),o&&(t+="@layer".concat(a[5].length>0?" ".concat(a[5]):""," {")),t+=e(a),o&&(t+="}"),a[2]&&(t+="}"),a[4]&&(t+="}"),t}).join("")},a.i=function(e,t,o,n,r){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var l=0;l<this.length;l++){var d=this[l][0];null!=d&&(s[d]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);o&&s[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),a.push(c))}},a}},698:e=>{"use strict";e.exports=function(e){return e[1]}},20:(e,a)=>{"use strict";a.Z=(e,a)=>{const t=e.__vccOpts||e;for(const[e,o]of a)t[e]=o;return t}},564:(e,a,t)=>{var o=t(10);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,t(735).Z)("9fbe0d72",o,!1,{})},136:(e,a,t)=>{var o=t(953);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,t(735).Z)("9c5933e8",o,!1,{})},626:(e,a,t)=>{var o=t(97);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,t(735).Z)("404e3d73",o,!1,{})},116:(e,a,t)=>{var o=t(898);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,t(735).Z)("651942ff",o,!1,{})},263:(e,a,t)=>{var o=t(580);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,t(735).Z)("4d0ee398",o,!1,{})}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var r=a[o]={id:o,exports:{}};return e[o](r,r.exports,t),r.exports}t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},t.d=(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=Vue,a=a=>((0,e.pushScopeId)("data-v-5d6093bf"),a=a(),(0,e.popScopeId)(),a),o={class:"course-scheduler-wrapper"},n={class:"scheduler-header"},r=a(()=>(0,e.createElementVNode)("h2",null,"Course Scheduler",-1)),s={class:"scheduler-controls"},l={class:"header-actions"},d={key:0,class:"editing-controls"},i=["disabled"],c={class:"scheduler-content"},u={key:0,class:"conflicts-sidebar"},m={key:1,class:"test-data-section"},p=a(()=>(0,e.createElementVNode)("h3",null,"Component Test Data",-1)),f={class:"test-info"},g=a(()=>(0,e.createElementVNode)("strong",null,"School ID:",-1)),v=a(()=>(0,e.createElementVNode)("strong",null,"Draft ID:",-1)),h=a(()=>(0,e.createElementVNode)("strong",null,"Published By:",-1)),b=a(()=>(0,e.createElementVNode)("strong",null,"Data Counts:",-1)),y=a=>((0,e.pushScopeId)("data-v-28a7eaa1"),a=a(),(0,e.popScopeId)(),a),x={class:"scheduler-grid",role:"grid","aria-label":"School schedule grid"},C={class:"scheduler-toolbar"},k={class:"toolbar-section"},S={class:"filter-label"},E={class:"filter-label"},I={class:"toolbar-section"},N=y(()=>(0,e.createElementVNode)("option",{value:""},"All Years",-1)),w=["value"],_={class:"toolbar-section"},D=y(()=>(0,e.createElementVNode)("option",{value:""},"All Classes",-1)),V=["value"],A={class:"toolbar-section"},T={key:1,class:"filter-status"},B={key:0,class:"filter-tag"},L={key:1,class:"filter-tag"},M={key:2,class:"filter-tag"},z={key:3,class:"filter-tag"},j={class:"toolbar-section"},O={key:1,class:"focus-hint"},P={class:"toolbar-actions"},$=["disabled"],R={key:0,class:"main-grid-container"},F={class:"grid-header",role:"row"},W={class:"period-header-cell",role:"columnheader"},U=y(()=>(0,e.createElementVNode)("span",{class:"period-label"},"Period",-1)),G={class:"debug-info"},q=["aria-colindex"],Y={class:"day-name"},Z={key:0,class:"day-date"},H={class:"debug-info"},J={class:"grid-body"},K=["aria-rowindex"],X=["onClick"],Q={class:"period-info"},ee={class:"period-name"},ae={class:"period-time"},te={key:0,class:"non-instructional-badge"},oe={class:"debug-info"},ne=["onClick","onKeydown","aria-label","onDragover","onDragenter","onDragleave","onDrop","data-day-id","data-period-id"],re={key:0,class:"assignments-container"},se=["onClick","onContextmenu","draggable","onDragstart","data-assignment-id","data-day-id","data-period-id"],le={key:0,class:"assignment-content"},de={class:"course-name"},ie={key:0,class:"class-name"},ce={key:1,class:"teacher-names"},ue={key:2,class:"room-name"},me={key:1,class:"conflict-indicator",title:"Has conflicts"},pe={key:2,class:"deleted-warning",title:"Missing data"},fe=["onClick"],ge=y(()=>(0,e.createElementVNode)("div",{class:"empty-cell"},[(0,e.createElementVNode)("span",{class:"add-icon"},"+"),(0,e.createElementVNode)("span",{class:"add-text"},"Add Course")],-1)),ve={key:0,class:"statistics-row"},he=y(()=>(0,e.createElementVNode)("div",{class:"period-label-cell stats-label-cell"},[(0,e.createElementVNode)("div",{class:"stats-title"},[(0,e.createElementVNode)("span",{class:"stats-emoji"},"📈"),(0,e.createElementVNode)("span",null,"Grade Stats")])],-1)),be=y(()=>(0,e.createElementVNode)("div",{class:"stats-headers"},[(0,e.createElementVNode)("div",{class:"stat-header",title:"📊 Total free spots available"},"📊"),(0,e.createElementVNode)("div",{class:"stat-header",title:"⚖️ Average spots available"},"⚖️"),(0,e.createElementVNode)("div",{class:"stat-header",title:"📚 Amount of courses available"},"📚")],-1)),ye={class:"stats-rows"},xe={class:"grade-number"},Ce={class:"stat-value"},ke={class:"stat-value"},Se={class:"stat-value"},Ee={key:0,class:"no-stats"},Ie=[y(()=>(0,e.createElementVNode)("span",{class:"no-stats-text"},"No courses scheduled",-1))],Ne={class:"grid-hidden-debug"},we={class:"grid-hidden-message"},_e={key:2,class:"available-courses-panel"},De=y(()=>(0,e.createElementVNode)("div",{class:"focused-period-info"},[(0,e.createElementVNode)("em",null,"Courses that can be scheduled during this period on each day")],-1)),Ve={class:"day-courses-grid"},Ae={class:"available-courses-list"},Te=["onClick","title","data-course-id","data-day-id","data-period-id","onDragstart"],Be={class:"course-name"},Le={class:"course-details"},Me={key:0},ze={key:1},je={key:2},Oe={key:0,class:"no-courses"},Pe={key:0,class:"no-preferred-days-panel"},$e=y(()=>(0,e.createElementVNode)("h4",null,"📅 Courses with No Preferred Days",-1)),Re=y(()=>(0,e.createElementVNode)("p",{class:"panel-description"}," These courses have no time slot restrictions and can be scheduled on any day: ",-1)),Fe={class:"no-preferred-courses-list"},We=["onClick","title"],Ue={class:"course-name"},Ge={class:"course-details"},qe={key:0},Ye={key:1},Ze={key:2},He=y(()=>(0,e.createElementVNode)("small",{class:"flexible-tag"},"📅 Flexible scheduling",-1)),Je=a=>((0,e.pushScopeId)("data-v-04fcf514"),a=a(),(0,e.popScopeId)(),a),Ke={class:"editor-field info-field"},Xe=Je(()=>(0,e.createElementVNode)("label",null,"Course:",-1)),Qe={class:"course-info"},ea={class:"editor-field teacher-selection"},aa=Je(()=>(0,e.createElementVNode)("label",null,"Teachers:",-1)),ta={class:"teacher-list-container"},oa={class:"teacher-search"},na={class:"teacher-list"},ra=["onClick"],sa={class:"teacher-info"},la={class:"teacher-name"},da={class:"teacher-controls"},ia=["onClick"],ca={class:"editor-field"},ua=Je(()=>(0,e.createElementVNode)("label",null,"Room:",-1)),ma=Je(()=>(0,e.createElementVNode)("option",{value:""},"Select Room",-1)),pa=["value"],fa={class:"editor-actions"},ga=["disabled"],va={name:"InlineAssignmentEditor",props:{assignment:{type:Object,required:!0},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]}},emits:["save","cancel","delete","edit-course"],setup(a,{emit:t}){const o=(0,e.ref)({...a.assignment}),n=(0,e.ref)(""),r=a.assignment.teacher_ids||a.assignment.staff_ids||[],s=(0,e.ref)([...r]),l=(0,e.ref)(a.assignment.primaryTeacherId||(r.length>0?r[0]:null)),d=(0,e.computed)(()=>{if(!n.value)return a.teachers;const e=n.value.toLowerCase();return a.teachers.filter(a=>(a.name||`${a.first_name} ${a.last_name}`).toLowerCase().includes(e))});(0,e.watch)(s,e=>{o.value.teacher_ids=[...e],o.value.staff_ids=[...e],l.value&&!e.includes(l.value)&&(l.value=null),1===e.length&&(l.value=e[0])},{deep:!0}),(0,e.watch)(l,e=>{o.value.primaryTeacherId=e});const i=(0,e.computed)(()=>!0);return{editableAssignment:o,teacherSearchTerm:n,selectedTeachers:s,primaryTeacherId:l,filteredTeachers:d,isValid:i,toggleTeacher:function(e){const a=s.value.indexOf(e);a>-1?s.value.splice(a,1):s.value.push(e)},setPrimaryTeacher:function(e){s.value.includes(e)&&(l.value=e)},saveChanges:function(){i.value&&(o.value.teacher_ids=[...s.value],o.value.staff_ids=[...s.value],o.value.primaryTeacherId=l.value,t("save",o.value))},cancelEdit:function(){t("cancel")},deleteAssignment:function(){confirm("Are you sure you want to delete this assignment?")&&t("delete",a.assignment)},editCourse:function(){t("edit-course",{courseId:a.assignment.course_id,courseName:a.assignment.course_name||a.assignment.display_cell||"",courseCode:a.assignment.course_code||"",source:"inline-editor"})}}}};t(136);var ha=t(20);const ba=(0,ha.Z)(va,[["render",function(a,t,o,n,r,s){return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,null,[(0,e.createCommentVNode)(" Modal Backdrop "),(0,e.createElementVNode)("div",{class:"modal-backdrop",onClick:t[0]||(t[0]=(...e)=>n.cancelEdit&&n.cancelEdit(...e))}),(0,e.createElementVNode)("div",{class:"inline-editor",onClick:t[7]||(t[7]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createCommentVNode)(" Assignment Info (Read-only) "),(0,e.createElementVNode)("div",Ke,[Xe,(0,e.createElementVNode)("span",Qe,(0,e.toDisplayString)(o.assignment.course_name||o.assignment.display_cell||"Unknown Course"),1)]),(0,e.createCommentVNode)(" Teacher Selection "),(0,e.createElementVNode)("div",ea,[aa,(0,e.createElementVNode)("div",ta,[(0,e.createElementVNode)("div",oa,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.teacherSearchTerm=e),type:"text",placeholder:"Search teachers...",class:"search-input"},null,512),[[e.vModelText,n.teacherSearchTerm]])]),(0,e.createElementVNode)("div",na,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.filteredTeachers,a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:(0,e.normalizeClass)(["teacher-item",{selected:n.selectedTeachers.includes(a.id),primary:n.primaryTeacherId===a.id}]),onClick:e=>n.toggleTeacher(a.id)},[(0,e.createElementVNode)("div",sa,[(0,e.createElementVNode)("span",la,(0,e.toDisplayString)(a.name||`${a.first_name} ${a.last_name}`),1)]),(0,e.createElementVNode)("div",da,[n.selectedTeachers.includes(a.id)?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:(0,e.withModifiers)(e=>n.setPrimaryTeacher(a.id),["stop"]),class:(0,e.normalizeClass)(["primary-btn",{active:n.primaryTeacherId===a.id}]),title:"Set as primary teacher"},(0,e.toDisplayString)(n.primaryTeacherId===a.id?"★":"☆"),11,ia)):(0,e.createCommentVNode)("v-if",!0)])],10,ra))),128))])])]),(0,e.createCommentVNode)(" Room Selection "),(0,e.createElementVNode)("div",ca,[ua,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.editableAssignment.room_id=e),class:"editor-select"},[ma,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(o.rooms,a=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:a.id,value:a.id},(0,e.toDisplayString)(a.name||a.room_name),9,pa))),128))],512),[[e.vModelSelect,n.editableAssignment.room_id]])]),(0,e.createCommentVNode)(" Action Buttons "),(0,e.createElementVNode)("div",fa,[(0,e.createElementVNode)("button",{onClick:t[3]||(t[3]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"save-btn",disabled:!n.isValid},"✅ Save",8,ga),(0,e.createElementVNode)("button",{onClick:t[4]||(t[4]=(...e)=>n.cancelEdit&&n.cancelEdit(...e)),class:"cancel-btn"},"❌ Cancel"),(0,e.createElementVNode)("button",{onClick:t[5]||(t[5]=(...e)=>n.deleteAssignment&&n.deleteAssignment(...e)),class:"delete-btn",title:"Delete assignment"},"🗑️ Delete"),(0,e.createElementVNode)("button",{onClick:t[6]||(t[6]=(...e)=>n.editCourse&&n.editCourse(...e)),class:"edit-course-btn",title:"Edit full course details"},"📝 Edit Course")])])],64)}],["__scopeId","data-v-04fcf514"]]),ya=a=>((0,e.pushScopeId)("data-v-717d15e0"),a=a(),(0,e.popScopeId)(),a),xa={class:"modal-header"},Ca={class:"modal-body"},ka={class:"selection-section"},Sa=ya(()=>(0,e.createElementVNode)("label",{class:"section-label"},"Teachers:",-1)),Ea={class:"search-box"},Ia={class:"teacher-list"},Na=["onClick"],wa={class:"teacher-info"},_a={class:"teacher-name"},Da={key:0,class:"teacher-email"},Va={class:"teacher-controls"},Aa=["onClick"],Ta={class:"selection-section"},Ba=ya(()=>(0,e.createElementVNode)("label",{class:"section-label"},"Room:",-1)),La={class:"search-box"},Ma={class:"room-list"},za=["onClick"],ja={class:"room-name"},Oa={key:0,class:"room-capacity"},Pa={class:"modal-footer"},$a=["disabled"],Ra={name:"TeacherRoomSelectionModal",props:{courseId:{type:String,required:!0},courseName:{type:String,required:!0},dayId:{type:[String,Number],required:!0},periodId:{type:String,required:!0},draftId:{type:String,default:null},schoolId:{type:String,default:null},teachers:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]}},emits:["submit","cancel"],setup(a,{emit:t}){const o=(0,e.ref)(""),n=(0,e.ref)(""),r=(0,e.ref)([]),s=(0,e.ref)(null),l=(0,e.ref)(null),d=(0,e.computed)(()=>{if(!o.value)return a.teachers;const e=o.value.toLowerCase();return a.teachers.filter(a=>{const t=a.name||`${a.first_name} ${a.last_name}`,o=a.email||"";return t.toLowerCase().includes(e)||o.toLowerCase().includes(e)})}),i=(0,e.computed)(()=>{if(!n.value)return a.rooms;const e=n.value.toLowerCase();return a.rooms.filter(a=>(a.name||a.room_name||"").toLowerCase().includes(e))}),c=(0,e.computed)(()=>r.value.length>0);return(0,e.watch)(r,e=>{s.value&&!e.includes(s.value)&&(s.value=null),1===e.length&&(s.value=e[0])}),{teacherSearchTerm:o,roomSearchTerm:n,selectedTeachers:r,primaryTeacherId:s,selectedRoomId:l,filteredTeachers:d,filteredRooms:i,isValid:c,toggleTeacher:function(e){const a=r.value.indexOf(e);a>-1?r.value.splice(a,1):r.value.push(e)},setPrimaryTeacher:function(e){r.value.includes(e)&&(s.value=e)},selectRoom:function(e){l.value=l.value===e?null:e},submitAssignment:function(){if(!c.value)return;const e={courseId:a.courseId,courseName:a.courseName,teacherIds:r.value,primaryTeacherId:s.value,roomId:l.value,periodId:a.periodId,draftId:a.draftId,dayId:a.dayId,schoolId:a.schoolId,source:"modal-assignment",timestamp:(new Date).toISOString()};t("submit",e)},cancelSelection:function(){t("cancel")}}}};t(116);const Fa=(0,ha.Z)(Ra,[["render",function(a,t,o,n,r,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"modal-overlay",onClick:t[6]||(t[6]=(...e)=>n.cancelSelection&&n.cancelSelection(...e))},[(0,e.createElementVNode)("div",{class:"modal-content",onClick:t[5]||(t[5]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createElementVNode)("div",xa,[(0,e.createElementVNode)("h3",null,"Assign "+(0,e.toDisplayString)(o.courseName)+" to Schedule",1),(0,e.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>n.cancelSelection&&n.cancelSelection(...e)),class:"close-btn"},"×")]),(0,e.createElementVNode)("div",Ca,[(0,e.createCommentVNode)(" Teacher Selection "),(0,e.createElementVNode)("div",ka,[Sa,(0,e.createElementVNode)("div",Ea,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.teacherSearchTerm=e),type:"text",placeholder:"Search teachers...",class:"search-input"},null,512),[[e.vModelText,n.teacherSearchTerm]])]),(0,e.createElementVNode)("div",Ia,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.filteredTeachers,a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:(0,e.normalizeClass)(["teacher-item",{selected:n.selectedTeachers.includes(a.id),primary:n.primaryTeacherId===a.id}]),onClick:e=>n.toggleTeacher(a.id)},[(0,e.createElementVNode)("div",wa,[(0,e.createElementVNode)("span",_a,(0,e.toDisplayString)(a.name||`${a.first_name} ${a.last_name}`),1),a.email?((0,e.openBlock)(),(0,e.createElementBlock)("span",Da,(0,e.toDisplayString)(a.email),1)):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createElementVNode)("div",Va,[n.selectedTeachers.includes(a.id)?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:(0,e.withModifiers)(e=>n.setPrimaryTeacher(a.id),["stop"]),class:(0,e.normalizeClass)(["primary-btn",{active:n.primaryTeacherId===a.id}]),title:"Set as primary teacher"},(0,e.toDisplayString)(n.primaryTeacherId===a.id?"★":"☆"),11,Aa)):(0,e.createCommentVNode)("v-if",!0)])],10,Na))),128))])]),(0,e.createCommentVNode)(" Room Selection "),(0,e.createElementVNode)("div",Ta,[Ba,(0,e.createElementVNode)("div",La,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.roomSearchTerm=e),type:"text",placeholder:"Search rooms...",class:"search-input"},null,512),[[e.vModelText,n.roomSearchTerm]])]),(0,e.createElementVNode)("div",Ma,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.filteredRooms,a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:(0,e.normalizeClass)(["room-item",{selected:n.selectedRoomId===a.id}]),onClick:e=>n.selectRoom(a.id)},[(0,e.createElementVNode)("span",ja,(0,e.toDisplayString)(a.name||a.room_name),1),a.capacity?((0,e.openBlock)(),(0,e.createElementBlock)("span",Oa,"Capacity: "+(0,e.toDisplayString)(a.capacity),1)):(0,e.createCommentVNode)("v-if",!0)],10,za))),128))])])]),(0,e.createElementVNode)("div",Pa,[(0,e.createElementVNode)("button",{onClick:t[3]||(t[3]=(...e)=>n.cancelSelection&&n.cancelSelection(...e)),class:"cancel-btn"},"Cancel"),(0,e.createElementVNode)("button",{onClick:t[4]||(t[4]=(...e)=>n.submitAssignment&&n.submitAssignment(...e)),class:"submit-btn",disabled:!n.isValid},"Assign Course",8,$a)])])])}],["__scopeId","data-v-717d15e0"]]),Wa=a=>((0,e.pushScopeId)("data-v-25ebf1ad"),a=a(),(0,e.popScopeId)(),a),Ua={class:"modal-header"},Ga={class:"modal-body"},qa={class:"search-box"},Ya={class:"course-list"},Za=["onClick"],Ha={class:"course-info"},Ja={class:"course-name"},Ka={class:"course-details"},Xa={key:0,class:"course-code"},Qa={key:1,class:"course-subject"},et={key:0,class:"no-courses"},at=[Wa(()=>(0,e.createElementVNode)("p",null,"No courses available for this time slot.",-1)),Wa(()=>(0,e.createElementVNode)("p",{class:"help-text"},"Try adjusting the filters or check the course scheduling constraints.",-1))],tt={class:"modal-footer"},ot={name:"CourseSelectionModal",props:{dayId:{type:Number,required:!0},dayName:{type:String,required:!0},periodId:{type:String,required:!0},periodName:{type:String,required:!0},availableCourses:{type:Array,default:()=>[]}},emits:["submit","cancel"],setup(a,{emit:t}){const o=(0,e.ref)(""),n=(0,e.computed)(()=>{if(!o.value)return a.availableCourses;const e=o.value.toLowerCase();return a.availableCourses.filter(a=>a.name&&a.name.toLowerCase().includes(e)||a.course_name&&a.course_name.toLowerCase().includes(e)||a.title&&a.title.toLowerCase().includes(e)||a.course_code&&a.course_code.toLowerCase().includes(e)||a.subject_name&&a.subject_name.toLowerCase().includes(e)||a.description&&a.description.toLowerCase().includes(e))});return(0,e.onMounted)(()=>{setTimeout(()=>{const e=document.querySelector(".search-input");e&&e.focus()},100)}),{courseSearchTerm:o,filteredCourses:n,selectCourse:function(e){t("submit",{courseId:e.id,courseName:e.name||e.course_name||e.title,courseCode:e.course_code,dayId:a.dayId,periodId:a.periodId})},cancelSelection:function(){t("cancel")}}}};function nt(e,a){return function(e,a,t){try{if(console.log(`🚀 [WeWeb Event] Attempting to emit trigger-event: ${a}`),"function"==typeof e){console.log(`📡 [WeWeb Event] Using parent emit function for: ${a}`);try{return e("trigger-event",{name:a,event:t}),console.log(`✅ [WeWeb Event] ${a} emitted successfully via parent emit`),!0}catch(e){return console.error(`❌ [WeWeb Event] ${a} failed via parent emit:`,e),!1}}if(e&&"function"==typeof e.$emit){console.log(`📡 [WeWeb Event] Fallback: Using Vue 2 $emit for: ${a}`);try{return e.$emit("trigger-event",{name:a,event:t}),console.log(`✅ [WeWeb Event] ${a} emitted successfully via $emit`),!0}catch(e){return console.error(`❌ [WeWeb Event] ${a} failed via $emit:`,e),!1}}return console.error(`❌ [WeWeb Event] No valid emit function found for: ${a}`),!1}catch(e){return console.error(`❌ [WeWeb Event] Fatal error emitting ${a}:`,e),!1}}(e,"scheduler:remove",{schoolId:a.schoolId||null,draftId:a.draftId||null,dayId:Number(a.dayId),periodId:String(a.periodId),assignmentId:String(a.assignmentId),courseId:a.courseId?String(a.courseId):null,courseName:a.courseName?String(a.courseName):null,source:"remove",timestamp:(new Date).toISOString()})}function rt(e){if(!e)return[];if(Array.isArray(e))return e;if(void 0!==e?.value)return Array.isArray(e.value)?e.value:rt(e.value);if("object"==typeof e){const a=Object.keys(e),t=a.filter(e=>/^\d+$/.test(e));if(t.length>0)return t.sort((e,a)=>Number(e)-Number(a)).map(a=>e[a]).filter(e=>null!=e);if("function"==typeof e.values)try{return Array.from(e.values())}catch(e){}const o=["data","items","list","array","results","collection"];for(const a of o)if(e[a]&&Array.isArray(e[a]))return e[a];const n=Object.values(e).filter(e=>null!=e);if(n.length>0&&a.length>2){const e=n[0];if("object"==typeof e&&null!==e&&n.every(e=>"object"==typeof e&&null!==e&&Object.keys(e).length>0))return n}}return[]}function st(e){return Array.isArray(e)?e.length:0}function lt(e){return st(e)>0}function dt(e){return st(e)||(e&&"object"==typeof e&&"number"==typeof e.length?e.length:0)}function it(e){const a=rt(e);return lt(a)?a:Array.isArray(e)?e:Array.isArray(e?.value)?e.value:e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.forEach?Array.from(e):[]}function ct(e,a){return{id:e.id??e.course_id??e.uuid??`course-fallback-${a}`,name:e.name??e.title??e.course_name??"",code:e.code??e.short_code??e.course_code??"",capacity:e.capacity??e.max??e.max_students??null,subject:e.subject??e.subject_name??"",yearGroups:rt(e.year_groups??e.yearGroups??e.is_for_year_groups??[]),possibleSlots:(t=e.possible_time_slots??e.possibleSlots??[],rt(t).map(e=>{if("string"==typeof e&&e.includes("|")){const[a,t]=e.split("|");return{dayId:Number(a),periodId:String(t)}}return"object"==typeof e&&null!==e?{dayId:Number(e.day_id??e.dayId),periodId:String(e.period_id??e.periodId)}:{dayId:-1,periodId:""}}).filter(e=>e.dayId>0&&e.periodId)),possible_time_slots:e.possible_time_slots,...e};var t}t(564);const ut={name:"SchedulerGrid",components:{InlineAssignmentEditor:ba,TeacherRoomSelectionModal:Fa,CourseSelectionModal:(0,ha.Z)(ot,[["render",function(a,t,o,n,r,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"modal-overlay",onClick:t[4]||(t[4]=(...e)=>n.cancelSelection&&n.cancelSelection(...e))},[(0,e.createElementVNode)("div",{class:"modal-content",onClick:t[3]||(t[3]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createElementVNode)("div",Ua,[(0,e.createElementVNode)("h3",null,"Select Course for "+(0,e.toDisplayString)(o.dayName)+" - "+(0,e.toDisplayString)(o.periodName),1),(0,e.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>n.cancelSelection&&n.cancelSelection(...e)),class:"close-btn"},"×")]),(0,e.createElementVNode)("div",Ga,[(0,e.createCommentVNode)(" Course Search "),(0,e.createElementVNode)("div",qa,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.courseSearchTerm=e),type:"text",placeholder:"Search courses...",class:"search-input"},null,512),[[e.vModelText,n.courseSearchTerm]])]),(0,e.createCommentVNode)(" Available Courses List "),(0,e.createElementVNode)("div",Ya,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.filteredCourses,a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:"course-item",onClick:e=>n.selectCourse(a)},[(0,e.createElementVNode)("div",Ha,[(0,e.createElementVNode)("div",Ja,(0,e.toDisplayString)(a.name||a.course_name||a.title),1),(0,e.createElementVNode)("div",Ka,[a.course_code?((0,e.openBlock)(),(0,e.createElementBlock)("span",Xa,(0,e.toDisplayString)(a.course_code),1)):(0,e.createCommentVNode)("v-if",!0),a.subject_name?((0,e.openBlock)(),(0,e.createElementBlock)("span",Qa,(0,e.toDisplayString)(a.subject_name),1)):(0,e.createCommentVNode)("v-if",!0)])])],8,Za))),128))]),0===n.filteredCourses.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",et,at)):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createElementVNode)("div",tt,[(0,e.createElementVNode)("button",{onClick:t[2]||(t[2]=(...e)=>n.cancelSelection&&n.cancelSelection(...e)),class:"cancel-btn"},"Cancel")])])])}],["__scopeId","data-v-25ebf1ad"]])},props:{periods:{type:Array,default:()=>[]},schoolDays:{type:Array,default:()=>[]},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},draftSchedules:{type:Array,default:()=>[]},liveSchedules:{type:Array,default:()=>[]},isReadOnly:{type:Boolean,default:!1},isLiveMode:{type:Boolean,default:!1},showStatistics:{type:Boolean,default:!0},maxDays:{type:Number,default:6},schoolId:{type:String,default:null},draftId:{type:String,default:null},parentEmit:{type:Function,default:null},emitDropEvents:{type:Boolean,default:!1},conflicts:{type:Array,default:()=>[]},canUndo:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1}},emits:["cell-click","assignment-details","toggle-non-instructional","toggle-lesson-schedules","filter-year","undo-last","save-draft","update-assignments","period-focus-changed"],setup(a,{emit:t}){const o=(0,e.ref)(!0),n=(0,e.ref)(!0),r=(0,e.ref)(""),s=(0,e.ref)(""),l=(0,e.ref)(null),d=(0,e.ref)({lastProcessedCount:0,processingTime:0,cacheHits:0,cacheMisses:0}),i=(0,e.ref)(0);(0,e.watch)(S,a=>{const t=performance.now();d.value.lastProcessedCount=dt(a),(0,e.nextTick)(()=>{d.value.processingTime=performance.now()-t,dt(a)>100&&console.log("📊 [Performance] Schedule processing completed:",{scheduleCount:dt(a),processingTimeMs:d.value.processingTime.toFixed(2),cellCacheSize:N.value.size,indexSize:w.value.size})})});const c=(0,e.ref)(null),u=(0,e.ref)(null),m=(0,e.ref)(!1),p=(0,e.ref)(null),f=(0,e.ref)(!1),g=(0,e.ref)(null),v=(0,e.ref)({show:!1,x:0,y:0,assignment:null,dayId:null,periodId:null});(0,e.watch)(l,(e,a)=>{e!==a&&console.log("🔍 [SchedulerGrid] focusedPeriodId changed:",{from:a,to:e})});const h=(0,e.computed)(()=>{const e=function(e,a="unknown"){const t=rt(e);if(!lt(t)){const a=function(e){if(!e)return[];const a=rt(e);if(lt(a))return a;if(e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.forEach)return Array.from(e);if(e&&"object"==typeof e){const a=["data","items","list","array","results"];for(const t of a)if(Array.isArray(e[t]))return e[t];for(const a in e)if(Array.isArray(e[a]))return e[a]}return[]}(e);if(lt(a))return a}if(!lt(t)&&e){const t=e&&"object"==typeof e?Object.keys(e):null,o=t?t.filter(e=>/^\d+$/.test(e)):[];console.warn(`[${a}] Could not extract array from:`,{type:typeof e,isArray:Array.isArray(e),hasLength:e?.length,hasForEach:"function"==typeof e?.forEach,hasValue:!!e?.value,keys:t,numericKeys:o,isNumericKeyObject:o.length>0,sampleData:e&&"object"==typeof e&&o.length>0?e[o[0]]:e})}return lt(t)?t:[]}(a.schoolDays,"schoolDays");if(0===dt(e))return[];const t=a.maxDays||7;return e.slice(0,t)}),b=(0,e.computed)(()=>{const e=it(a.periods);if(0===dt(e))return console.log("🔍 [SchedulerGrid] No periods available:",{periodsType:typeof a.periods,periodsLength:a.periods?.length,periodsKeys:Object.keys(a.periods||{}),samplePeriod:Array.isArray(a.periods)?a.periods[0]:a.periods}),[];if(dt(e)>0){const a=dt(e);(a!==i.value||a>20)&&(console.log("🔍 [SchedulerGrid] Period processing summary:",{totalPeriods:a,focusedPeriodId:l.value,showNonInstructional:o.value}),i.value=a)}let t=e;if(l.value){const a=e.filter(e=>e.id===l.value);0===dt(a)?(console.warn("🚨 [SchedulerGrid] Focused period ID does not match any periods. Clearing focus.",{focusedId:l.value,availableIds:e.slice(0,5).map(e=>e.id)}),l.value=null):t=a}else o.value||(t=e.filter(e=>{let a="flexible"===e.attendance_requirement||"required"===e.attendance_requirement||"contracted"===e.attendance_requirement;if(a||e.attendance_requirement)!a&&e.attendance_requirement&&"optional"!==e.attendance_requirement&&(a=!0);else if(void 0!==e.is_instructional)a=!0===e.is_instructional;else if(e.block_type)a=!["break","pause","lunch","recess","assembly","flexband","frühdienst"].includes(e.block_type.toLowerCase());else if(e.label||e.name){const t=(e.label||e.name).toLowerCase();a=!(t.includes("break")||t.includes("pause")||t.includes("lunch")||t.includes("flexband")||t.includes("frühdienst")||t.includes("benutzerdefiniert"))}else a=!0;return a}));return 0===dt(t)&&dt(a.periods)>0&&(t=it(a.periods)),t}),y=(0,e.ref)(""),x=(0,e.ref)("");let C=null;(0,e.watch)(x,e=>{clearTimeout(C),C=setTimeout(()=>{y.value=e},300)});const k=(0,e.ref)(new Map),S=(0,e.computed)(()=>{let e=a.isLiveMode?a.liveSchedules:a.draftSchedules;const t=`${a.isLiveMode}-${y.value}-${s.value}-${n.value}`;if(k.value.has(t))return k.value.get(t);if(dt(e)>100&&console.log("🔍 [SchedulerGrid] Processing large schedule set:",{count:dt(e),mode:a.isLiveMode?"live":"draft",hasSearch:!!y.value,hasClassFilter:!!s.value}),y.value){const a=y.value.toLowerCase();e=e.filter(e=>e.course_name&&e.course_name.toLowerCase().includes(a)||e.subject_name&&e.subject_name.toLowerCase().includes(a)||e.class_name&&e.class_name.toLowerCase().includes(a)||e.teacher_names&&e.teacher_names.some(e=>e.toLowerCase().includes(a)))}return s.value&&(e=e.filter(e=>e.class_id===s.value)),n.value||(e=e.filter(e=>e.course_id)),k.value.size>50&&k.value.clear(),k.value.set(t,e),e}),E=(0,e.computed)(()=>{const e=new Set;return a.classes.forEach(a=>{a.year_group&&e.add(a.year_group)}),Array.from(e).sort()}),I=(0,e.computed)(()=>r.value?a.classes.filter(e=>e.year_group===r.value):a.classes.slice().sort((e,a)=>e.name.localeCompare(a.name))),N=(0,e.ref)(new Map),w=(0,e.ref)(new Map);let _=null;const D=(0,e.ref)([]);function V(e,a){const t=`${e}-${a}`;if(N.value.has(t))return d.value.cacheHits++,N.value.get(t);d.value.cacheMisses++;const o=(w.value.get(t)||[]).sort((e,a)=>{const t=M(e.class_id),o=M(a.class_id);if(t!==o)return t.localeCompare(o);const n=z(e.course_id)||O(e.subject_id),r=z(a.course_id)||O(a.subject_id);return n.localeCompare(r)});return N.value.size>1e3&&(N.value.clear(),d.value.cacheHits=0,d.value.cacheMisses=0),N.value.set(t,o),o}(0,e.watch)(S,e=>{clearTimeout(_),_=setTimeout(()=>{D.value=e,N.value.clear(),w.value.clear(),e.forEach(e=>{const t=[];a.schoolDays.forEach(a=>{(e.day_id===a.id||e.day_id===a.day_id||e.day_number===a.day_number||e.day_number===a.id||a.name&&e.day_name_en===a.name||a.name_en&&e.day_name_en===a.name_en)&&t.push(a.id)});const o=[];a.periods.forEach(a=>{(e.period_id===a.id||e.block_number&&a.blockNumber&&e.block_number===a.blockNumber)&&o.push(a.id)}),t.forEach(a=>{o.forEach(t=>{const o=`${a}-${t}`;w.value.has(o)||w.value.set(o,[]),w.value.get(o).push(e)})})})},100)},{immediate:!0});const A=(0,e.ref)(new Map),T=(0,e.ref)(new Map),B=(0,e.ref)(new Map),L=(0,e.ref)(new Map);function M(e){if(!e)return"";if(A.value.has(e))return A.value.get(e);const t=a.classes.find(a=>a.id===e),o=t?.name||"No Class";return A.value.size>200&&A.value.clear(),A.value.set(e,o),o}function z(e){if(!e)return null;if(T.value.has(e))return T.value.get(e);const t=a.courses.find(a=>a.id===e),o=t?.name||t?.course_name||t?.title;if(!t)return T.value.set(e,null),null;const n=o||null;return T.value.size>200&&T.value.clear(),T.value.set(e,n),n}function j(e){if(!e?.length)return"No Teacher";const t=e.join(",");if(L.value.has(t))return L.value.get(t);const o=e.map(e=>{const t=a.teachers.find(a=>a.id===e);return t?.name||"Unknown Teacher"}).join(", ");return L.value.size>500&&L.value.clear(),L.value.set(t,o),o}function O(e){if(!e)return null;const t=a.subjects.find(a=>a.id===e);return t?.name||t?.title||t?.subject_name||`Subject ${e}`}function P(e){const a=z(e.course_id);if(a)return a;return O(e.subject_id)||"No Course"}(0,e.watch)([()=>a.classes,()=>a.courses,()=>a.rooms,()=>a.teachers],()=>{A.value.clear(),T.value.clear(),B.value.clear(),L.value.clear(),ae.value.clear()});const $=(0,e.computed)(()=>{const e=new Set;return it(a.courses).forEach(a=>{ee(a).forEach(a=>e.add(a))}),Array.from(e).sort((e,a)=>e-a)});function R(e){return a.conflicts.some(a=>a.day_id===e.day_id&&a.period_id===e.period_id&&(a.assignment_id===e.id||a.teacher_ids?.some(a=>e.teacher_ids?.includes(a))||a.class_id===e.class_id||a.room_id===e.room_id))}function F(e){const t=!e.course_id||a.courses.some(a=>a.id===e.course_id),o=!e.class_id||a.classes.some(a=>a.id===e.class_id),n=!e.room_id||a.rooms.some(a=>a.id===e.room_id),r=!e.teacher_ids?.length||e.teacher_ids.every(e=>a.teachers.some(a=>a.id===e));return!(t&&o&&n&&r)}function W(e,o,n){if(a.isReadOnly)return;console.log("🎯 [SchedulerGrid] Opening course selection modal for:",{dayId:e,periodId:o,period:n.name});const r=U(e,o),s=a.schoolDays.find(a=>a.id===e),l=s?s.name:`Day ${e}`,d=n?n.name:`Period ${o}`;g.value={dayId:e,periodId:o,dayName:l,periodName:d,period:n,availableCourses:r},f.value=!0,t("cell-click",{dayId:e,periodId:o,period:n,mode:"add"})}function U(e,t){let o=a.courses.map((e,a)=>ct(e,a)).filter(a=>0===dt(a.possibleSlots)||a.possibleSlots.some(a=>a.dayId===e&&a.periodId===t));if(y.value){const e=y.value.toLowerCase();o=o.filter(a=>a.name&&a.name.toLowerCase().includes(e)||a.course_name&&a.course_name.toLowerCase().includes(e)||a.title&&a.title.toLowerCase().includes(e)||a.course_code&&a.course_code.toLowerCase().includes(e)||a.subject_name&&a.subject_name.toLowerCase().includes(e)||a.description&&a.description.toLowerCase().includes(e))}if(s.value){const e=a.classes.find(e=>e.id===s.value);e&&(o=o.filter(a=>!(a.is_for_year_groups&&dt(a.is_for_year_groups)>0)||a.is_for_year_groups.includes(e.year_group)))}return(dt(o)>50||y.value)&&console.log("🎯 [SchedulerGrid] Available courses for slot:",{dayId:e,periodId:t,availableCount:dt(o),searchTerm:y.value,classFilter:s.value}),o}function G(e,o,n){console.log("🎯 [Scheduler] Opening teacher/room selection for course:",e.name||e.course_name,"to day:",o,"period:",n,a.isReadOnly?"(READ-ONLY MODE - EVENTS ONLY)":"(EDITABLE MODE)"),p.value={courseId:e.id,courseName:e.name||e.course_name||"",courseCode:e.code||e.course_code||"",dayId:o,periodId:n},m.value=!0,t("scheduler-drag-end",{courseId:e.id,courseName:e.name||e.course_name||"",courseCode:e.code||e.course_code||"",success:!0,source:"drag-end",timestamp:(new Date).toISOString()}),console.log("✅ [Scheduler] Drop events emitted to parent component")}const q=(0,e.ref)(null),Y=(0,e.ref)(null),Z=(0,e.ref)(null);function H(){console.log("❌ [Context Menu] Closing context menu"),v.value.show=!1}function J(e,t,o){a.isReadOnly||(console.log("✏️ [InlineEdit] Starting edit for assignment:",e.id),c.value&&X(),c.value=e,u.value={dayId:t,periodId:o})}function K(e,a,t){console.log("👁️ [InlineEdit] Starting read-only view for assignment:",e.id),c.value&&X(),c.value=e,u.value={dayId:a,periodId:t}}function X(){console.log("❌ [InlineEdit] Cancelling edit"),c.value=null,u.value=null}function Q(e){console.log("🗑️ [InlineEdit] Deleting assignment:",e.id),a.emitDropEvents&&nt(a.parentEmit||t,{schoolId:a.schoolId,draftId:e.id,dayId:e.day_id,periodId:e.period_id,assignmentId:e.id,courseId:e.course_id,courseName:e.course_name||e.display_cell||""});const o=(a.isLiveMode?a.liveSchedules:a.draftSchedules).filter(a=>a.id!==e.id);t("update-assignments",o),c.value=null,u.value=null}function ee(e){const a=[];if(e.is_for_year_g&&"object"==typeof e.is_for_year_g)for(const[t,o]of Object.entries(e.is_for_year_g))o&&o>0&&a.push(Number(o));else e.is_for_year_groups&&Array.isArray(e.is_for_year_groups)?a.push(...e.is_for_year_groups.map(e=>Number(e)).filter(e=>e>0)):e.year_groups&&Array.isArray(e.year_groups)&&a.push(...e.year_groups.map(e=>Number(e)).filter(e=>e>0));return[...new Set(a)].sort((e,a)=>e-a)}const ae=(0,e.ref)(new Map);return{showNonInstructional:o,showLessonSchedules:n,selectedYearFilter:r,selectedClassFilter:s,focusedPeriodId:l,draggedCourse:q,draggedAssignment:Y,dragOverCell:Z,editingAssignment:c,editingCell:u,showTeacherRoomModal:m,modalCourseData:p,showCourseSelectionModal:f,courseSelectionData:g,searchTerm:x,debouncedSearchTerm:y,visibleDays:h,visiblePeriods:b,filteredEntries:S,yearGroups:E,availableClasses:I,formatTime:function(e){if(!e)return"";const a=e.split(":");return a.length>=2?`${a[0]}:${a[1]}`:e},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""},getCellAssignments:V,getCellClasses:function(e,t){const o=V(e,t),n=[];return dt(o)>0&&(n.push("has-assignments"),dt(o)>1&&n.push("multiple-assignments")),o.some(o=>a.conflicts.some(a=>a.day_id===e&&a.period_id===t))&&n.push("has-conflicts"),n},getCellAriaLabel:function(e,a){const t=V(e.id,a.id);if(0===dt(t))return`${e.name} ${a.name}: Empty, click to add assignment`;const o=t.map(e=>P(e)).join(", ");return`${e.name} ${a.name}: ${o}, ${dt(t)} assignment${dt(t)>1?"s":""}`},getAssignmentClasses:function(e){const a=[];return R(e)&&a.push("has-conflict"),F(e)&&a.push("has-deleted-entities"),!z(e.course_id)&&e.subject_id&&a.push("lesson-schedule"),a},getAssignmentStyles:function(e){const t=a.courses.find(a=>a.id===e.course_id),o=a.classes.find(a=>a.id===e.class_id);return{borderLeft:`4px solid ${t?.color||o?.color||"#e0e0e0"}`,backgroundColor:t?.color?`${t.color}15`:o?.color?`${o.color}15`:"#f9f9f9"}},getCourseName:z,getSubjectName:O,getDisplayName:P,getClassName:M,getTeacherNames:j,getAssignmentTeachers:function(e){if(e.teacher_names&&Array.isArray(e.teacher_names)&&e.teacher_names.length>0)return e.teacher_names.join(", ");const a=e.staff_ids||e.teacher_ids;return a&&a.length>0?j(a):""},getRoomName:function(e){if(!e)return"No Room";if(B.value.has(e))return B.value.get(e);const t=a.rooms.find(a=>a.id===e),o=t?.name||"Unknown Room";return B.value.size>200&&B.value.clear(),B.value.set(e,o),o},hasConflicts:R,hasDeletedEntities:F,handleCellClick:function(e,o,n){console.log("🖱️ [SchedulerGrid] Cell clicked:",{dayId:e,periodId:o,period:n?.name,isReadOnly:a.isReadOnly}),a.isReadOnly?console.log("📖 [SchedulerGrid] Read-only mode - ignoring cell click"):0===V(e,o).length?(console.log("📋 [SchedulerGrid] Empty cell clicked - opening course selection modal"),W(e,o,n)):(console.log("📋 [SchedulerGrid] Cell with assignments clicked - emitting cell-click event"),t("cell-click",{dayId:e,periodId:o,period:n}))},openAssignmentModal:W,openAssignmentDetails:function(e){t("assignment-details",e)},handleLessonScheduleToggle:function(){t("toggle-lesson-schedules",n.value)},handleClassFilterChange:function(){},togglePeriodFocus:function(e){l.value===e?l.value=null:l.value=e,t("period-focus-changed",l.value)},clearPeriodFocus:function(){l.value=null,t("period-focus-changed",null)},getFocusedPeriodName:function(){const e=a.periods.find(e=>e.id===l.value);return e?.name||e?.label||"Unknown Period"},getAvailableCoursesForSlot:U,getCourseCardStyle:function(e){return{borderLeft:`4px solid ${e.color||"#007cba"}`,backgroundColor:e.color?`${e.color}15`:"#f0f8ff"}},assignCourseToSlot:G,getNoPreferredDaysCourses:function(){const e=a.courses.filter(e=>!e.possible_time_slots||0===dt(e.possible_time_slots));let t=e;if(y.value){const e=y.value.toLowerCase();t=t.filter(a=>a.name&&a.name.toLowerCase().includes(e)||a.course_name&&a.course_name.toLowerCase().includes(e)||a.title&&a.title.toLowerCase().includes(e)||a.course_code&&a.course_code.toLowerCase().includes(e)||a.subject_name&&a.subject_name.toLowerCase().includes(e))}return s.value&&(t=t.filter(e=>{const t=a.classes.find(e=>e.id===s.value);return!t||!e.is_for_year_groups||e.is_for_year_groups.includes(t.year_group)})),console.log("📅 [NoPreferredDays] Filtered courses:",{total:dt(e),afterSearch:dt(t),searchTerm:y.value,classFilter:s.value}),t},assignCourseToFocusedSlot:function(e){if(a.isReadOnly||!l.value)return;const t=h.value[0];t&&G(e,t.id,l.value)},handleCourseDragStart:function(e,o){console.log("🚀 [Scheduler] Drag started:",o.name||o.course_name,a.isReadOnly?"(READ-ONLY MODE)":"(EDITABLE MODE)"),q.value=o,t("scheduler-drag-start",{courseId:o.id,courseName:o.name||o.course_name||"",courseCode:o.code||o.course_code||"",source:"drag-start",timestamp:(new Date).toISOString()}),e.dataTransfer.setData("text/plain",JSON.stringify({type:"course",course:o,id:o.id})),e.dataTransfer.effectAllowed="copy",e.target.style.opacity="0.5"},handleCourseDragEnd:function(e){console.log("🎯 [DragDrop] Course drag ended");const a=q.value;t("scheduler-drag-end",{courseId:a?.id||null,courseName:a?.name||a?.course_name||null,courseCode:a?.code||a?.course_code||null,success:!1,source:"drag-end",timestamp:(new Date).toISOString()}),q.value=null,e.target.style.opacity="1"},handleAssignmentDragStart:function(e,t,o,n){console.log("🎯 [DragDrop] Assignment drag started:",t.course_name||t.subject_name,a.isReadOnly?"(READ-ONLY MODE)":"(EDITABLE MODE)"),Y.value={assignment:t,originalDayId:o,originalPeriodId:n},e.dataTransfer.setData("text/plain",JSON.stringify({type:"assignment",assignment:t,originalDayId:o,originalPeriodId:n})),e.dataTransfer.effectAllowed="move",e.target.style.opacity="0.5"},handleAssignmentDragEnd:function(e){console.log("🎯 [DragDrop] Assignment drag ended"),Y.value=null,e.target.style.opacity="1",Z.value=null},handleCellDragOver:function(e,a,t){if(e.preventDefault(),q.value||Y.value)return e.dataTransfer.dropEffect=Y.value?"move":"copy",!1},handleCellDragEnter:function(e,a,t){e.preventDefault(),(q.value||Y.value)&&(Z.value=`${a}-${t}`,e.currentTarget.classList.add("drag-over"))},handleCellDragLeave:function(e,a,t){e.currentTarget.contains(e.relatedTarget)||(Z.value=null,e.currentTarget.classList.remove("drag-over"))},handleCellDrop:function(e,o,n){e.preventDefault(),Z.value=null,e.currentTarget.classList.remove("drag-over");try{const r=JSON.parse(e.dataTransfer.getData("text/plain"));if("course"===r.type){const e=r.course;console.log("🎯 [Scheduler] Dropping:",e.name||e.course_name,"to day:",o,"period:",n),G(e,o,n)}else if("assignment"===r.type){const e=r.assignment,s=r.originalDayId,l=r.originalPeriodId;console.log("🎯 [DragDrop] Moving assignment from:",s,l,"to:",o,n),s===o&&l===n||(t("scheduler-drop",{schoolId:a.schoolId||null,draftId:e.draft_id||e.draftId||e.id,dayId:o,periodId:n,courseId:e.course_id||"",courseName:e.course_name||e.display_cell||"",courseCode:e.course_code||"",teacherIds:e.teacher_ids||[],primaryTeacherId:e.primary_teacher_id||null,roomId:e.room_id||null,source:"assignment-move",timestamp:(new Date).toISOString(),fromDayId:s,fromPeriodId:l,action:"move"}),t("update-assignments",{action:"move",assignment:e,fromDayId:s,fromPeriodId:l,toDayId:o,toPeriodId:n}))}}catch(e){console.error("🚨 [DragDrop] Error handling drop:",e)}},isEditing:function(e){return c.value?.id===e},handleAssignmentClick:function(e,o,n){if(console.log("👆 [Left-Click] Assignment clicked:",{assignment:e.display_cell||e.course_name,dayId:o,periodId:n,isReadOnly:a.isReadOnly}),a.isReadOnly)return console.log("📖 [Left-Click] Read-only mode - emitting assignment details"),void t("assignment-details",e);v.value.show=!1,t("assignment-details",e)},handleAssignmentRightClick:function(e,t,o,n){console.log("🖱️ [Right-Click] Assignment right-click detected:",{assignment:t.display_cell||t.course_name,dayId:o,periodId:n,isReadOnly:a.isReadOnly,event:e.type}),c.value&&(console.log("📝 [Right-Click] Canceling existing inline edit"),X()),console.log("📋 [Right-Click] Showing context menu at:",{x:e.clientX,y:e.clientY}),v.value={show:!0,x:e.clientX,y:e.clientY,assignment:t,dayId:o,periodId:n}},startInlineEdit:J,startInlineEditReadOnly:K,saveInlineEdit:function(e){console.log("💾 [InlineEdit] Saving changes for assignment:",e.id);const o=(a.isLiveMode?a.liveSchedules:a.draftSchedules).map(a=>a.id===e.id?e:a);t("update-assignments",o),c.value=null,u.value=null},cancelInlineEdit:X,deleteInlineAssignment:Q,handleCourseEdit:function(e){console.log("📝 [CourseEdit] Emitting course edit event:",e),t("course-edit",e)},closeContextMenu:H,editAssignmentFromContext:function(){console.log("✏️ [Context Menu] Edit assignment selected"),v.value.assignment&&(a.isReadOnly?(console.log("📖 [Context Menu] Read-only mode - showing assignment details in inline editor"),K(v.value.assignment,v.value.dayId,v.value.periodId)):J(v.value.assignment,v.value.dayId,v.value.periodId)),H()},deleteAssignmentFromContext:function(){if(console.log("🗑️ [Context Menu] Delete assignment selected"),v.value.assignment)if(a.isReadOnly){console.log("📖 [Context Menu] Read-only mode - emitting scheduler:remove for testing");const e=v.value.assignment;nt(a.parentEmit||t,{schoolId:a.schoolId,draftId:e.id,dayId:e.day_id,periodId:e.period_id,assignmentId:e.id,courseId:e.course_id,courseName:e.course_name||e.display_cell||""})}else Q(v.value.assignment);H()},contextMenu:v,handleTeacherRoomSubmit:function(e){console.log("🎯 [Modal] Teacher/room assignment submitted:",e);const o=`draft-${Date.now()}-${Math.random().toString(36).substring(2,8)}`;t("scheduler-drop",{schoolId:a.schoolId||null,draftId:o,dayId:e.dayId,periodId:e.periodId,courseId:e.courseId,courseName:e.courseName,courseCode:p.value?.courseCode||"",teacherIds:e.teacherIds,primaryTeacherId:e.primaryTeacherId,roomId:e.roomId,source:"modal-assignment",timestamp:e.timestamp}),m.value=!1,p.value=null},handleTeacherRoomCancel:function(){console.log("❌ [Modal] Teacher/room assignment cancelled"),m.value=!1,p.value=null},handleCourseSelectionSubmit:function(e){console.log("🎯 [CourseSelection] Course selected:",e),f.value=!1,p.value={courseId:e.courseId,courseName:e.courseName,courseCode:e.courseCode,dayId:e.dayId,periodId:e.periodId},m.value=!0,g.value=null},handleCourseSelectionCancel:function(){console.log("❌ [CourseSelection] Course selection cancelled"),f.value=!1,g.value=null},safeLength:dt,safeArray:it,getDailyGradeStats:function(e,t){if(!t)return[];const o=`${e}-${t}`;if(ae.value.has(o))return ae.value.get(o);const n=function(e,t){const o=`${e}-${t}`,n=w.value.get(o)||[],r=[];return n.forEach(e=>{const t=(o=e.course_id,it(a.courses).find(e=>e.id===o));var o;if(t){const a=t.max_students||t.capacity||0,o=void 0!==e.free_spaces?e.free_spaces:a;r.push({...t,scheduledEntry:e,freeSpots:o,totalSpots:a})}}),r}(e,t),r=[];return $.value.forEach(e=>{let a=0,t=0,o=0;n.forEach(n=>{const r=ee(n);if(r.includes(e)){t++;const e=n.freeSpots||0;if(1===r.length)a+=e,o+=e;else{const t=e/r.length;a+=e,o+=t}}}),(t>0||a>0)&&r.push({grade:e,totalSpots:a,averageSpots:o,coursesCount:t})}),ae.value.size>100&&ae.value.clear(),ae.value.set(o,r),r},allGrades:$}}};t(626);const mt={name:"CourseScheduler",components:{SchedulerGrid:(0,ha.Z)(ut,[["render",function(a,t,o,n,r,s){const l=(0,e.resolveComponent)("TeacherRoomSelectionModal"),d=(0,e.resolveComponent)("CourseSelectionModal"),i=(0,e.resolveComponent)("InlineAssignmentEditor");return(0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,null,[(0,e.createElementVNode)("div",x,[(0,e.createCommentVNode)(" Toolbar "),(0,e.createElementVNode)("div",C,[(0,e.createElementVNode)("div",k,[(0,e.createElementVNode)("label",S,[(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>n.showNonInstructional=e),onChange:t[1]||(t[1]=e=>a.$emit("toggle-non-instructional",n.showNonInstructional))},null,544),[[e.vModelCheckbox,n.showNonInstructional]]),(0,e.createTextVNode)(" Show Non-Instructional Blocks ")]),(0,e.createElementVNode)("label",E,[(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>n.showLessonSchedules=e),onChange:t[3]||(t[3]=(...e)=>n.handleLessonScheduleToggle&&n.handleLessonScheduleToggle(...e))},null,544),[[e.vModelCheckbox,n.showLessonSchedules]]),(0,e.createTextVNode)(" Show Lesson Schedules (No Course) ")])]),(0,e.createElementVNode)("div",I,[(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.selectedYearFilter=e),onChange:t[5]||(t[5]=e=>a.$emit("filter-year",n.selectedYearFilter))},[N,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.yearGroups,a=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:a,value:a},(0,e.toDisplayString)(a),9,w))),128))],544),[[e.vModelSelect,n.selectedYearFilter]])]),(0,e.createElementVNode)("div",_,[(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedClassFilter=e),onChange:t[7]||(t[7]=(...e)=>n.handleClassFilterChange&&n.handleClassFilterChange(...e))},[D,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.availableClasses,a=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:a.id,value:a.id},(0,e.toDisplayString)(a.name),9,V))),128))],544),[[e.vModelSelect,n.selectedClassFilter]])]),(0,e.createElementVNode)("div",A,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.searchTerm=e),type:"text",placeholder:"Search courses/classes...",class:"search-input",title:"Search assignments by course, class, or teacher name"},null,512),[[e.vModelText,n.searchTerm]]),n.searchTerm?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:t[9]||(t[9]=e=>n.searchTerm=""),class:"clear-search-btn",title:"Clear search"}," ✕ ")):(0,e.createCommentVNode)("v-if",!0),n.debouncedSearchTerm||n.selectedClassFilter?((0,e.openBlock)(),(0,e.createElementBlock)("div",T,[(0,e.createElementVNode)("small",null,[(0,e.createTextVNode)(" Filters active: "),n.debouncedSearchTerm?((0,e.openBlock)(),(0,e.createElementBlock)("span",B,'Search: "'+(0,e.toDisplayString)(n.debouncedSearchTerm)+'"',1)):(0,e.createCommentVNode)("v-if",!0),n.selectedClassFilter?((0,e.openBlock)(),(0,e.createElementBlock)("span",L,"Class: "+(0,e.toDisplayString)(n.getClassName(n.selectedClassFilter)),1)):(0,e.createCommentVNode)("v-if",!0),n.showLessonSchedules?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",M,"Courses only")),n.showNonInstructional?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",z,"Instructional periods only"))])])):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createElementVNode)("div",j,[n.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>n.clearPeriodFocus&&n.clearPeriodFocus(...e)),class:"focus-button active",title:"Show all periods"}," Show All Periods (Currently: "+(0,e.toDisplayString)(n.getFocusedPeriodName())+") ",1)):((0,e.openBlock)(),(0,e.createElementBlock)("span",O,"Click a period name to focus on that period and see available courses"))]),(0,e.createElementVNode)("div",P,[(0,e.createElementVNode)("button",{onClick:t[11]||(t[11]=e=>a.$emit("undo-last")),disabled:!o.canUndo,class:"undo-button",title:"Undo last change"}," ↶ Undo ",8,$),(0,e.createElementVNode)("button",{onClick:t[12]||(t[12]=e=>a.$emit("save-draft")),class:(0,e.normalizeClass)(["save-button",{saving:o.isSaving}])},(0,e.toDisplayString)(o.isSaving?"Saving...":"Save Draft"),3)])]),(0,e.createCommentVNode)(" Main Grid "),n.safeLength(n.visibleDays)>0&&n.safeLength(n.visiblePeriods)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",R,[(0,e.createCommentVNode)(" Grid Header with Days "),(0,e.createElementVNode)("div",F,[(0,e.createElementVNode)("div",W,[U,(0,e.createElementVNode)("div",G,[(0,e.createElementVNode)("small",null,"Days: "+(0,e.toDisplayString)(n.safeLength(n.visibleDays))+", Periods: "+(0,e.toDisplayString)(n.safeLength(n.visiblePeriods)),1)])]),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleDays,(a,t)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:"day-header-cell",role:"columnheader","aria-colindex":t+1},[(0,e.createElementVNode)("span",Y,(0,e.toDisplayString)(a.name),1),a.date?((0,e.openBlock)(),(0,e.createElementBlock)("span",Z,(0,e.toDisplayString)(n.formatDate(a.date)),1)):(0,e.createCommentVNode)("v-if",!0),(0,e.createElementVNode)("div",H,[(0,e.createElementVNode)("small",null,"ID: "+(0,e.toDisplayString)(a.id),1)])],8,q))),128))]),(0,e.createCommentVNode)(" Grid Body "),(0,e.createElementVNode)("div",J,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visiblePeriods,(a,o)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:(0,e.normalizeClass)(["grid-row",{"non-instructional":!a.is_instructional}]),role:"row","aria-rowindex":o+1},[(0,e.createCommentVNode)(" Period Label "),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["period-label-cell",{focused:n.focusedPeriodId===a.id}]),role:"rowheader",onClick:e=>n.togglePeriodFocus(a.id),title:"Click to focus on this period"},[(0,e.createElementVNode)("div",Q,[(0,e.createElementVNode)("span",ee,(0,e.toDisplayString)(a.name),1),(0,e.createElementVNode)("span",ae,(0,e.toDisplayString)(n.formatTime(a.start_time))+" - "+(0,e.toDisplayString)(n.formatTime(a.end_time)),1),a.is_instructional?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",te,(0,e.toDisplayString)(a.type||"Break"),1)),(0,e.createElementVNode)("div",oe,[(0,e.createElementVNode)("small",null,"ID: "+(0,e.toDisplayString)(a.id)+", Instructional: "+(0,e.toDisplayString)(!1!==a.is_instructional?"Yes":"No"),1)])])],10,X),(0,e.createCommentVNode)(" Day Cells "),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleDays,o=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`${a.id}-${o.id}`,class:(0,e.normalizeClass)(["schedule-cell drop-zone",n.getCellClasses(o.id,a.id)]),role:"gridcell",tabindex:"0",onClick:e=>n.handleCellClick(o.id,a.id,a),onKeydown:[(0,e.withKeys)(e=>n.handleCellClick(o.id,a.id,a),["enter"]),(0,e.withKeys)((0,e.withModifiers)(e=>n.handleCellClick(o.id,a.id,a),["prevent"]),["space"])],"aria-label":n.getCellAriaLabel(o,a),onDragover:(0,e.withModifiers)(e=>n.handleCellDragOver(e,o.id,a.id),["prevent"]),onDragenter:(0,e.withModifiers)(e=>n.handleCellDragEnter(e,o.id,a.id),["prevent"]),onDragleave:e=>n.handleCellDragLeave(e,o.id,a.id),onDrop:e=>n.handleCellDrop(e,o.id,a.id),"data-day-id":o.id,"data-period-id":a.id},[(0,e.createCommentVNode)(" Multiple Assignments Display "),n.safeLength(n.getCellAssignments(o.id,a.id))>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",re,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getCellAssignments(o.id,a.id),(r,s)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:s,class:(0,e.normalizeClass)(["assignment-item draggable-assignment",n.getAssignmentClasses(r)]),style:(0,e.normalizeStyle)(n.getAssignmentStyles(r)),onClick:(0,e.withModifiers)(e=>n.handleAssignmentClick(r,o.id,a.id),["stop"]),onContextmenu:(0,e.withModifiers)(e=>n.handleAssignmentRightClick(e,r,o.id,a.id),["prevent"]),draggable:!n.isEditing(r.id),onDragstart:e=>n.handleAssignmentDragStart(e,r,o.id,a.id),onDragend:t[13]||(t[13]=e=>n.handleAssignmentDragEnd(e)),"data-assignment-id":r.id,"data-day-id":o.id,"data-period-id":a.id},[(0,e.createCommentVNode)(" Normal Assignment Display "),n.isEditing(r.id)?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",le,[(0,e.createElementVNode)("span",de,(0,e.toDisplayString)(n.getDisplayName(r)),1),r.class_id?((0,e.openBlock)(),(0,e.createElementBlock)("span",ie,(0,e.toDisplayString)(n.getClassName(r.class_id)),1)):(0,e.createCommentVNode)("v-if",!0),n.getAssignmentTeachers(r)?((0,e.openBlock)(),(0,e.createElementBlock)("span",ce,(0,e.toDisplayString)(n.getAssignmentTeachers(r)),1)):(0,e.createCommentVNode)("v-if",!0),r.room_id?((0,e.openBlock)(),(0,e.createElementBlock)("span",ue,(0,e.toDisplayString)(n.getRoomName(r.room_id)),1)):(0,e.createCommentVNode)("v-if",!0)])),(0,e.createCommentVNode)(" Conflict Indicators "),n.hasConflicts(r)?((0,e.openBlock)(),(0,e.createElementBlock)("div",me," ⚠️ ")):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Deleted Entity Warnings "),n.hasDeletedEntities(r)?((0,e.openBlock)(),(0,e.createElementBlock)("div",pe," ❌ ")):(0,e.createCommentVNode)("v-if",!0)],46,se))),128)),(0,e.createCommentVNode)(" Add More Button for cells with assignments "),(0,e.createElementVNode)("button",{class:"add-more-button",onClick:(0,e.withModifiers)(e=>n.openAssignmentModal(o.id,a.id,a),["stop"]),title:"Add another assignment"}," + ",8,fe)])):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createCommentVNode)(" Empty Cell "),ge],2112))],42,ne))),128))],10,K))),128)),(0,e.createCommentVNode)(" Grade Statistics Row (when period is focused) "),o.showStatistics&&n.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("div",ve,[(0,e.createCommentVNode)(" Empty cell for period column "),he,(0,e.createCommentVNode)(" Statistics for each day "),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleDays,a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`stats-${a.id}`,class:"day-statistics-cell"},[be,(0,e.createElementVNode)("div",ye,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getDailyGradeStats(a.id,n.focusedPeriodId),t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`${a.id}-${t.grade}`,class:"grade-stats-row"},[(0,e.createElementVNode)("div",xe,(0,e.toDisplayString)(t.grade)+":",1),(0,e.createElementVNode)("div",Ce,(0,e.toDisplayString)(t.totalSpots),1),(0,e.createElementVNode)("div",ke,(0,e.toDisplayString)(t.averageSpots.toFixed(1)),1),(0,e.createElementVNode)("div",Se,(0,e.toDisplayString)(t.coursesCount),1)]))),128))]),(0,e.createCommentVNode)(' Show "No data" if no statistics '),0===n.safeLength(n.getDailyGradeStats(a.id,n.focusedPeriodId))?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ee,Ie)):(0,e.createCommentVNode)("v-if",!0)]))),128))])):(0,e.createCommentVNode)("v-if",!0)])])):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createCommentVNode)(" Debug info when grid is hidden "),(0,e.createElementVNode)("div",Ne,[(0,e.createElementVNode)("div",we,[(0,e.createTextVNode)(" ❌ Grid Hidden - Debug Info: "),(0,e.createElementVNode)("ul",null,[(0,e.createElementVNode)("li",null,"Visible Days: "+(0,e.toDisplayString)(n.safeLength(n.visibleDays))+" ("+(0,e.toDisplayString)(n.visibleDays.map(e=>e.name).join(", "))+")",1),(0,e.createElementVNode)("li",null," Visible Periods: "+(0,e.toDisplayString)(n.safeLength(n.visiblePeriods))+" ("+(0,e.toDisplayString)(n.visiblePeriods.map(e=>e.name||e.label).join(", "))+") ",1),(0,e.createElementVNode)("li",null,"Show Non-Instructional: "+(0,e.toDisplayString)(n.showNonInstructional),1),(0,e.createElementVNode)("li",null,"Focused Period: "+(0,e.toDisplayString)(n.focusedPeriodId),1),(0,e.createElementVNode)("li",null,"Total Periods Available: "+(0,e.toDisplayString)(n.safeLength(o.periods)),1),(0,e.createElementVNode)("li",null,"Total School Days Available: "+(0,e.toDisplayString)(n.safeLength(o.schoolDays)),1)]),(0,e.createElementVNode)("button",{onClick:t[14]||(t[14]=e=>{n.showNonInstructional=!0,n.focusedPeriodId=null}),class:"emergency-show-btn"}," 🚨 Emergency: Show All Data ")])])],2112)),(0,e.createCommentVNode)(" Available Courses for Focused Period "),n.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("div",_e,[(0,e.createElementVNode)("h3",null,"Available Courses for "+(0,e.toDisplayString)(n.getFocusedPeriodName()),1),De,(0,e.createElementVNode)("div",Ve,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleDays,a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a.id,class:"day-courses-column"},[(0,e.createElementVNode)("h4",null,(0,e.toDisplayString)(a.name),1),(0,e.createElementVNode)("div",Ae,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getAvailableCoursesForSlot(a.id,n.focusedPeriodId),o=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:o.id,class:"course-card draggable-course",style:(0,e.normalizeStyle)(n.getCourseCardStyle(o)),onClick:e=>n.assignCourseToSlot(o,a.id,n.focusedPeriodId),title:`Click to assign or drag ${o.name||o.course_name} to schedule`,draggable:!0,"data-course-id":o.id,"data-day-id":a.id,"data-period-id":n.focusedPeriodId,onDragstart:e=>n.handleCourseDragStart(e,o),onDragend:t[15]||(t[15]=e=>n.handleCourseDragEnd(e))},[(0,e.createElementVNode)("div",Be,(0,e.toDisplayString)(o.name||o.course_name||o.title),1),(0,e.createElementVNode)("div",Le,[o.course_code?((0,e.openBlock)(),(0,e.createElementBlock)("small",Me,"Code: "+(0,e.toDisplayString)(o.course_code),1)):(0,e.createCommentVNode)("v-if",!0),o.max_students?((0,e.openBlock)(),(0,e.createElementBlock)("small",ze,"Max: "+(0,e.toDisplayString)(o.max_students),1)):(0,e.createCommentVNode)("v-if",!0),o.subject_name?((0,e.openBlock)(),(0,e.createElementBlock)("small",je,(0,e.toDisplayString)(o.subject_name),1)):(0,e.createCommentVNode)("v-if",!0)])],44,Te))),128)),0===n.safeLength(n.getAvailableCoursesForSlot(a.id,n.focusedPeriodId))?((0,e.openBlock)(),(0,e.createElementBlock)("div",Oe," No courses available for this day/period ")):(0,e.createCommentVNode)("v-if",!0)])]))),128))]),(0,e.createCommentVNode)(" No Preferred Days Courses Panel "),n.safeLength(n.getNoPreferredDaysCourses())>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",Pe,[$e,Re,(0,e.createElementVNode)("div",Fe,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getNoPreferredDaysCourses(),a=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`no-pref-${a.id}`,class:"course-card",style:(0,e.normalizeStyle)(n.getCourseCardStyle(a)),onClick:e=>n.assignCourseToFocusedSlot(a),title:`${a.name||a.course_name} - Can be scheduled on any day`},[(0,e.createElementVNode)("div",Ue,(0,e.toDisplayString)(a.name||a.course_name||a.title),1),(0,e.createElementVNode)("div",Ge,[a.course_code?((0,e.openBlock)(),(0,e.createElementBlock)("small",qe,"Code: "+(0,e.toDisplayString)(a.course_code),1)):(0,e.createCommentVNode)("v-if",!0),a.max_students?((0,e.openBlock)(),(0,e.createElementBlock)("small",Ye,"Max: "+(0,e.toDisplayString)(a.max_students),1)):(0,e.createCommentVNode)("v-if",!0),a.subject_name?((0,e.openBlock)(),(0,e.createElementBlock)("small",Ze,(0,e.toDisplayString)(a.subject_name),1)):(0,e.createCommentVNode)("v-if",!0),He])],12,We))),128))])])):(0,e.createCommentVNode)("v-if",!0)])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Grade Statistics Component - Now integrated into main grid above ")]),(0,e.createCommentVNode)(" Teacher/Room Selection Modal "),n.showTeacherRoomModal&&n.modalCourseData?((0,e.openBlock)(),(0,e.createBlock)(l,{key:0,courseId:n.modalCourseData.courseId,courseName:n.modalCourseData.courseName,dayId:n.modalCourseData.dayId,periodId:n.modalCourseData.periodId,draftId:o.draftId,schoolId:o.schoolId,teachers:o.teachers,rooms:o.rooms,onSubmit:n.handleTeacherRoomSubmit,onCancel:n.handleTeacherRoomCancel},null,8,["courseId","courseName","dayId","periodId","draftId","schoolId","teachers","rooms","onSubmit","onCancel"])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Course Selection Modal "),n.showCourseSelectionModal&&n.courseSelectionData?((0,e.openBlock)(),(0,e.createBlock)(d,{key:1,dayId:n.courseSelectionData.dayId,dayName:n.courseSelectionData.dayName,periodId:n.courseSelectionData.periodId,periodName:n.courseSelectionData.periodName,availableCourses:n.courseSelectionData.availableCourses,onSubmit:n.handleCourseSelectionSubmit,onCancel:n.handleCourseSelectionCancel},null,8,["dayId","dayName","periodId","periodName","availableCourses","onSubmit","onCancel"])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Assignment Context Menu "),n.contextMenu.show?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:"context-menu",style:(0,e.normalizeStyle)({left:n.contextMenu.x+"px",top:n.contextMenu.y+"px"}),onClick:t[18]||(t[18]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createElementVNode)("div",{class:"context-menu-item",onClick:t[16]||(t[16]=(...e)=>n.editAssignmentFromContext&&n.editAssignmentFromContext(...e))},(0,e.toDisplayString)(o.isReadOnly?"📄 View Assignment Details":"✏️ Edit Assignment"),1),(0,e.createElementVNode)("div",{class:"context-menu-item delete",onClick:t[17]||(t[17]=(...e)=>n.deleteAssignmentFromContext&&n.deleteAssignmentFromContext(...e))},(0,e.toDisplayString)(o.isReadOnly?"🔍 Test Delete Event":"🗑️ Delete Assignment"),1)],4)):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Context Menu Backdrop "),n.contextMenu.show?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:3,class:"context-menu-backdrop",onClick:t[19]||(t[19]=(...e)=>n.closeContextMenu&&n.closeContextMenu(...e))})):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Inline Assignment Editor (rendered at top level to avoid positioning conflicts) "),n.editingAssignment?((0,e.openBlock)(),(0,e.createBlock)(i,{key:4,assignment:n.editingAssignment,courses:o.courses,teachers:o.teachers,classes:o.classes,rooms:o.rooms,subjects:o.subjects,onSave:n.saveInlineEdit,onCancel:n.cancelInlineEdit,onDelete:n.deleteInlineAssignment,onEditCourse:n.handleCourseEdit},null,8,["assignment","courses","teachers","classes","rooms","subjects","onSave","onCancel","onDelete","onEditCourse"])):(0,e.createCommentVNode)("v-if",!0)],64)}],["__scopeId","data-v-28a7eaa1"]])},props:{content:{type:Object,required:!0,default:()=>({schoolId:null,draftId:null,publishedBy:null,periods:[],courses:[],teachers:[],classes:[],rooms:[],schoolDays:[],draftSchedules:[],liveSchedules:[],subjects:[],emitDropEvents:!1,isLiveMode:!1})},wwElementState:{type:Object,required:!0},wwEditorState:{type:Object,required:!0}},setup(a,{emit:t}){const o=(0,e.ref)(!1),n=(0,e.ref)(!1),r=(0,e.ref)(!1),s=(0,e.ref)(!1),l=(0,e.ref)([]),d=(0,e.ref)({dayId:null,periodId:null,period:null,assignments:[],conflicts:[]}),i=(0,e.computed)(()=>a.content.schoolId||"No School ID"),c=(0,e.computed)(()=>a.content.draftId||"No Draft ID"),u=(0,e.computed)(()=>a.content.publishedBy||null),m=(0,e.computed)(()=>{const e=function(e){const a=rt(e);return lt(a)?a.map((e,a)=>{const t=e.block_number||e.blocknumber||a+1;let o=e.label||e.name_de||e.name||`Period ${t}`,n=e.time;e.start_time&&e.end_time?n=`${e.start_time} - ${e.end_time}`:(e.start_time||e.end_time)&&(n=e.start_time||e.end_time);let r=!0;if(e.block_type)r=!["break","pause","lunch","recess","assembly","flexband","frühdienst","hofpause","before_school"].includes(e.block_type.toLowerCase());else if("optional"===e.attendance_requirement)r=!1;else if(o&&"string"==typeof o){const e=o.toLowerCase();r=!["break","pause","lunch","flexband","frühdienst","hofpause"].some(a=>e.includes(a))}const s=e.id||`period-${t}`;return{...e,id:s,blockNumber:Number(t),label:o,name:o,time:n||`${t}. Period`,is_instructional:void 0!==e.is_instructional?e.is_instructional:r,type:e.block_type||e.type||(r?"lesson":"break"),block_number:Number(t)}}).sort((e,a)=>e.blockNumber-a.blockNumber):[]}(a.content.periods);return lt(e)?e:(console.log("📋 [Periods] No periods data available"),[])}),p=(0,e.computed)(()=>{const e=rt(a.content.courses);return lt(e)||console.log("🎯 [wwElement] Courses processing: no data available"),e.map((e,a)=>ct(e,a))}),f=(0,e.computed)(()=>{const e=rt(a.content.teachers);return lt(e)||console.log("👥 [wwElement] Teachers processing: no data available"),e}),g=(0,e.computed)(()=>{const e=rt(a.content.classes);return lt(e)||console.log("🏫 [wwElement] Classes processing: no data available"),e}),v=(0,e.computed)(()=>{const e=rt(a.content.rooms);return lt(e)||console.log("🏠 [wwElement] Rooms processing: no data available"),e}),h=(0,e.computed)(()=>{const e=rt(a.content.schoolDays);if(!lt(e))return console.log("📅 [wwElement] SchoolDays processing: no data available"),[];const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map((e,a)=>{const o=e.name||e.name_en||e.day_name||t[a]||`Day ${a+1}`;return{...e,id:e.day_id||e.id,name:o,date:e.date||e.day_date||null,is_active:void 0===e.is_active||e.is_active,day_number:e.day_number||a+1,day_id:e.day_id||e.id}})}),b=(0,e.computed)(()=>{if(!a.content||!a.content.draftSchedules)return[];const e=rt(a.content.draftSchedules);return lt(e)||console.log("📝 [wwElement] Draft Schedules processing: no data available"),e}),y=(0,e.computed)(()=>{const e=rt(a.content.liveSchedules);return lt(e)||console.log("📺 [wwElement] Live Schedules processing: no data available"),e}),x=(0,e.computed)(()=>{const e=rt(a.content.subjects);return lt(e)||console.log("📚 [wwElement] Subjects processing: no data available"),e}),C=(0,e.computed)(()=>{const e=a.content.isLiveMode,t=!0===e||"true"===e;return console.log("🔄 [wwElement] isLiveMode evaluation:",{rawValue:e,type:typeof e,computed:t,hasContent:!!a.content,contentIsLiveMode:a.content?.isLiveMode}),t}),k=(0,e.computed)(()=>!!u.value),S=(0,e.computed)(()=>dt(l.value)>0),E=(0,e.computed)(()=>function(e){const a=[],t=Date.now(),o=new Map;return e.forEach((e,a)=>{const t=`${e.day_id}-${e.period_id}`;o.has(t)||o.set(t,[]),o.get(t).push({...e,index:a})}),o.forEach((e,o)=>{if(dt(e)<2)return;const[n,r]=o.split("-").map(Number),s=new Map;e.forEach(e=>{e.teacher_ids?.forEach(a=>{s.has(a)||s.set(a,[]),s.get(a).push(e)})}),s.forEach((e,s)=>{dt(e)>1&&a.push({id:`${t}-teacher-${s}-${o}`,type:"teacher",severity:"high",day_id:n,period_id:r,affected_teachers:[s],affected_courses:e.map(e=>e.course_id),message:`Teacher is assigned to ${dt(e)} courses at the same time`,auto_resolvable:!1})});const l=new Map;e.forEach(e=>{e.room_id&&(l.has(e.room_id)||l.set(e.room_id,[]),l.get(e.room_id).push(e))}),l.forEach((e,s)=>{dt(e)>1&&a.push({id:`${t}-room-${s}-${o}`,type:"room",severity:"high",day_id:n,period_id:r,affected_rooms:[s],affected_courses:e.map(e=>e.course_id),message:`Room is booked for ${dt(e)} courses at the same time`,auto_resolvable:!0})});const d=new Map;e.forEach(e=>{e.class_id&&(d.has(e.class_id)||d.set(e.class_id,[]),d.get(e.class_id).push(e))}),d.forEach((e,s)=>{dt(e)>1&&a.push({id:`${t}-class-${s}-${o}`,type:"class",severity:"medium",day_id:n,period_id:r,affected_classes:[s],affected_courses:e.map(e=>e.course_id),message:`Class has ${dt(e)} overlapping assignments`,auto_resolvable:!1})})}),a}(b.value)),I=(0,e.computed)(()=>{if(!d.value.dayId||!d.value.periodId)return p.value;const e=d.value.dayId,a=d.value.periodId;return e&&a&&console.log("🎯 [wwElement] availableCoursesForSlot filtering:",{currentDayId:e,currentPeriodId:a,totalCourses:dt(p.value)}),p.value.filter(t=>{if(0===dt(t.possibleSlots))return!0;const o=t.possibleSlots.some(t=>t.dayId===e&&t.periodId===a);return o&&console.log("  ✅ Available course:",{courseName:t.name,possibleSlots:t.possibleSlots}),o})});function N(){const e=JSON.stringify(b.value);l.value.push(e),dt(l.value)>10&&l.value.shift()}function w(){o.value=!1,d.value={dayId:null,periodId:null,period:null,assignments:[],conflicts:[],preSelectedCourse:null}}function _(e){t("trigger-event",{name:"updateDraftSchedules",event:{draftSchedules:e}})}async function D(){s.value=!0;try{t("trigger-event",{name:"saveDraft",event:{draftId:c.value,schedules:b.value,timestamp:(new Date).toISOString(),action:"save_draft"}}),t("save-draft-external",{draftId:c.value,schedules:b.value,timestamp:(new Date).toISOString()}),await new Promise(e=>setTimeout(e,1e3)),console.log("💾 [wwElement] Draft saved successfully")}catch(e){console.error("❌ [wwElement] Error saving draft:",e)}finally{s.value=!1}}let V;return(0,e.watch)(b,()=>{k.value||(clearTimeout(V),V=setTimeout(()=>{D()},2e3))},{deep:!0}),(0,e.onMounted)(()=>{console.log("🚀 [wwElement] Component mounted - Course Scheduler loaded successfully")}),(0,e.watch)(()=>a.content,(e,a)=>{e&&a&&(e?.periods?.length!==a?.periods?.length||e?.schoolDays?.length!==a?.schoolDays?.length||e?.courses?.length!==a?.courses?.length)&&console.log("🔄 [wwElement] Content structure changed:",{periods:e?.periods?.length||0,schoolDays:e?.schoolDays?.length||0,courses:e?.courses?.length||0})},{deep:!0}),{schoolId:i,draftId:c,publishedBy:u,periods:m,courses:p,teachers:f,classes:g,rooms:v,schoolDays:h,draftSchedules:b,liveSchedules:y,subjects:x,isLiveMode:C,showAssignmentModal:o,showConflicts:n,showTestData:r,selectedCell:d,isSaving:s,isReadOnly:k,canUndo:S,allConflicts:E,availableCoursesForSlot:I,handleCellClick:function({dayId:e,periodId:a,period:t,mode:n,preSelectedCourse:r}){if(k.value)return;const s=b.value.filter(t=>t.day_id===e&&t.period_id===a),l=E.value.filter(t=>t.day_id===e&&t.period_id===a);d.value={dayId:e,periodId:a,period:t,assignments:s,conflicts:l,preSelectedCourse:r},o.value=!0},closeAssignmentModal:w,addAssignment:function(e){N(),_([...b.value,e]),w()},editAssignment:function(e){w(),t("edit-assignment-requested",e)},removeAssignment:function(e){N(),a.content.emitDropEvents&&nt(t,{schoolId:a.content.schoolId,draftId:a.content.draftId,dayId:e.day_id,periodId:e.period_id,assignmentId:e.id,courseId:e.course_id,courseName:e.course_name||e.display_cell||""}),_(b.value.filter(a=>!(a.day_id===e.day_id&&a.period_id===e.period_id&&a.course_id===e.course_id&&a.class_id===e.class_id)))},updateAssignments:function(e){if("move"===e.action&&e.assignment){const a=[...b.value],t=a.findIndex(a=>a.id===e.assignment.id);if(-1!==t){const o={...a[t],day_id:e.toDayId,period_id:e.toPeriodId,day_name_de:h.value.find(a=>a.id===e.toDayId)?.name_de,day_name_en:h.value.find(a=>a.id===e.toDayId)?.name_en};a[t]=o,l.value.push(JSON.stringify(b.value)),_(a),console.log("✅ [DragDrop] Assignment moved successfully:",{assignmentId:e.assignment.id,from:`${e.fromDayId}-${e.fromPeriodId}`,to:`${e.toDayId}-${e.toPeriodId}`})}else console.warn("⚠️ [DragDrop] Could not find assignment to move:",e.assignment.id)}else _(e)},undo:function(){if(0===dt(l.value))return;const e=l.value.pop();_(JSON.parse(e))},saveDraft:D,handleAssignmentDetails:function(e){t("trigger-event",{name:"scheduler:assignment-details",event:{assignment:e,courseId:e.course_id||"",courseName:e.course_name||e.display_cell||"",courseCode:e.course_code||"",teacherIds:e.teacher_ids||[],roomId:e.room_id||null,dayId:e.day_id||0,periodId:e.period_id||"",timestamp:(new Date).toISOString()}})},handleCourseEdit:function(e){t("trigger-event",{name:"scheduler:course-edit",event:{courseId:e.courseId||"",courseName:e.courseName||"",courseCode:e.courseCode||"",source:e.source||"inline-editor",timestamp:(new Date).toISOString()}})},handleToggleNonInstructional:function(e){t("trigger-event",{name:"toggleNonInstructional",event:{showNonInstructional:e}})},handleToggleLessonSchedules:function(e){t("trigger-event",{name:"toggleLessonSchedules",event:{showLessonSchedules:e}})},handlePeriodFocusChanged:function(e){t("trigger-event",{name:"periodFocusChanged",event:{focusedPeriodId:e}})},handleFilterYear:function(e){t("trigger-event",{name:"filterYear",event:{selectedYear:e}})},handleSchedulerDrop:function(e){const a={schoolId:e?.schoolId||null,draftId:e?.draftId||null,dayId:e?.dayId||0,periodId:e?.periodId||"",courseId:e?.courseId||"",courseName:e?.courseName||"",courseCode:e?.courseCode||"",teacherIds:Array.isArray(e?.teacherIds)?e.teacherIds:[],primaryTeacherId:e?.primaryTeacherId||null,roomId:e?.roomId||null,source:e?.source||"drag-drop",timestamp:e?.timestamp||(new Date).toISOString(),...void 0!==e?.fromDayId&&{fromDayId:e.fromDayId},...void 0!==e?.fromPeriodId&&{fromPeriodId:e.fromPeriodId},...void 0!==e?.action&&{action:e.action}};console.log("🚀 [WeWeb Event] scheduler:drop - Emitting trigger-event with data:",a);try{t("trigger-event",{name:"scheduler:drop",event:a}),console.log("✅ [WeWeb Event] scheduler:drop emitted successfully")}catch(e){console.error("❌ [WeWeb Event] scheduler:drop emission failed:",e)}},handleSchedulerDragStart:function(e){const a={courseId:e?.courseId||"",courseName:e?.courseName||"",courseCode:e?.courseCode||"",source:e?.source||"drag-start",timestamp:e?.timestamp||(new Date).toISOString()};console.log("🚀 [WeWeb Event] scheduler:drag-start - Emitting trigger-event with data:",a);try{t("trigger-event",{name:"scheduler:drag-start",event:a}),console.log("✅ [WeWeb Event] scheduler:drag-start emitted successfully")}catch(e){console.error("❌ [WeWeb Event] scheduler:drag-start emission failed:",e)}},handleSchedulerDragEnd:function(e){const a={courseId:e?.courseId||"",courseName:e?.courseName||"",courseCode:e?.courseCode||"",success:void 0!==e?.success&&e.success,source:e?.source||"drag-end",timestamp:e?.timestamp||(new Date).toISOString()};console.log("🚀 [WeWeb Event] scheduler:drag-end - Emitting trigger-event with data:",a);try{t("trigger-event",{name:"scheduler:drag-end",event:a}),console.log("✅ [WeWeb Event] scheduler:drag-end emitted successfully")}catch(e){console.error("❌ [WeWeb Event] scheduler:drag-end emission failed:",e)}},testEventEmission:function(){console.log("🧪 [WeWeb Event Test] ================================="),console.log("🧪 [WeWeb Event Test] Manual scheduler:drop event test"),console.log("🧪 [WeWeb Event Test] =================================");const e={schoolId:content.value?.schoolId||null,draftId:content.value?.draftId||null,dayId:1,periodId:"test-period-id",courseId:"test-course-id",courseName:"Test Course",courseCode:"TEST101",source:"manual-test",timestamp:(new Date).toISOString()};console.log("📋 [WeWeb Event Test] Test event data:",e);try{console.log("🚀 [WeWeb Event Test] Attempting to emit scheduler:drop..."),t("trigger-event",{name:"scheduler:drop",event:e}),console.log("✅ [WeWeb Event Test] ✅ SUCCESS: scheduler:drop trigger-event emitted!"),console.log("📌 [WeWeb Event Test] Event data should be accessible directly in workflows")}catch(e){console.error("❌ [WeWeb Event Test] scheduler:drop test failed:",e)}},navigateToConflict:function(e){d.value={dayId:e.day_id,periodId:e.period_id,period:m.value.find(a=>a.id===e.period_id),assignments:b.value.filter(a=>a.day_id===e.day_id&&a.period_id===e.period_id),conflicts:[e]},o.value=!0,n.value=!1},applySuggestion:function(e){t("trigger-event",{name:"applySuggestion",event:{suggestion:e}})},ignoreConflict:function(e){t("trigger-event",{name:"ignoreConflict",event:{conflictId:e.id}})},autoResolveConflicts:function(){t("trigger-event",{name:"autoResolveConflicts",event:{conflicts:E.value.filter(e=>e.auto_resolvable)}})},emitTestEvent:function(){try{t("element-event",{name:"scheduler:drop",event:"scheduler:drop",data:{message:"Test WeWeb element event from Course Scheduler!",timestamp:(new Date).toISOString(),testData:{periods:dt(m.value),courses:dt(p.value),teachers:dt(f.value),classes:dt(g.value),rooms:dt(v.value),draftSchedules:dt(b.value),conflicts:dt(E.value),isReadOnly:k.value}}}),console.log("✅ Test WeWeb element event emitted successfully!"),alert("Test WeWeb element event emitted successfully!")}catch(e){console.error("❌ Failed to emit test WeWeb element event:",e),alert("Error emitting WeWeb element event: "+e.message)}},logCurrentData:function(){if(console.log("🐛 [wwElement] === COMPLETE DATA DUMP ==="),console.log("Raw content object:",a.content),console.log("School ID:",i.value),console.log("Draft ID:",c.value),console.log("Published By:",u.value),console.log("📅 PERIODS ANALYSIS:"),console.log("  Raw periods:",a.content.periods),console.log("  Processed periods:",m.value),dt(m.value)>0){const e=m.value[0];console.log("  Sample period object keys:",Object.keys(e)),console.log("  Sample period values:",e)}if(console.log("🗓️ SCHOOL DAYS ANALYSIS:"),console.log("  Raw schoolDays:",a.content.schoolDays),console.log("  Processed schoolDays:",h.value),dt(h.value)>0){const e=h.value[0];console.log("  Sample day object keys:",Object.keys(e)),console.log("  Sample day values:",e)}console.log("Courses:",dt(p.value),p.value.slice(0,2)),console.log("Teachers:",dt(f.value),f.value.slice(0,2)),console.log("Classes:",dt(g.value),g.value.slice(0,2)),console.log("Rooms:",dt(v.value),v.value.slice(0,2)),console.log("Draft Schedules:",dt(b.value),b.value.slice(0,2)),console.log("Live Schedules:",dt(y.value),y.value.slice(0,2)),console.log("Is Read Only:",k.value),console.log("Can Undo:",S.value),console.log("All Conflicts:",dt(E.value),E.value),console.log("🐛 [wwElement] === END COMPLETE DATA DUMP ===")},safeLength:dt,safeArray:it}}};t(263);const pt=(0,ha.Z)(mt,[["render",function(a,t,y,x,C,k){const S=(0,e.resolveComponent)("SchedulerGrid"),E=(0,e.resolveComponent)("AssignmentModal"),I=(0,e.resolveComponent)("ConflictPanel");return(0,e.openBlock)(),(0,e.createElementBlock)("div",o,[(0,e.createCommentVNode)(" Header with Planning Mode Controls "),(0,e.createElementVNode)("div",n,[r,(0,e.createElementVNode)("div",s,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mode-indicator",{"read-only":x.isReadOnly}])},(0,e.toDisplayString)(x.isReadOnly?"Published Schedule (Read-Only) - Event Testing Available":"Planning Mode"),3),(0,e.createElementVNode)("div",l,[(0,e.createCommentVNode)(" Always show test button for WeWeb event testing "),(0,e.createElementVNode)("button",{onClick:t[0]||(t[0]=(...e)=>x.testEventEmission&&x.testEventEmission(...e)),class:"test-btn",style:{background:"#007bff",color:"white",border:"none",padding:"8px 12px","border-radius":"4px","margin-right":"8px"},title:"Test WeWeb events (always available)"}," 🧪 Test Event "),(0,e.createCommentVNode)(" Only show editing controls when not read-only "),x.isReadOnly?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",d,[(0,e.createElementVNode)("button",{onClick:t[1]||(t[1]=(...e)=>x.undo&&x.undo(...e)),disabled:!x.canUndo,class:"undo-btn"},"↶ Undo",8,i),(0,e.createElementVNode)("button",{onClick:t[2]||(t[2]=e=>x.showConflicts=!x.showConflicts),class:(0,e.normalizeClass)(["conflicts-btn",{active:x.showConflicts}])}," ⚠️ Conflicts ("+(0,e.toDisplayString)(x.safeLength(x.allConflicts))+") ",3)]))])])]),(0,e.createCommentVNode)(" Main Scheduler Grid "),(0,e.createElementVNode)("div",c,[(0,e.createVNode)(S,{periods:x.periods,"school-days":x.schoolDays,courses:x.courses,teachers:x.teachers,classes:x.classes,rooms:x.rooms,subjects:x.subjects,"draft-schedules":x.draftSchedules,"live-schedules":x.liveSchedules,conflicts:x.allConflicts,"can-undo":x.canUndo,"is-saving":x.isSaving,"is-read-only":x.isReadOnly,"is-live-mode":x.isLiveMode,"show-statistics":!0,"school-id":y.content.schoolId,"draft-id":y.content.draftId,"parent-emit":a.$emit,"emit-drop-events":!0,onCellClick:x.handleCellClick,onAssignmentDetails:x.handleAssignmentDetails,onCourseEdit:x.handleCourseEdit,onToggleNonInstructional:x.handleToggleNonInstructional,onToggleLessonSchedules:x.handleToggleLessonSchedules,onPeriodFocusChanged:x.handlePeriodFocusChanged,onFilterYear:x.handleFilterYear,onSchedulerDrop:x.handleSchedulerDrop,onSchedulerDragStart:x.handleSchedulerDragStart,onSchedulerDragEnd:x.handleSchedulerDragEnd,onUndoLast:x.undo,onSaveDraft:x.saveDraft,onUpdateAssignments:x.updateAssignments},null,8,["periods","school-days","courses","teachers","classes","rooms","subjects","draft-schedules","live-schedules","conflicts","can-undo","is-saving","is-read-only","is-live-mode","school-id","draft-id","parent-emit","onCellClick","onAssignmentDetails","onCourseEdit","onToggleNonInstructional","onToggleLessonSchedules","onPeriodFocusChanged","onFilterYear","onSchedulerDrop","onSchedulerDragStart","onSchedulerDragEnd","onUndoLast","onSaveDraft","onUpdateAssignments"])]),(0,e.createCommentVNode)(" Assignment Modal "),(0,e.createVNode)(E,{visible:x.showAssignmentModal,"day-id":x.selectedCell.dayId,"period-id":x.selectedCell.periodId,period:x.selectedCell.period,courses:x.availableCoursesForSlot,teachers:x.teachers,classes:x.classes,rooms:x.rooms,subjects:x.subjects,"school-days":x.schoolDays,"existing-assignments":x.selectedCell.assignments,conflicts:x.selectedCell.conflicts,"is-read-only":x.isReadOnly,"pre-selected-course":x.selectedCell.preSelectedCourse,onClose:x.closeAssignmentModal,onAddAssignment:x.addAssignment,onEditAssignment:x.editAssignment,onRemoveAssignment:x.removeAssignment},null,8,["visible","day-id","period-id","period","courses","teachers","classes","rooms","subjects","school-days","existing-assignments","conflicts","is-read-only","pre-selected-course","onClose","onAddAssignment","onEditAssignment","onRemoveAssignment"]),(0,e.createCommentVNode)(" Conflict Panel "),x.showConflicts&&x.safeLength(x.allConflicts)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",u,[(0,e.createVNode)(I,{visible:x.showConflicts,conflicts:x.allConflicts,courses:x.courses,teachers:x.teachers,classes:x.classes,rooms:x.rooms,periods:x.periods,"school-days":x.schoolDays,onClose:t[3]||(t[3]=e=>x.showConflicts=!1),onNavigateToConflict:x.navigateToConflict,onApplySuggestion:x.applySuggestion,onIgnoreConflict:x.ignoreConflict,onAutoResolveAll:x.autoResolveConflicts},null,8,["visible","conflicts","courses","teachers","classes","rooms","periods","school-days","onNavigateToConflict","onApplySuggestion","onIgnoreConflict","onAutoResolveAll"])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Hidden test section for development "),x.showTestData?((0,e.openBlock)(),(0,e.createElementBlock)("div",m,[(0,e.createElementVNode)("button",{onClick:t[4]||(t[4]=e=>x.showTestData=!1),class:"close-test"},"×"),p,(0,e.createElementVNode)("div",f,[(0,e.createElementVNode)("div",null,[g,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.schoolId),1)]),(0,e.createElementVNode)("div",null,[v,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.draftId),1)]),(0,e.createElementVNode)("div",null,[h,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.publishedBy||"Not Published"),1)]),(0,e.createElementVNode)("div",null,[b,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(x.safeLength(x.periods))+" periods, "+(0,e.toDisplayString)(x.safeLength(x.courses))+" courses, "+(0,e.toDisplayString)(x.safeLength(x.teachers))+" teachers ",1)]),(0,e.createElementVNode)("button",{onClick:t[5]||(t[5]=(...e)=>x.emitTestEvent&&x.emitTestEvent(...e)),class:"test-button"},"Test Event Emission")])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Show test data toggle "),(0,e.createElementVNode)("button",{onClick:t[6]||(t[6]=e=>x.showTestData=!x.showTestData),class:"test-toggle",title:"Toggle test data"},"🧪"),(0,e.createCommentVNode)(" Debug data button "),(0,e.createElementVNode)("button",{onClick:t[7]||(t[7]=(...e)=>x.logCurrentData&&x.logCurrentData(...e)),class:"debug-toggle",title:"Log current data to console"},"🐛")])}],["__scopeId","data-v-5d6093bf"]]),ft="course-scheduler",gt={options:{lazyHydrate:!0},editor:{label:{en:"Course Scheduler"},icon:"calendar",bubble:{icon:"calendar"}},properties:{schoolId:{label:{en:"School ID",fr:"ID École"},type:"Text",options:{placeholder:"Enter school UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the school for which the schedule is being created"}},draftId:{label:{en:"Draft ID",fr:"ID Brouillon"},type:"Text",options:{placeholder:"Enter draft UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the current draft being edited"}},publishedBy:{label:{en:"Published By",fr:"Publié par"},type:"Text",options:{placeholder:"Enter user UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the user publishing the schedule, or null if not published"}},periods:{label:{en:"Periods",fr:"Périodes"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of period objects with id, name, start_time, end_time properties"}},courses:{label:{en:"Courses",fr:"Cours"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of course objects with id, name, color properties"}},teachers:{label:{en:"Teachers",fr:"Enseignants"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of teacher objects with id, name, color properties"}},classes:{label:{en:"Classes",fr:"Classes"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of class objects with id, name, color properties"}},rooms:{label:{en:"Rooms",fr:"Salles"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of room objects with id, name properties"}},subjects:{label:{en:"Subjects",fr:"Matières"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of subject objects with id, name properties"}},schoolDays:{label:{en:"School Days",fr:"Jours scolaires"},type:"Array",bindable:!0,defaultValue:[{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"}],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of school day objects with id, name properties (1=Sunday to 7=Saturday)"}},draftSchedules:{label:{en:"Draft Schedules",fr:"Brouillons horaires"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of draft schedule entries with day_id, period_id/time, course_id, teacher_ids, etc."}},liveSchedules:{label:{en:"Live Schedules",fr:"Horaires publiés"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of published schedule entries for reference/conflict checking"}},isLiveMode:{label:{en:"Live Mode",fr:"Mode en direct"},type:"OnOff",bindable:!0,defaultValue:!1,bindingValidation:{validations:[{type:"boolean"}],tooltip:"Controls whether the scheduler shows live schedules (true) or draft schedules (false)"}}},events:{"scheduler:drop":{label:{en:"On course dropped",fr:"Lors du dépôt de cours"},tooltip:{en:"Triggered when a course is dropped onto the schedule grid",fr:"Déclenché quand un cours est déposé sur la grille horaire"}},"scheduler:drag-start":{label:{en:"On drag start",fr:"Début du glissement"},tooltip:{en:"Triggered when dragging a course begins",fr:"Déclenché quand le glissement d'un cours commence"}},"scheduler:drag-end":{label:{en:"On drag end",fr:"Fin du glissement"},tooltip:{en:"Triggered when dragging ends (success or failure)",fr:"Déclenché quand le glissement se termine (succès ou échec)"}},"scheduler:remove":{label:{en:"On assignment removed",fr:"Assignation supprimée"},tooltip:{en:"Triggered when a course assignment is deleted",fr:"Déclenché quand une assignation de cours est supprimée"}}},triggerEvents:[{name:"scheduler:drop",label:{en:"On Scheduler Drop"},event:{schoolId:null,draftId:null,dayId:0,periodId:"",courseId:"",courseName:"",courseCode:"",teacherIds:[],primaryTeacherId:null,roomId:null,source:"modal-assignment",timestamp:"",fromDayId:null,fromPeriodId:null,action:null}},{name:"scheduler:drag-start",label:{en:"On Drag Start"},event:{courseId:"",courseName:"",courseCode:"",source:"drag-start",timestamp:""}},{name:"scheduler:drag-end",label:{en:"On Drag End"},event:{courseId:"",courseName:"",courseCode:"",source:"drag-end",success:!1,timestamp:""}},{name:"scheduler:cell-click",label:{en:"On Cell Click"},event:{dayId:0,periodId:"",periodName:"",mode:"add",preSelectedCourse:null,timestamp:""}},{name:"scheduler:assignment-details",label:{en:"On Assignment Details"},event:{assignment:{},courseId:"",courseName:"",courseCode:"",teacherIds:[],roomId:null,dayId:0,periodId:"",timestamp:""}},{name:"scheduler:course-edit",label:{en:"On Course Edit"},event:{courseId:"",courseName:"",courseCode:"",source:"inline-editor",timestamp:""}},{name:"scheduler:remove",label:{en:"On Assignment Remove"},event:{schoolId:null,draftId:null,dayId:0,periodId:"",assignmentId:"",courseId:"",courseName:"",source:"remove",timestamp:""}}]};function vt(){return!!window.addWwComponent&&(window.addWwComponent({name:ft,version:"1.0.0",content:pt,type:"wwobject",wwDev:!1,port:void 0,config:gt}),!0)}if(0!==ft.indexOf("__")&&(gt.name=ft),gt.wwDev=!1,gt.port=void 0,!vt()){const e=setInterval(function(){vt()&&clearInterval(e)},10)}})()})();