(()=>{var e={222:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(698),n=a.n(o),s=a(58),l=a.n(s)()(n());l.push([e.id,".assignment-modal-overlay[data-v-fdab452a]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000}.assignment-modal[data-v-fdab452a]{background:#fff;border-radius:8px;width:90%;max-width:900px;max-height:90vh;overflow-y:auto;box-shadow:0 4px 20px rgba(0,0,0,.15)}.modal-header[data-v-fdab452a]{padding:16px 20px;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:#fff;z-index:1}.modal-header h2[data-v-fdab452a]{margin:0;color:#333;font-size:1.3em}.close-button[data-v-fdab452a]{background:none;border:none;font-size:1.5em;cursor:pointer;color:#999;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.period-info[data-v-fdab452a]{padding:16px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;display:flex;gap:24px;flex-wrap:wrap}.info-item[data-v-fdab452a]{font-size:.9em}.existing-assignments[data-v-fdab452a],.available-courses[data-v-fdab452a]{padding:20px}.existing-assignments h3[data-v-fdab452a],.available-courses h3[data-v-fdab452a]{margin:0 0 16px 0;color:#333;font-size:1.1em}.assignment-list[data-v-fdab452a]{display:flex;flex-direction:column;gap:12px;margin-bottom:24px}.assignment-card[data-v-fdab452a]{padding:12px;border:1px solid #e0e0e0;border-radius:6px;position:relative}.assignment-card.has-conflicts[data-v-fdab452a]{border-color:#ff4d4f;background:#fff2f0}.assignment-header[data-v-fdab452a]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.course-name[data-v-fdab452a]{font-weight:600;color:#333;font-size:1em}.assignment-actions[data-v-fdab452a]{display:flex;gap:4px}.edit-btn[data-v-fdab452a],.remove-btn[data-v-fdab452a]{background:none;border:none;cursor:pointer;padding:2px;font-size:.9em;border-radius:3px}.edit-btn[data-v-fdab452a]:hover,.remove-btn[data-v-fdab452a]:hover{background:#f0f0f0}.assignment-details[data-v-fdab452a]{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:8px;margin-bottom:8px}.detail-item[data-v-fdab452a]{font-size:.85em;color:#666}.conflicts-section[data-v-fdab452a]{margin-top:12px;padding:8px;background:#fff2f0;border:1px solid #ffccc7;border-radius:4px}.conflicts-header[data-v-fdab452a]{font-weight:600;color:#ff4d4f;margin-bottom:6px;font-size:.9em}.conflicts-list[data-v-fdab452a]{margin:0;padding-left:20px;font-size:.85em;color:#666}.course-filter[data-v-fdab452a]{display:flex;gap:12px;margin-bottom:16px}.filter-input[data-v-fdab452a],.filter-select[data-v-fdab452a]{padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:.9em}.filter-input[data-v-fdab452a]{flex:1;min-width:200px}.filter-select[data-v-fdab452a]{min-width:150px}.course-grid[data-v-fdab452a]{display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:12px;margin-bottom:16px}.course-card[data-v-fdab452a]{padding:12px;border:1px solid #e0e0e0;border-radius:6px;cursor:pointer;transition:all .2s;position:relative}.course-card[data-v-fdab452a]:hover{transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,.1)}.course-card.available[data-v-fdab452a]{border-color:#52c41a}.course-card.unavailable[data-v-fdab452a]{border-color:#faad14;background:#fffbe6}.course-card.conflict-warning[data-v-fdab452a]{border-color:#ff4d4f}.course-header[data-v-fdab452a]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.course-indicators[data-v-fdab452a]{display:flex;gap:4px}.unavailable-badge[data-v-fdab452a],.conflict-badge[data-v-fdab452a]{font-size:.8em}.course-description[data-v-fdab452a]{font-size:.85em;color:#666;margin-bottom:8px;line-height:1.3}.course-details[data-v-fdab452a]{display:flex;flex-wrap:wrap;gap:12px}.detail-small[data-v-fdab452a]{font-size:.8em;color:#888}.no-courses[data-v-fdab452a]{text-align:center;padding:40px;color:#999;font-style:italic}.quick-assign-form[data-v-fdab452a]{padding:20px;border-top:1px solid #e0e0e0;background:#f8f9fa}.quick-assign-form h3[data-v-fdab452a]{margin:0 0 16px 0;color:#333;font-size:1.1em}.form-grid[data-v-fdab452a]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.form-group[data-v-fdab452a]{margin-bottom:16px}.form-group label[data-v-fdab452a]{display:block;margin-bottom:6px;font-weight:500;color:#333;font-size:.9em}.form-group select[data-v-fdab452a],.form-group input[data-v-fdab452a]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:.9em}.teacher-grid[data-v-fdab452a]{display:grid;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));gap:8px;max-height:120px;overflow-y:auto;padding:8px;border:1px solid #e0e0e0;border-radius:4px;background:#fff}.teacher-checkbox[data-v-fdab452a]{display:flex;align-items:center;gap:6px;font-size:.85em;cursor:pointer;padding:4px;border-radius:3px}.teacher-checkbox[data-v-fdab452a]:hover{background:#f0f0f0}.form-actions[data-v-fdab452a]{display:flex;justify-content:flex-end;gap:12px;margin-top:20px;padding-top:16px;border-top:1px solid #e0e0e0}.cancel-btn[data-v-fdab452a],.confirm-btn[data-v-fdab452a]{padding:8px 16px;border-radius:4px;font-size:.9em;cursor:pointer;transition:all .2s}.cancel-btn[data-v-fdab452a]{background:#fff;border:1px solid #ddd;color:#666}.cancel-btn[data-v-fdab452a]:hover{background:#f0f0f0}.confirm-btn[data-v-fdab452a]{background:#007cba;border:1px solid #007cba;color:#fff}.confirm-btn[data-v-fdab452a]:hover:not(:disabled){background:#005a87}.confirm-btn[data-v-fdab452a]:disabled{background:#a0aee9;cursor:not-allowed}@media(max-width: 768px){.assignment-modal[data-v-fdab452a]{width:95%;max-height:95vh}.period-info[data-v-fdab452a]{flex-direction:column;gap:8px}.course-filter[data-v-fdab452a]{flex-direction:column}.form-grid[data-v-fdab452a]{grid-template-columns:1fr}.course-grid[data-v-fdab452a]{grid-template-columns:1fr}.teacher-grid[data-v-fdab452a]{grid-template-columns:1fr}}",""]);const r=l},580:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(698),n=a.n(o),s=a(58),l=a.n(s)()(n());l.push([e.id,".conflict-panel[data-v-52ced96f]{background:#fff;border:1px solid #ff4d4f;border-radius:6px;box-shadow:0 2px 8px rgba(255,77,79,.15);max-height:500px;display:flex;flex-direction:column}.panel-header[data-v-52ced96f]{padding:12px 16px;background:#fff2f0;border-bottom:1px solid #ffccc7;display:flex;justify-content:space-between;align-items:center}.panel-header h3[data-v-52ced96f]{margin:0;color:#ff4d4f;font-size:1em;display:flex;align-items:center;gap:6px}.conflict-icon[data-v-52ced96f]{font-size:1.1em}.header-actions[data-v-52ced96f]{display:flex;align-items:center;gap:8px}.filter-select[data-v-52ced96f]{padding:4px 8px;border:1px solid #d9d9d9;border-radius:4px;font-size:.85em}.close-button[data-v-52ced96f]{background:none;border:none;font-size:1.2em;cursor:pointer;color:#999;width:24px;height:24px;display:flex;align-items:center;justify-content:center}.panel-content[data-v-52ced96f]{flex:1;overflow-y:auto;padding:0}.no-conflicts[data-v-52ced96f]{padding:40px 20px;text-align:center;color:#52c41a}.no-conflicts-icon[data-v-52ced96f]{font-size:2em;margin-bottom:8px}.no-conflicts h4[data-v-52ced96f]{margin:0 0 8px 0;color:#333}.no-conflicts p[data-v-52ced96f]{margin:0;color:#666;font-size:.9em}.conflicts-list[data-v-52ced96f]{padding:0}.conflict-item[data-v-52ced96f]{padding:16px;border-bottom:1px solid #f0f0f0;transition:background-color .2s}.conflict-item[data-v-52ced96f]:hover{background:#f9f9f9}.conflict-item[data-v-52ced96f]:last-child{border-bottom:none}.conflict-type-critical[data-v-52ced96f]{border-left:4px solid #ff4d4f;background:#fff2f0}.conflict-type-high[data-v-52ced96f]{border-left:4px solid #fa8c16;background:#fff7e6}.conflict-type-medium[data-v-52ced96f]{border-left:4px solid #fadb14;background:#feffe6}.conflict-type-low[data-v-52ced96f]{border-left:4px solid #52c41a;background:#f6ffed}.conflict-header[data-v-52ced96f]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:8px}.conflict-title[data-v-52ced96f]{display:flex;align-items:center;gap:8px}.conflict-type-badge[data-v-52ced96f]{padding:2px 6px;border-radius:3px;font-size:.75em;font-weight:500}.badge-teacher[data-v-52ced96f]{background:#e6f7ff;color:#1890ff}.badge-room[data-v-52ced96f]{background:#f6ffed;color:#52c41a}.badge-class[data-v-52ced96f]{background:#fff7e6;color:#fa8c16}.badge-time[data-v-52ced96f]{background:#fff2f0;color:#ff4d4f}.badge-warning[data-v-52ced96f]{background:#feffe6;color:#fadb14}.conflict-severity[data-v-52ced96f]{font-size:.9em}.conflict-actions[data-v-52ced96f]{display:flex;gap:6px}.navigate-btn[data-v-52ced96f],.suggest-btn[data-v-52ced96f]{padding:2px 6px;border:1px solid #d9d9d9;border-radius:3px;background:#fff;font-size:.75em;cursor:pointer;transition:all .2s}.navigate-btn[data-v-52ced96f]:hover,.suggest-btn[data-v-52ced96f]:hover{background:#f0f0f0;transform:translateY(-1px)}.conflict-description[data-v-52ced96f]{margin-bottom:12px;color:#333;font-size:.9em;line-height:1.4}.conflict-details[data-v-52ced96f]{margin-bottom:12px}.detail-row[data-v-52ced96f]{margin-bottom:6px;font-size:.85em;display:flex;align-items:flex-start;gap:8px}.course-list[data-v-52ced96f],.teacher-list[data-v-52ced96f],.class-list[data-v-52ced96f],.room-list[data-v-52ced96f]{display:flex;flex-wrap:wrap;gap:4px}.course-tag[data-v-52ced96f],.teacher-tag[data-v-52ced96f],.class-tag[data-v-52ced96f],.room-tag[data-v-52ced96f]{padding:2px 6px;border-radius:3px;font-size:.8em;font-weight:500;background:#f0f0f0;color:#333}.conflict-suggestions[data-v-52ced96f]{margin-top:12px;padding:8px;background:#f0f9ff;border:1px solid #bae7ff;border-radius:4px}.suggestions-header[data-v-52ced96f]{font-weight:500;margin-bottom:6px;font-size:.85em;color:#1890ff}.suggestions-list[data-v-52ced96f]{margin:0;padding:0;list-style:none}.suggestion-item[data-v-52ced96f]{display:flex;justify-content:space-between;align-items:center;padding:4px 0;font-size:.8em}.suggestion-text[data-v-52ced96f]{flex:1;color:#666}.apply-suggestion-btn[data-v-52ced96f]{padding:2px 8px;background:#1890ff;color:#fff;border:none;border-radius:3px;font-size:.75em;cursor:pointer}.auto-resolve[data-v-52ced96f]{margin-top:8px;text-align:right}.ignore-btn[data-v-52ced96f]{padding:4px 8px;background:#f0f0f0;border:1px solid #d9d9d9;border-radius:3px;font-size:.8em;cursor:pointer;color:#666}.panel-footer[data-v-52ced96f]{padding:12px 16px;background:#fafafa;border-top:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center}.conflict-summary[data-v-52ced96f]{display:flex;gap:12px;font-size:.8em}.summary-item[data-v-52ced96f]{padding:2px 6px;border-radius:3px;font-weight:500}.summary-item.critical[data-v-52ced96f]{background:#fff2f0;color:#ff4d4f}.summary-item.high[data-v-52ced96f]{background:#fff7e6;color:#fa8c16}.summary-item.medium[data-v-52ced96f]{background:#feffe6;color:#fadb14}.summary-item.low[data-v-52ced96f]{background:#f6ffed;color:#52c41a}.panel-actions[data-v-52ced96f]{display:flex;gap:8px}.auto-resolve-btn[data-v-52ced96f],.export-btn[data-v-52ced96f]{padding:6px 12px;border:1px solid #d9d9d9;border-radius:4px;background:#fff;font-size:.8em;cursor:pointer;transition:all .2s}.auto-resolve-btn[data-v-52ced96f]{background:#1890ff;color:#fff;border-color:#1890ff}.auto-resolve-btn[data-v-52ced96f]:hover,.export-btn[data-v-52ced96f]:hover{transform:translateY(-1px)}@media(max-width: 768px){.panel-header[data-v-52ced96f]{flex-direction:column;gap:8px;align-items:stretch}.header-actions[data-v-52ced96f]{justify-content:space-between}.conflict-header[data-v-52ced96f]{flex-direction:column;gap:8px}.panel-footer[data-v-52ced96f]{flex-direction:column;gap:12px;align-items:stretch}.conflict-summary[data-v-52ced96f]{justify-content:space-around}}",""]);const r=l},680:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(698),n=a.n(o),s=a(58),l=a.n(s)()(n());l.push([e.id,".inline-editor[data-v-0d9016a8]{position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:2px solid #007cba;border-radius:6px;padding:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:100;display:flex;flex-direction:column;gap:4px;font-size:12px}.editor-field[data-v-0d9016a8]{display:flex;align-items:center;gap:4px}.editor-field label[data-v-0d9016a8]{font-weight:bold;min-width:50px;font-size:11px}.editor-select[data-v-0d9016a8]{flex:1;padding:2px 4px;border:1px solid #ddd;border-radius:3px;font-size:11px;background:#fff}.editor-actions[data-v-0d9016a8]{display:flex;gap:4px;margin-top:4px;justify-content:space-between}.save-btn[data-v-0d9016a8],.cancel-btn[data-v-0d9016a8],.delete-btn[data-v-0d9016a8]{padding:4px 8px;border:none;border-radius:3px;font-size:11px;cursor:pointer;font-weight:bold;transition:all .2s}.save-btn[data-v-0d9016a8]{background:#4caf50;color:#fff}.save-btn[data-v-0d9016a8]:hover{background:#45a049}.save-btn[data-v-0d9016a8]:disabled{background:#ccc;cursor:not-allowed}.cancel-btn[data-v-0d9016a8]{background:#f44336;color:#fff}.cancel-btn[data-v-0d9016a8]:hover{background:#da190b}.delete-btn[data-v-0d9016a8]{background:#ff9800;color:#fff}.delete-btn[data-v-0d9016a8]:hover{background:#f57c00}",""]);const r=l},919:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(698),n=a.n(o),s=a(58),l=a.n(s)()(n());l.push([e.id,'.scheduler-grid[data-v-65eedbfa]{display:flex;flex-direction:column;width:100%;border:1px solid #ddd;border-radius:6px;overflow:hidden;background:#fff}.main-grid-container.emergency-mode[data-v-65eedbfa]{border:3px solid #e74c3c;box-shadow:0 0 10px rgba(231,76,60,.3)}.main-grid-container.normal-mode[data-v-65eedbfa]{border:2px solid #27ae60;box-shadow:0 0 5px rgba(39,174,96,.2)}.emergency-recovery-notice[data-v-65eedbfa]{background:#ffe6e6;border:2px solid #e74c3c;padding:12px;margin:8px;border-radius:4px;text-align:center}.emergency-message[data-v-65eedbfa]{color:#c0392b;font-weight:bold}.emergency-recover-btn[data-v-65eedbfa]{background:#e74c3c;color:#fff;border:none;padding:6px 12px;border-radius:4px;margin-left:10px;cursor:pointer;font-size:.9em}.emergency-recover-btn[data-v-65eedbfa]:hover{background:#c0392b}.scheduler-toolbar[data-v-65eedbfa]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f8f9fa;border-bottom:1px solid #ddd;gap:16px;flex-wrap:wrap}.toolbar-section[data-v-65eedbfa]{display:flex;align-items:center;gap:8px;position:relative}.search-input[data-v-65eedbfa]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;width:200px;transition:border-color .2s ease}.search-input[data-v-65eedbfa]:focus{outline:none;border-color:#007cba;box-shadow:0 0 0 2px rgba(0,123,186,.2)}.clear-search-btn[data-v-65eedbfa]{background:#6c757d;color:#fff;border:none;border-radius:50%;width:20px;height:20px;font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;margin-left:-30px;z-index:2}.clear-search-btn[data-v-65eedbfa]:hover{background:#5a6268}.filter-status[data-v-65eedbfa]{margin-left:8px;padding:4px 8px;background:rgba(0,123,186,.1);border:1px solid rgba(0,123,186,.3);border-radius:4px}.filter-tag[data-v-65eedbfa]{display:inline-block;background:#007cba;color:#fff;padding:2px 6px;margin:0 2px;border-radius:3px;font-size:11px}.filter-label[data-v-65eedbfa]{display:flex;align-items:center;gap:6px;font-size:.9em;cursor:pointer}.toolbar-actions[data-v-65eedbfa]{display:flex;gap:8px}.undo-button[data-v-65eedbfa],.save-button[data-v-65eedbfa]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-size:.9em;transition:all .2s}.undo-button[data-v-65eedbfa]:disabled{opacity:.5;cursor:not-allowed}.save-button[data-v-65eedbfa]{background:#007cba;color:#fff;border-color:#007cba}.save-button.saving[data-v-65eedbfa]{opacity:.7}.grid-header[data-v-65eedbfa]{display:flex;background:#f5f5f5;border-bottom:1px solid #ddd;font-weight:600}.period-header-cell[data-v-65eedbfa]{width:140px;padding:12px 8px;border-right:1px solid #ddd;display:flex;align-items:center;justify-content:center}.day-header-cell[data-v-65eedbfa]{flex:1;padding:12px 8px;border-right:1px solid #ddd;text-align:center;display:flex;flex-direction:column;gap:2px}.day-name[data-v-65eedbfa]{font-size:.95em}.day-date[data-v-65eedbfa]{font-size:.8em;color:#666;font-weight:normal}.grid-body[data-v-65eedbfa]{display:flex;flex-direction:column}.grid-row[data-v-65eedbfa]{display:flex;border-bottom:1px solid #ddd;min-height:80px}.grid-row.non-instructional[data-v-65eedbfa]{background:#f8f9fa}.period-label-cell[data-v-65eedbfa]{width:140px;padding:8px;border-right:1px solid #ddd;background:#f9f9f9;display:flex;align-items:center}.period-info[data-v-65eedbfa]{display:flex;flex-direction:column;gap:2px}.period-name[data-v-65eedbfa]{font-weight:500;font-size:.9em}.period-time[data-v-65eedbfa]{font-size:.8em;color:#666}.non-instructional-badge[data-v-65eedbfa]{font-size:.75em;color:#888;background:#e9ecef;padding:2px 4px;border-radius:3px}.schedule-cell[data-v-65eedbfa]{flex:1;border-right:1px solid #ddd;position:relative;cursor:pointer;transition:background-color .2s;min-height:80px}.schedule-cell[data-v-65eedbfa]:hover{background:#f0f7ff}.schedule-cell.has-assignments[data-v-65eedbfa]{background:#e6f7ff}.schedule-cell.multiple-assignments[data-v-65eedbfa]{background:#d6f3ff}.schedule-cell.has-conflicts[data-v-65eedbfa]{background:#fff2f0;border-left:3px solid #ff4d4f}.assignments-container[data-v-65eedbfa]{padding:4px;height:100%;display:flex;flex-direction:column;gap:2px;position:relative}.assignment-item[data-v-65eedbfa]{padding:4px 6px;border-radius:3px;border:1px solid #e0e0e0;position:relative;cursor:pointer;transition:all .2s}.assignment-item[data-v-65eedbfa]:hover{transform:translateX(1px);box-shadow:0 1px 3px rgba(0,0,0,.1)}.assignment-item.has-conflict[data-v-65eedbfa]{border-color:#ff4d4f;background:#fff2f0}.assignment-item.has-deleted-entities[data-v-65eedbfa]{border-color:#faad14;background:#fff7e6}.assignment-item.lesson-schedule[data-v-65eedbfa]{opacity:.6;border-style:dashed;background:#f5f5f5 !important;font-style:italic;font-size:.8em;transform:scale(0.95);margin:1px}.assignment-content[data-v-65eedbfa]{display:flex;flex-direction:column;gap:1px}.course-name[data-v-65eedbfa]{font-weight:500;font-size:.85em;line-height:1.2}.class-name[data-v-65eedbfa],.teacher-names[data-v-65eedbfa],.room-name[data-v-65eedbfa]{font-size:.75em;color:#666;line-height:1.1}.conflict-indicator[data-v-65eedbfa],.deleted-warning[data-v-65eedbfa]{position:absolute;top:2px;right:2px;font-size:.7em}.add-more-button[data-v-65eedbfa]{margin-top:2px;padding:2px 4px;background:#f0f0f0;border:1px dashed #ccc;border-radius:2px;cursor:pointer;font-size:.8em;align-self:stretch}.add-more-button[data-v-65eedbfa]:hover{background:#e0e0e0}.empty-cell[data-v-65eedbfa]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#ccc;font-size:.85em;gap:4px}.add-icon[data-v-65eedbfa]{font-size:20px;opacity:.6}.add-text[data-v-65eedbfa]{opacity:.8}.statistics-panel[data-v-65eedbfa]{padding:16px;background:#f8f9fa;border-top:1px solid #ddd}.statistics-panel h3[data-v-65eedbfa]{margin:0 0 12px 0;color:#333;font-size:1em}.stats-grid[data-v-65eedbfa]{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px}.year-stats[data-v-65eedbfa]{background:#fff;padding:12px;border-radius:4px;border:1px solid #e0e0e0}.year-stats h4[data-v-65eedbfa]{margin:0 0 8px 0;color:#333;font-size:.9em}.stat-item[data-v-65eedbfa]{display:flex;justify-content:space-between;font-size:.85em;margin-bottom:4px}.stat-label[data-v-65eedbfa]{color:#666}.stat-value[data-v-65eedbfa]{font-weight:500;color:#333}.available-courses-panel[data-v-65eedbfa]{padding:16px;background:#f0f8ff;border-top:1px solid #007cba;border-bottom:1px solid #ddd}.available-courses-panel h3[data-v-65eedbfa]{margin:0 0 8px 0;color:#007cba;font-size:1.1em}.focused-period-info[data-v-65eedbfa]{margin:0 0 16px 0;color:#666;font-size:.9em}.day-courses-grid[data-v-65eedbfa]{display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:16px}.day-courses-column h4[data-v-65eedbfa]{margin:0 0 12px 0;padding:8px 12px;background:#007cba;color:#fff;border-radius:4px;text-align:center;font-size:.9em}.available-courses-list[data-v-65eedbfa]{display:flex;flex-direction:column;gap:8px;max-height:300px;overflow-y:auto}.course-card[data-v-65eedbfa]{padding:10px;background:#fff;border:1px solid #ddd;border-radius:4px;cursor:pointer;transition:all .2s;font-size:.85em}.course-card[data-v-65eedbfa]:hover{transform:translateY(-1px);box-shadow:0 2px 4px rgba(0,124,186,.15);border-color:#007cba}.course-card .course-name[data-v-65eedbfa]{font-weight:500;color:#333;margin-bottom:4px;display:block}.course-card .course-details[data-v-65eedbfa]{display:flex;flex-direction:column;gap:2px}.course-card .course-details small[data-v-65eedbfa]{color:#666;font-size:.8em}.no-courses[data-v-65eedbfa]{padding:16px;text-align:center;color:#999;font-style:italic;background:#f9f9f9;border:1px dashed #ddd;border-radius:4px}.no-preferred-days-panel[data-v-65eedbfa]{padding:16px;background:#f0f8e6;border:1px solid #52c41a;border-radius:4px;margin-top:16px}.no-preferred-days-panel h4[data-v-65eedbfa]{margin:0 0 8px 0;color:#52c41a;font-size:1em;display:flex;align-items:center;gap:8px}.panel-description[data-v-65eedbfa]{margin:0 0 12px 0;color:#666;font-size:.9em;font-style:italic}.no-preferred-courses-list[data-v-65eedbfa]{display:grid;grid-template-columns:repeat(auto-fill, minmax(250px, 1fr));gap:12px}.flexible-tag[data-v-65eedbfa]{color:#52c41a !important;font-weight:500}@media(max-width: 768px){.period-header-cell[data-v-65eedbfa],.period-label-cell[data-v-65eedbfa]{width:100px;font-size:.8em}.day-header-cell[data-v-65eedbfa]{font-size:.8em}.scheduler-toolbar[data-v-65eedbfa]{flex-direction:column;align-items:stretch;gap:8px}.stats-grid[data-v-65eedbfa]{grid-template-columns:1fr}}.schedule-cell[data-v-65eedbfa]:focus{outline:2px solid #007cba;outline-offset:-2px}.debug-message-panel[data-v-65eedbfa]{padding:20px;background:#fff3cd;border:1px solid #ffeaa7;border-radius:4px;margin:16px}.debug-message-panel h3[data-v-65eedbfa]{margin:0 0 12px 0;color:#856404}.debug-warning[data-v-65eedbfa]{margin-bottom:16px;padding:12px;background:#fff;border-left:4px solid #ffc107;border-radius:4px}.debug-warning strong[data-v-65eedbfa]{display:block;margin-bottom:8px;color:#856404}.debug-warning ul[data-v-65eedbfa]{margin:8px 0 0 16px;color:#6c757d;font-family:monospace;font-size:.9em}.debug-warning li[data-v-65eedbfa]{margin-bottom:4px;word-break:break-all}.debug-info[data-v-65eedbfa]{font-size:.7em;color:#888;margin-top:2px;padding:2px;background:rgba(0,0,0,.05);border-radius:2px}.scheduler-grid[data-readonly=true] .schedule-cell[data-v-65eedbfa]{cursor:default}.scheduler-grid[data-readonly=true] .schedule-cell[data-v-65eedbfa]:hover{background:inherit}.filter-label[data-v-65eedbfa]{display:flex;align-items:center;gap:6px;font-size:.9em;margin-right:16px}.mode-switcher[data-v-65eedbfa]{display:flex;align-items:center;gap:8px;font-size:.9em}.mode-toggle[data-v-65eedbfa]{width:40px;height:20px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#ccc;border-radius:10px;position:relative;cursor:pointer;transition:background-color .3s}.mode-toggle[data-v-65eedbfa]:checked{background:#007cba}.mode-toggle[data-v-65eedbfa]::before{content:"";position:absolute;top:2px;left:2px;width:16px;height:16px;background:#fff;border-radius:50%;transition:left .3s}.mode-toggle[data-v-65eedbfa]:checked::before{left:22px}.focus-button[data-v-65eedbfa]{padding:6px 12px;border:1px solid #007cba;border-radius:4px;background:#fff;color:#007cba;cursor:pointer;font-size:.9em;transition:all .2s}.focus-button[data-v-65eedbfa]:hover{background:#007cba;color:#fff}.focus-button.active[data-v-65eedbfa]{background:#007cba;color:#fff}.focus-hint[data-v-65eedbfa]{font-size:.85em;color:#666;font-style:italic}.period-label-cell.focused[data-v-65eedbfa]{background:#e6f7ff !important;border-left:4px solid #007cba}.period-label-cell[data-v-65eedbfa]{cursor:pointer;transition:background-color .2s}.period-label-cell[data-v-65eedbfa]:hover{background:#f0f7ff !important}.debug-grid-info[data-v-65eedbfa]{padding:8px 16px;background:#e8f5e8;border:1px solid #4caf50;border-radius:4px;margin-bottom:8px;font-family:monospace}.grid-hidden-debug[data-v-65eedbfa]{padding:20px;background:#ffebee;border:2px solid #f44336;border-radius:8px;margin:16px;text-align:center}.grid-hidden-message[data-v-65eedbfa]{color:#c62828;font-weight:bold;font-size:1.1em}.grid-hidden-message ul[data-v-65eedbfa]{text-align:left;display:inline-block;margin:12px 0;color:#666;font-weight:normal;font-size:.9em;font-family:monospace}.grid-hidden-message li[data-v-65eedbfa]{margin-bottom:6px}.emergency-show-btn[data-v-65eedbfa]{padding:12px 24px;background:#f44336;color:#fff;border:none;border-radius:6px;font-size:1em;font-weight:bold;cursor:pointer;margin-top:16px;transition:all .2s}.emergency-show-btn[data-v-65eedbfa]:hover{background:#d32f2f;transform:scale(1.05)}.main-grid-container[data-v-65eedbfa]{border:2px solid #4caf50;border-radius:6px;padding:4px}.draggable-course[data-v-65eedbfa]{cursor:grab;transition:all .2s ease;border:1px solid rgba(0,123,186,.3)}.draggable-course[data-v-65eedbfa]:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.15);border-color:#007cba}.draggable-course[data-v-65eedbfa]:active{cursor:grabbing}.draggable-assignment[data-v-65eedbfa]{cursor:grab;transition:all .2s ease}.draggable-assignment[data-v-65eedbfa]:hover{transform:scale(1.02);box-shadow:0 2px 6px rgba(0,0,0,.1)}.draggable-assignment[data-v-65eedbfa]:active{cursor:grabbing}.drop-zone[data-v-65eedbfa]{position:relative;transition:all .2s ease}.drop-zone.drag-over[data-v-65eedbfa]{background:rgba(0,123,186,.1) !important;border:2px dashed #007cba !important;transform:scale(1.02)}.drop-zone.drag-over[data-v-65eedbfa]::after{content:"üìã Drop here";position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background:rgba(0,123,186,.9);color:#fff;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:bold;pointer-events:none;z-index:10}.assignment-item.dragging[data-v-65eedbfa]{opacity:.5;transform:rotate(5deg)}.course-card.dragging[data-v-65eedbfa]{opacity:.5;transform:rotate(-3deg) scale(1.05)}.scheduler-grid:has(.dragging) .drop-zone[data-v-65eedbfa]:not(.drag-over){background:rgba(255,255,255,.8);border:1px dashed #ddd}.scheduler-grid:has(.dragging) .assignment-item[data-v-65eedbfa]:not(.dragging){opacity:.7}.assignment-content[data-v-65eedbfa]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;gap:2px}.quick-edit-btn[data-v-65eedbfa]{position:absolute;top:2px;right:2px;background:rgba(0,123,186,.8);color:#fff;border:none;border-radius:50%;width:16px;height:16px;font-size:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .2s ease;z-index:2}.assignment-item:hover .quick-edit-btn[data-v-65eedbfa]{opacity:1}.quick-edit-btn[data-v-65eedbfa]:hover{background:#007cba;transform:scale(1.1)}.assignment-item.editing[data-v-65eedbfa]{z-index:100;position:relative}.assignment-item.editing .assignment-content[data-v-65eedbfa]{display:none}',""]);const r=l},92:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var o=a(698),n=a.n(o),s=a(58),l=a.n(s)()(n());l.push([e.id,'.course-scheduler-wrapper[data-v-5b1dcfa6]{width:100%;min-height:500px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;position:relative}.scheduler-header[data-v-5b1dcfa6]{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;border-radius:6px 6px 0 0}.scheduler-header h2[data-v-5b1dcfa6]{margin:0;color:#333;font-size:1.3em}.scheduler-header .scheduler-controls[data-v-5b1dcfa6]{display:flex;align-items:center;gap:16px}.scheduler-header .mode-indicator[data-v-5b1dcfa6]{padding:6px 12px;border-radius:4px;font-size:.9em;font-weight:500;background:#e6f7ff;color:#1890ff}.scheduler-header .mode-indicator.read-only[data-v-5b1dcfa6]{background:#fff2f0;color:#ff4d4f}.scheduler-header .header-actions[data-v-5b1dcfa6]{display:flex;gap:8px}.scheduler-header .undo-btn[data-v-5b1dcfa6],.scheduler-header .conflicts-btn[data-v-5b1dcfa6]{padding:6px 12px;border:1px solid #d9d9d9;border-radius:4px;background:#fff;cursor:pointer;font-size:.9em;transition:all .2s}.scheduler-header .undo-btn[data-v-5b1dcfa6]:disabled,.scheduler-header .conflicts-btn[data-v-5b1dcfa6]:disabled{opacity:.5;cursor:not-allowed}.scheduler-header .undo-btn[data-v-5b1dcfa6]:hover:not(:disabled),.scheduler-header .conflicts-btn[data-v-5b1dcfa6]:hover:not(:disabled){background:#f0f0f0;transform:translateY(-1px)}.scheduler-header .conflicts-btn.active[data-v-5b1dcfa6]{background:#ff4d4f;color:#fff;border-color:#ff4d4f}.scheduler-content[data-v-5b1dcfa6]{display:flex;gap:16px;position:relative}.conflicts-sidebar[data-v-5b1dcfa6]{width:400px;position:sticky;top:20px;height:fit-content}.test-data-section[data-v-5b1dcfa6]{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);background:#fff;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:2000;min-width:400px}.close-test[data-v-5b1dcfa6]{position:absolute;top:8px;right:12px;background:none;border:none;font-size:1.2em;cursor:pointer;color:#999}.test-info[data-v-5b1dcfa6]{margin-top:16px}.test-info>div[data-v-5b1dcfa6]{margin-bottom:8px;font-size:.9em}.test-button[data-v-5b1dcfa6]{margin-top:12px;padding:8px 16px;background:#007cba;color:#fff;border:none;border-radius:4px;cursor:pointer}.test-toggle[data-v-5b1dcfa6]{position:fixed;bottom:20px;right:20px;width:40px;height:40px;border:none;border-radius:50%;background:#007cba;color:#fff;font-size:1.2em;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:1000;transition:all .2s}.test-toggle[data-v-5b1dcfa6]:hover{transform:scale(1.1)}.debug-toggle[data-v-5b1dcfa6]{position:fixed;bottom:70px;right:20px;width:40px;height:40px;border:none;border-radius:50%;background:#ff6b6b;color:#fff;font-size:1.2em;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:1000;transition:all .2s}.debug-toggle[data-v-5b1dcfa6]:hover{transform:scale(1.1)}@media(max-width: 1200px){.conflicts-sidebar[data-v-5b1dcfa6]{width:350px}}@media(max-width: 900px){.scheduler-content[data-v-5b1dcfa6]{flex-direction:column}.conflicts-sidebar[data-v-5b1dcfa6]{width:100%;position:relative;top:auto}.scheduler-header[data-v-5b1dcfa6]{flex-direction:column;gap:12px;align-items:stretch}.scheduler-header .scheduler-controls[data-v-5b1dcfa6]{justify-content:space-between}.scheduler-header .header-actions[data-v-5b1dcfa6]{justify-content:center}}@media(max-width: 600px){.course-scheduler-wrapper[data-v-5b1dcfa6]{font-size:.9em}.test-data-section[data-v-5b1dcfa6]{width:90vw;min-width:unset}.test-toggle[data-v-5b1dcfa6]{bottom:10px;right:10px;width:35px;height:35px;font-size:1em}}@media(prefers-reduced-motion: reduce){[data-v-5b1dcfa6]{transition-duration:.01ms !important;animation-duration:.01ms !important}}@media(prefers-contrast: high){.scheduler-header[data-v-5b1dcfa6],.mode-indicator[data-v-5b1dcfa6],.undo-btn[data-v-5b1dcfa6],.conflicts-btn[data-v-5b1dcfa6]{border-width:2px}}@media print{.test-toggle[data-v-5b1dcfa6],.header-actions[data-v-5b1dcfa6],.conflicts-sidebar[data-v-5b1dcfa6]{display:none !important}.scheduler-header .mode-indicator.read-only[data-v-5b1dcfa6]::after{content:" (Read-Only)"}}',""]);const r=l},735:(e,t,a)=>{"use strict";function o(e,t){for(var a=[],o={},n=0;n<t.length;n++){var s=t[n],l=s[0],r={id:e+":"+n,css:s[1],media:s[2],sourceMap:s[3]};o[l]?o[l].parts.push(r):a.push(o[l]={id:l,parts:[r]})}return a}a.d(t,{Z:()=>p});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},l=n&&(document.head||document.getElementsByTagName("head")[0]),r=null,d=0,i=!1,c=function(){},u=null,f="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,a,n){i=a,u=n||{};var l=o(e,t);return g(l),function(t){for(var a=[],n=0;n<l.length;n++){var r=l[n];(d=s[r.id]).refs--,a.push(d)}for(t?g(l=o(e,t)):l=[],n=0;n<a.length;n++){var d;if(0===(d=a[n]).refs){for(var i=0;i<d.parts.length;i++)d.parts[i]();delete s[d.id]}}}}function g(e){for(var t=0;t<e.length;t++){var a=e[t],o=s[a.id];if(o){o.refs++;for(var n=0;n<o.parts.length;n++)o.parts[n](a.parts[n]);for(;n<a.parts.length;n++)o.parts.push(v(a.parts[n]));o.parts.length>a.parts.length&&(o.parts.length=a.parts.length)}else{var l=[];for(n=0;n<a.parts.length;n++)l.push(v(a.parts[n]));s[a.id]={id:a.id,refs:1,parts:l}}}}function b(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function v(e){var t,a,o=document.querySelector("style["+f+'~="'+e.id+'"]');if(o){if(i)return c;o.parentNode.removeChild(o)}if(m){var n=d++;o=r||(r=b()),t=x.bind(null,o,n,!1),a=x.bind(null,o,n,!0)}else o=b(),t=k.bind(null,o),a=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else a()}}var h,y=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function x(e,t,a,o){var n=a?"":o.css;if(e.styleSheet)e.styleSheet.cssText=y(t,n);else{var s=document.createTextNode(n),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(s,l[t]):e.appendChild(s)}}function k(e,t){var a=t.css,o=t.media,n=t.sourceMap;if(o&&e.setAttribute("media",o),u.ssrId&&e.setAttribute(f,t.id),n&&(a+="\n/*# sourceURL="+n.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}},58:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var a="",o=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),o&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),o&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a}).join("")},t.i=function(e,a,o,n,s){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(o)for(var r=0;r<this.length;r++){var d=this[r][0];null!=d&&(l[d]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);o&&l[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),a&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=a):c[2]=a),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),t.push(c))}},t}},698:e=>{"use strict";e.exports=function(e){return e[1]}},20:(e,t)=>{"use strict";t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[e,o]of t)a[e]=o;return a}},650:(e,t,a)=>{var o=a(222);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,a(735).Z)("6a0efd6c",o,!1,{})},841:(e,t,a)=>{var o=a(580);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,a(735).Z)("05bbcece",o,!1,{})},997:(e,t,a)=>{var o=a(680);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,a(735).Z)("4b03a100",o,!1,{})},780:(e,t,a)=>{var o=a(919);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,a(735).Z)("6608f5e3",o,!1,{})},850:(e,t,a)=>{var o=a(92);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,a(735).Z)("70e8b97a",o,!1,{})}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={id:o,exports:{}};return e[o](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=Vue,t=t=>((0,e.pushScopeId)("data-v-5b1dcfa6"),t=t(),(0,e.popScopeId)(),t),o={class:"course-scheduler-wrapper"},n={class:"scheduler-header"},s=t(()=>(0,e.createElementVNode)("h2",null,"Course Scheduler",-1)),l={class:"scheduler-controls"},r={key:0,class:"header-actions"},d=["disabled"],i={class:"scheduler-content"},c={key:0,class:"conflicts-sidebar"},u={key:1,class:"test-data-section"},f=t(()=>(0,e.createElementVNode)("h3",null,"Component Test Data",-1)),m={class:"test-info"},p=t(()=>(0,e.createElementVNode)("strong",null,"School ID:",-1)),g=t(()=>(0,e.createElementVNode)("strong",null,"Draft ID:",-1)),b=t(()=>(0,e.createElementVNode)("strong",null,"Published By:",-1)),v=t(()=>(0,e.createElementVNode)("strong",null,"Data Counts:",-1)),h=t=>((0,e.pushScopeId)("data-v-65eedbfa"),t=t(),(0,e.popScopeId)(),t),y={class:"scheduler-grid",role:"grid","aria-label":"School schedule grid"},x={class:"scheduler-toolbar"},k={class:"toolbar-section"},C={class:"filter-label"},E={class:"filter-label"},N={class:"toolbar-section"},_={class:"mode-switcher"},S=h(()=>(0,e.createElementVNode)("span",null,"Planning Mode",-1)),w=h(()=>(0,e.createElementVNode)("span",null,"Live Mode",-1)),V={class:"toolbar-section"},D=h(()=>(0,e.createElementVNode)("option",{value:""},"All Years",-1)),B=["value"],I={class:"toolbar-section"},A=h(()=>(0,e.createElementVNode)("option",{value:""},"All Classes",-1)),T=["value"],L={class:"toolbar-section"},z={key:1,class:"filter-status"},j={key:0,class:"filter-tag"},M={key:1,class:"filter-tag"},F={key:2,class:"filter-tag"},P={key:3,class:"filter-tag"},W={class:"toolbar-section"},$={key:1,class:"focus-hint"},R={class:"toolbar-actions"},O=["disabled"],U={key:0,class:"main-grid-container"},G={class:"debug-grid-info"},q={class:"grid-header",role:"row"},Y={class:"period-header-cell",role:"columnheader"},Z=h(()=>(0,e.createElementVNode)("span",{class:"period-label"},"Period",-1)),H={class:"debug-info"},J=["aria-colindex"],K={class:"day-name"},Q={key:0,class:"day-date"},X={class:"debug-info"},ee={class:"grid-body"},te=["aria-rowindex"],ae=["onClick"],oe={class:"period-info"},ne={class:"period-name"},se={class:"period-time"},le={key:0,class:"non-instructional-badge"},re={class:"debug-info"},de=["onClick","onKeydown","aria-label","onDragover","onDragenter","onDragleave","onDrop","data-day-id","data-period-id"],ie={key:0,class:"assignments-container"},ce=["onClick","draggable","onDragstart","data-assignment-id","data-day-id","data-period-id"],ue={key:0,class:"assignment-content"},fe={class:"course-name"},me={key:0,class:"class-name"},pe={key:1,class:"teacher-names"},ge={key:2,class:"room-name"},be=["onClick"],ve={key:2,class:"conflict-indicator",title:"Has conflicts"},he={key:3,class:"deleted-warning",title:"Missing data"},ye=["onClick"],xe=["onClick"],ke=[h(()=>(0,e.createElementVNode)("span",{class:"add-icon"},"+",-1)),h(()=>(0,e.createElementVNode)("span",{class:"add-text"},"Add Course",-1))],Ce={class:"grid-hidden-debug"},Ee={class:"grid-hidden-message"},Ne={key:2,class:"available-courses-panel"},_e=h(()=>(0,e.createElementVNode)("div",{class:"focused-period-info"},[(0,e.createElementVNode)("em",null,"Courses that can be scheduled during this period on each day")],-1)),Se={class:"day-courses-grid"},we={class:"available-courses-list"},Ve=["onClick","title","data-course-id","data-day-id","data-period-id","onDragstart"],De={class:"course-name"},Be={class:"course-details"},Ie={key:0},Ae={key:1},Te={key:2},Le={key:0,class:"no-courses"},ze={key:0,class:"no-preferred-days-panel"},je=h(()=>(0,e.createElementVNode)("h4",null,"üìÖ Courses with No Preferred Days",-1)),Me=h(()=>(0,e.createElementVNode)("p",{class:"panel-description"}," These courses have no time slot restrictions and can be scheduled on any day: ",-1)),Fe={class:"no-preferred-courses-list"},Pe=["onClick","title"],We={class:"course-name"},$e={class:"course-details"},Re={key:0},Oe={key:1},Ue={key:2},Ge=h(()=>(0,e.createElementVNode)("small",{class:"flexible-tag"},"üìÖ Flexible scheduling",-1)),qe={key:3,class:"statistics-panel"},Ye=h(()=>(0,e.createElementVNode)("h3",null,"Schedule Statistics",-1)),Ze={class:"stats-grid"},He={class:"stat-item"},Je=h(()=>(0,e.createElementVNode)("span",{class:"stat-label"},"Scheduled Courses:",-1)),Ke={class:"stat-value"},Qe={class:"stat-item"},Xe=h(()=>(0,e.createElementVNode)("span",{class:"stat-label"},"Available Slots:",-1)),et={class:"stat-value"},tt={class:"stat-item"},at=h(()=>(0,e.createElementVNode)("span",{class:"stat-label"},"Utilization:",-1)),ot={class:"stat-value"},nt=t=>((0,e.pushScopeId)("data-v-0d9016a8"),t=t(),(0,e.popScopeId)(),t),st={class:"editor-field"},lt=nt(()=>(0,e.createElementVNode)("label",null,"Course:",-1)),rt=nt(()=>(0,e.createElementVNode)("option",{value:""},"Select Course",-1)),dt=["value"],it={class:"editor-field"},ct=nt(()=>(0,e.createElementVNode)("label",null,"Teacher:",-1)),ut=nt(()=>(0,e.createElementVNode)("option",{value:""},"Select Teacher",-1)),ft=["value"],mt={class:"editor-field"},pt=nt(()=>(0,e.createElementVNode)("label",null,"Room:",-1)),gt=nt(()=>(0,e.createElementVNode)("option",{value:""},"Select Room",-1)),bt=["value"],vt={class:"editor-field"},ht=nt(()=>(0,e.createElementVNode)("label",null,"Class:",-1)),yt=nt(()=>(0,e.createElementVNode)("option",{value:""},"Select Class",-1)),xt=["value"],kt={class:"editor-actions"},Ct=["disabled"],Et={name:"InlineAssignmentEditor",props:{assignment:{type:Object,required:!0},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]}},emits:["save","cancel","delete"],setup(t,{emit:a}){const o=(0,e.ref)({...t.assignment}),n=(0,e.ref)(t.assignment.teacher_ids&&t.assignment.teacher_ids.length>0?t.assignment.teacher_ids[0]:"");(0,e.watch)(n,e=>{o.value.teacher_ids=e?[e]:[]});const s=(0,e.computed)(()=>t.courses.filter(e=>!0)),l=(0,e.computed)(()=>o.value.course_id||o.value.subject_id);return{editableAssignment:o,selectedTeacherId:n,availableCourses:s,isValid:l,saveChanges:function(){l.value&&(n.value&&!o.value.teacher_ids.includes(n.value)&&(o.value.teacher_ids=[n.value]),a("save",o.value))},cancelEdit:function(){a("cancel")},deleteAssignment:function(){confirm("Are you sure you want to delete this assignment?")&&a("delete",t.assignment)}}}};a(997);var Nt=a(20);function _t(e){if(!e)return[];if(Array.isArray(e))return e;if(void 0!==e?.value)return Array.isArray(e.value)?e.value:_t(e.value);if("object"==typeof e){const t=Object.keys(e),a=t.filter(e=>/^\d+$/.test(e));if(a.length>0)return a.sort((e,t)=>Number(e)-Number(t)).map(t=>e[t]).filter(e=>null!=e);if("function"==typeof e.values)try{return Array.from(e.values())}catch(e){}const o=["data","items","list","array","results","collection"];for(const t of o)if(e[t]&&Array.isArray(e[t]))return e[t];const n=Object.values(e).filter(e=>null!=e);if(n.length>0&&t.length>2){const e=n[0];if("object"==typeof e&&null!==e&&n.every(e=>"object"==typeof e&&null!==e&&Object.keys(e).length>0))return n}}return[]}function St(e){return Array.isArray(e)?e.length:0}function wt(e){return St(e)>0}function Vt(e){return St(e)||(e&&"object"==typeof e&&"number"==typeof e.length?e.length:0)}function Dt(e){const t=_t(e);return wt(t)?t:Array.isArray(e)?e:Array.isArray(e?.value)?e.value:e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.forEach?Array.from(e):[]}function Bt(e,t){return{id:e.id??e.course_id??e.uuid??`course-fallback-${t}`,name:e.name??e.title??e.course_name??"",code:e.code??e.short_code??e.course_code??"",capacity:e.capacity??e.max??e.max_students??null,subject:e.subject??e.subject_name??"",yearGroups:_t(e.year_groups??e.yearGroups??e.is_for_year_groups??[]),possibleSlots:(a=e.possible_time_slots??e.possibleSlots??[],_t(a).map(e=>{if("string"==typeof e&&e.includes("|")){const[t,a]=e.split("|");return{dayId:Number(t),periodId:String(a)}}return"object"==typeof e&&null!==e?{dayId:Number(e.day_id??e.dayId),periodId:String(e.period_id??e.periodId)}:{dayId:-1,periodId:""}}).filter(e=>e.dayId>0&&e.periodId)),possible_time_slots:e.possible_time_slots,...e};var a}const It={name:"SchedulerGrid",components:{InlineAssignmentEditor:(0,Nt.Z)(Et,[["render",function(t,a,o,n,s,l){return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"inline-editor",onClick:a[7]||(a[7]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createCommentVNode)(" Course Selection "),(0,e.createElementVNode)("div",st,[lt,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.editableAssignment.course_id=e),class:"editor-select"},[rt,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.availableCourses,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||t.course_name||t.title),9,dt))),128))],512),[[e.vModelSelect,n.editableAssignment.course_id]])]),(0,e.createCommentVNode)(" Teacher Selection "),(0,e.createElementVNode)("div",it,[ct,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.selectedTeacherId=e),class:"editor-select"},[ut,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(o.teachers,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||`${t.first_name} ${t.last_name}`),9,ft))),128))],512),[[e.vModelSelect,n.selectedTeacherId]])]),(0,e.createCommentVNode)(" Room Selection "),(0,e.createElementVNode)("div",mt,[pt,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.editableAssignment.room_id=e),class:"editor-select"},[gt,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(o.rooms,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||t.room_name),9,bt))),128))],512),[[e.vModelSelect,n.editableAssignment.room_id]])]),(0,e.createCommentVNode)(" Class Selection "),(0,e.createElementVNode)("div",vt,[ht,(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.editableAssignment.class_id=e),class:"editor-select"},[yt,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(o.classes,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name||t.class_name),9,xt))),128))],512),[[e.vModelSelect,n.editableAssignment.class_id]])]),(0,e.createCommentVNode)(" Action Buttons "),(0,e.createElementVNode)("div",kt,[(0,e.createElementVNode)("button",{onClick:a[4]||(a[4]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"save-btn",disabled:!n.isValid},"‚úÖ Save",8,Ct),(0,e.createElementVNode)("button",{onClick:a[5]||(a[5]=(...e)=>n.cancelEdit&&n.cancelEdit(...e)),class:"cancel-btn"},"‚ùå Cancel"),(0,e.createElementVNode)("button",{onClick:a[6]||(a[6]=(...e)=>n.deleteAssignment&&n.deleteAssignment(...e)),class:"delete-btn",title:"Delete assignment"},"üóëÔ∏è Delete")])])}],["__scopeId","data-v-0d9016a8"]])},props:{periods:{type:Array,default:()=>[]},schoolDays:{type:Array,default:()=>[]},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},draftSchedules:{type:Array,default:()=>[]},liveSchedules:{type:Array,default:()=>[]},isReadOnly:{type:Boolean,default:!1},showStatistics:{type:Boolean,default:!0},maxDays:{type:Number,default:6},emitDropEvents:{type:Boolean,default:!1},schoolId:{type:String,default:null},draftId:{type:String,default:null},parentEmit:{type:Function,default:null},conflicts:{type:Array,default:()=>[]},canUndo:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1}},emits:["cell-click","assignment-details","toggle-non-instructional","toggle-lesson-schedules","filter-year","undo-last","save-draft","update-assignments","mode-changed","period-focus-changed"],setup(t,{emit:a}){const o=(0,e.ref)(!0),n=(0,e.ref)(!0),s=(0,e.ref)(!1),l=(0,e.ref)(""),r=(0,e.ref)(""),d=(0,e.ref)(null),i=(0,e.ref)(null),c=(0,e.ref)(null);(0,e.watch)(d,(e,t)=>{e!==t&&console.log("üîç [SchedulerGrid] focusedPeriodId changed:",{from:t,to:e})});const u=(0,e.computed)(()=>{const e=function(e,t="unknown"){const a=_t(e);if(!wt(a)){const t=function(e){if(!e)return[];const t=_t(e);if(wt(t))return t;if(e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.forEach)return Array.from(e);if(e&&"object"==typeof e){const t=["data","items","list","array","results"];for(const a of t)if(Array.isArray(e[a]))return e[a];for(const t in e)if(Array.isArray(e[t]))return e[t]}return[]}(e);if(wt(t))return t}if(!wt(a)&&e){const a=e&&"object"==typeof e?Object.keys(e):null,o=a?a.filter(e=>/^\d+$/.test(e)):[];console.warn(`[${t}] Could not extract array from:`,{type:typeof e,isArray:Array.isArray(e),hasLength:e?.length,hasForEach:"function"==typeof e?.forEach,hasValue:!!e?.value,keys:a,numericKeys:o,isNumericKeyObject:o.length>0,sampleData:e&&"object"==typeof e&&o.length>0?e[o[0]]:e})}return wt(a)?a:[]}(t.schoolDays,"schoolDays");if(0===Vt(e))return[];const a=t.maxDays||7;return e.slice(0,a)}),f=(0,e.computed)(()=>{const e=Dt(t.periods);if(0===Vt(e))return console.log("üîç [SchedulerGrid] No periods available:",{periodsType:typeof t.periods,periodsLength:t.periods?.length,periodsKeys:Object.keys(t.periods||{}),samplePeriod:Array.isArray(t.periods)?t.periods[0]:t.periods}),[];Vt(e)>0&&console.log("üîç [SchedulerGrid] Period processing summary:",{totalPeriods:Vt(e),focusedPeriodId:d.value,showNonInstructional:o.value,stableIds:e.slice(0,3).map(e=>e.id)});let a=e;if(d.value){const t=e.filter(e=>e.id===d.value);0===Vt(t)?(console.warn("üö® [SchedulerGrid] Focused period ID does not match any periods. Clearing focus.",{focusedId:d.value,availableIds:e.slice(0,5).map(e=>e.id)}),d.value=null):a=t}else o.value||(a=e.filter(e=>{let t="flexible"===e.attendance_requirement||"required"===e.attendance_requirement||"contracted"===e.attendance_requirement;if(t||e.attendance_requirement)!t&&e.attendance_requirement&&"optional"!==e.attendance_requirement&&(t=!0);else if(void 0!==e.is_instructional)t=!0===e.is_instructional;else if(e.block_type)t=!["break","pause","lunch","recess","assembly","flexband","fr√ºhdienst"].includes(e.block_type.toLowerCase());else if(e.label||e.name){const a=(e.label||e.name).toLowerCase();t=!(a.includes("break")||a.includes("pause")||a.includes("lunch")||a.includes("flexband")||a.includes("fr√ºhdienst")||a.includes("benutzerdefiniert"))}else t=!0;return t}));return 0===Vt(a)&&Vt(t.periods)>0&&(a=Dt(t.periods)),a}),m=(0,e.ref)(""),p=(0,e.ref)("");let g=null;(0,e.watch)(p,e=>{clearTimeout(g),g=setTimeout(()=>{m.value=e},300)});const b=(0,e.computed)(()=>{let e=s.value?t.liveSchedules:t.draftSchedules;if(console.log("üîç [SchedulerGrid] filteredEntries - Schedule debugging:",{isLiveMode:s.value,draftSchedulesCount:Vt(t.draftSchedules),liveSchedulesCount:Vt(t.liveSchedules),rawDraftSchedules:t.draftSchedules,rawLiveSchedules:t.liveSchedules,selectedEntries:e,selectedEntriesCount:Vt(e),sampleEntry:Vt(e)>0?e[0]:null}),m.value){const t=m.value.toLowerCase();e=e.filter(e=>e.course_name&&e.course_name.toLowerCase().includes(t)||e.subject_name&&e.subject_name.toLowerCase().includes(t)||e.class_name&&e.class_name.toLowerCase().includes(t)||e.teacher_names&&e.teacher_names.some(e=>e.toLowerCase().includes(t)))}return r.value&&(e=e.filter(e=>e.class_id===r.value)),n.value||(e=e.filter(e=>e.course_id)),e}),v=(0,e.computed)(()=>{const e=new Set;return t.classes.forEach(t=>{t.year_group&&e.add(t.year_group)}),Array.from(e).sort()}),h=(0,e.computed)(()=>l.value?t.classes.filter(e=>e.year_group===l.value):t.classes.slice().sort((e,t)=>e.name.localeCompare(t.name))),y=(0,e.computed)(()=>v.value.map(e=>{const a=t.classes.filter(t=>t.year_group===e),o=t.draftSchedules.filter(e=>a.some(t=>t.id===e.class_id)),n=Vt(f.value)*Vt(u.value)*Vt(a),s=o.length,l=s/Vt(u.value),r=n>0?s/n*100:0;return{year:e,scheduledCourses:Math.round(l),availableSlots:n,utilization:r}}));function x(e,a){return b.value.filter(o=>{const n=t.schoolDays.find(t=>t.id===e||t.day_id===e),s=o.day_id===e||o.day_id===n?.day_id||o.day_id===n?.id||o.day_number===n?.day_number||o.day_number===n?.id||n?.name&&o.day_name_en===n.name||n?.name_en&&o.day_name_en===n.name_en,l=t.periods.find(e=>e.id===a),r=o.period_id===a||o.block_number&&l?.blockNumber&&o.block_number===l.blockNumber;return o&&(o.period_id===a||Math.random()<.02)&&console.log("üîç [SchedulerGrid] Assignment matching:",{requestedPeriod:a,assignmentPeriodId:o.period_id,assignmentBlockNumber:o.block_number,currentPeriod:{id:l?.id,blockNumber:l?.blockNumber,label:l?.label},periodMatch:r,assignmentDayMatch:s,finalMatch:s&&r,displayCell:o.display_cell,className:o.class_name}),s&&r}).sort((e,t)=>{const a=N(e.class_id),o=N(t.class_id);if(a!==o)return a.localeCompare(o);const n=k(e.course_id)||C(e.subject_id),s=k(t.course_id)||C(t.subject_id);return n.localeCompare(s)})}function k(e){if(!e)return null;const a=t.courses.find(t=>t.id===e);return a&&(a?.name||a?.course_name||a?.title)||null}function C(e){if(!e)return null;const a=t.subjects.find(t=>t.id===e);return a?.name||a?.title||a?.subject_name||`Subject ${e}`}function E(e){const t=k(e.course_id);if(t)return t;return C(e.subject_id)||"No Course"}function N(e){if(!e)return"";const a=t.classes.find(t=>t.id===e);return a?.name||"No Class"}function _(e){return t.conflicts.some(t=>t.day_id===e.day_id&&t.period_id===e.period_id&&(t.assignment_id===e.id||t.teacher_ids?.some(t=>e.teacher_ids?.includes(t))||t.class_id===e.class_id||t.room_id===e.room_id))}function S(e){const a=!e.course_id||t.courses.some(t=>t.id===e.course_id),o=!e.class_id||t.classes.some(t=>t.id===e.class_id),n=!e.room_id||t.rooms.some(t=>t.id===e.room_id),s=!e.teacher_ids?.length||e.teacher_ids.every(e=>t.teachers.some(t=>t.id===e));return!(a&&o&&n&&s)}function w(e){a("assignment-details",e)}function V(e,o,n){if(!t.isReadOnly){if(console.log("üéØ [Scheduler] Assigning course:",e.name||e.course_name,"to day:",o,"period:",n),t.emitDropEvents){console.log("üöÄ [Scheduler] Emitting drop event for course:",e.name||e.course_name);const s={schoolId:t.schoolId||null,draftId:t.draftId||null,dayId:o,periodId:n,courseId:e.id,courseName:e.name||e.course_name||"",courseCode:e.code||e.course_code||"",source:"drag-drop",timestamp:(new Date).toISOString()};return a("scheduler-drop",s),a("scheduler-drag-end",{courseId:e.id,courseName:e.name||e.course_name||"",success:!0}),void console.log("‚úÖ [Scheduler] Drop events emitted to parent component")}console.log("üìã [Scheduler] Opening assignment modal for course assignment"),a("cell-click",{dayId:o,periodId:n,period:t.periods.find(e=>e.id===n),preSelectedCourse:e})}}const D=(0,e.ref)(null),B=(0,e.ref)(null),I=(0,e.ref)(null);function A(e){return i.value?.id===e}function T(){console.log("‚ùå [InlineEdit] Cancelling edit"),i.value=null,c.value=null}return{showNonInstructional:o,showLessonSchedules:n,isLiveMode:s,selectedYearFilter:l,selectedClassFilter:r,focusedPeriodId:d,draggedCourse:D,draggedAssignment:B,dragOverCell:I,editingAssignment:i,editingCell:c,searchTerm:p,debouncedSearchTerm:m,visibleDays:u,visiblePeriods:f,filteredEntries:b,yearGroups:v,availableClasses:h,yearGroupStats:y,formatTime:function(e){if(!e)return"";const t=e.split(":");return t.length>=2?`${t[0]}:${t[1]}`:e},formatDate:function(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}):""},getCellAssignments:x,getCellClasses:function(e,a){const o=x(e,a),n=[];return Vt(o)>0&&(n.push("has-assignments"),Vt(o)>1&&n.push("multiple-assignments")),o.some(o=>t.conflicts.some(t=>t.day_id===e&&t.period_id===a))&&n.push("has-conflicts"),n},getCellAriaLabel:function(e,t){const a=x(e.id,t.id);if(0===Vt(a))return`${e.name} ${t.name}: Empty, click to add assignment`;const o=a.map(e=>E(e)).join(", ");return`${e.name} ${t.name}: ${o}, ${Vt(a)} assignment${Vt(a)>1?"s":""}`},getAssignmentClasses:function(e){const t=[];return _(e)&&t.push("has-conflict"),S(e)&&t.push("has-deleted-entities"),!k(e.course_id)&&e.subject_id&&t.push("lesson-schedule"),t},getAssignmentStyles:function(e){const a=t.courses.find(t=>t.id===e.course_id),o=t.classes.find(t=>t.id===e.class_id);return{borderLeft:`4px solid ${a?.color||o?.color||"#e0e0e0"}`,backgroundColor:a?.color?`${a.color}15`:o?.color?`${o.color}15`:"#f9f9f9"}},getCourseName:k,getSubjectName:C,getDisplayName:E,getClassName:N,getTeacherNames:function(e){return e?.length?e.map(e=>{const a=t.teachers.find(t=>t.id===e);return a?.name||"Unknown Teacher"}).join(", "):"No Teacher"},getRoomName:function(e){if(!e)return"No Room";const a=t.rooms.find(t=>t.id===e);return a?.name||"Unknown Room"},hasConflicts:_,hasDeletedEntities:S,handleCellClick:function(e,o,n){t.isReadOnly||a("cell-click",{dayId:e,periodId:o,period:n})},openAssignmentModal:function(e,o,n){t.isReadOnly||a("cell-click",{dayId:e,periodId:o,period:n,mode:"add"})},openAssignmentDetails:w,handleLessonScheduleToggle:function(){a("toggle-lesson-schedules",n.value)},handleClassFilterChange:function(){},handleModeSwitch:function(){a("mode-changed",s.value?"live":"planning")},togglePeriodFocus:function(e){d.value===e?d.value=null:d.value=e,a("period-focus-changed",d.value)},clearPeriodFocus:function(){d.value=null,a("period-focus-changed",null)},getFocusedPeriodName:function(){const e=t.periods.find(e=>e.id===d.value);return e?.name||e?.label||"Unknown Period"},getAvailableCoursesForSlot:function(e,a){console.log("üéØ [SchedulerGrid] getAvailableCoursesForSlot:",{dayId:e,periodId:a,coursesTotal:Vt(t.courses)});let o=t.courses.map((e,t)=>Bt(e,t)).filter(t=>{if(0===Vt(t.possibleSlots))return!0;const o=t.possibleSlots.some(t=>t.dayId===e&&t.periodId===a);return o&&console.log("  ‚úÖ Course available for slot:",{courseName:t.name,courseId:t.id,possibleSlots:t.possibleSlots,dayId:e,periodId:a}),o});if(m.value){const e=m.value.toLowerCase();o=o.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.course_name&&t.course_name.toLowerCase().includes(e)||t.title&&t.title.toLowerCase().includes(e)||t.course_code&&t.course_code.toLowerCase().includes(e)||t.subject_name&&t.subject_name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}if(r.value){const e=t.classes.find(e=>e.id===r.value);e&&(o=o.filter(t=>!(t.is_for_year_groups&&Vt(t.is_for_year_groups)>0)||t.is_for_year_groups.includes(e.year_group)))}return console.log("üéØ [SchedulerGrid] Available courses for slot (after filtering):",{dayId:e,periodId:a,availableCount:Vt(o),searchTerm:m.value,classFilter:r.value,courses:o.map(e=>({id:e.id,name:e.name||e.course_name}))}),o},getCourseCardStyle:function(e){return{borderLeft:`4px solid ${e.color||"#007cba"}`,backgroundColor:e.color?`${e.color}15`:"#f0f8ff"}},assignCourseToSlot:V,getNoPreferredDaysCourses:function(){const e=t.courses.filter(e=>!e.possible_time_slots||0===Vt(e.possible_time_slots));let a=e;if(m.value){const e=m.value.toLowerCase();a=a.filter(t=>t.name&&t.name.toLowerCase().includes(e)||t.course_name&&t.course_name.toLowerCase().includes(e)||t.title&&t.title.toLowerCase().includes(e)||t.course_code&&t.course_code.toLowerCase().includes(e)||t.subject_name&&t.subject_name.toLowerCase().includes(e))}return r.value&&(a=a.filter(e=>{const a=t.classes.find(e=>e.id===r.value);return!a||!e.is_for_year_groups||e.is_for_year_groups.includes(a.year_group)})),console.log("üìÖ [NoPreferredDays] Filtered courses:",{total:Vt(e),afterSearch:Vt(a),searchTerm:m.value,classFilter:r.value}),a},assignCourseToFocusedSlot:function(e){if(t.isReadOnly||!d.value)return;const a=u.value[0];a&&V(e,a.id,d.value)},handleCourseDragStart:function(e,o){t.isReadOnly?e.preventDefault():(console.log("üöÄ [Scheduler] Drag started:",o.name||o.course_name),D.value=o,a("scheduler-drag-start",{courseId:o.id,courseName:o.name||o.course_name||""}),e.dataTransfer.setData("text/plain",JSON.stringify({type:"course",course:o,id:o.id})),e.dataTransfer.effectAllowed="copy",e.target.style.opacity="0.5")},handleCourseDragEnd:function(e){console.log("üéØ [DragDrop] Course drag ended");const t=D.value;a("scheduler-drag-end",{courseId:t?.id||null,courseName:t?.name||t?.course_name||null,success:!1}),D.value=null,e.target.style.opacity="1"},handleAssignmentDragStart:function(e,a,o,n){t.isReadOnly?e.preventDefault():(console.log("üéØ [DragDrop] Assignment drag started:",a.course_name||a.subject_name),B.value={assignment:a,originalDayId:o,originalPeriodId:n},e.dataTransfer.setData("text/plain",JSON.stringify({type:"assignment",assignment:a,originalDayId:o,originalPeriodId:n})),e.dataTransfer.effectAllowed="move",e.target.style.opacity="0.5")},handleAssignmentDragEnd:function(e){console.log("üéØ [DragDrop] Assignment drag ended"),B.value=null,e.target.style.opacity="1",I.value=null},handleCellDragOver:function(e,t,a){if(e.preventDefault(),D.value||B.value)return e.dataTransfer.dropEffect=B.value?"move":"copy",!1},handleCellDragEnter:function(e,t,a){e.preventDefault(),(D.value||B.value)&&(I.value=`${t}-${a}`,e.currentTarget.classList.add("drag-over"))},handleCellDragLeave:function(e,t,a){e.currentTarget.contains(e.relatedTarget)||(I.value=null,e.currentTarget.classList.remove("drag-over"))},handleCellDrop:function(e,t,o){e.preventDefault(),I.value=null,e.currentTarget.classList.remove("drag-over");try{const n=JSON.parse(e.dataTransfer.getData("text/plain"));if("course"===n.type){const e=n.course;console.log("üéØ [Scheduler] Dropping:",e.name||e.course_name,"to day:",t,"period:",o),V(e,t,o)}else if("assignment"===n.type){const e=n.assignment,s=n.originalDayId,l=n.originalPeriodId;console.log("üéØ [DragDrop] Moving assignment from:",s,l,"to:",t,o),s===t&&l===o||a("update-assignments",{action:"move",assignment:e,fromDayId:s,fromPeriodId:l,toDayId:t,toPeriodId:o})}}catch(e){console.error("üö® [DragDrop] Error handling drop:",e)}},isEditing:A,handleAssignmentClick:function(e,a,o){t.isReadOnly||A(e.id)||(i.value&&T(),w(e))},startInlineEdit:function(e,a,o){t.isReadOnly||(console.log("‚úèÔ∏è [InlineEdit] Starting edit for assignment:",e.id),i.value&&T(),i.value=e,c.value={dayId:a,periodId:o})},saveInlineEdit:function(e){console.log("üíæ [InlineEdit] Saving changes for assignment:",e.id);const o=(s.value?t.liveSchedules:t.draftSchedules).map(t=>t.id===e.id?e:t);a("update-assignments",o),i.value=null,c.value=null},cancelInlineEdit:T,deleteInlineAssignment:function(e){if(console.log("üóëÔ∏è [InlineEdit] Deleting assignment:",e.id),t.emitDropEvents){const o=t.parentEmit||a;emitSchedulerRemoveEvent(o,{schoolId:t.schoolId,draftId:t.draftId,dayId:e.day_id,periodId:e.period_id,assignmentId:e.id,courseId:e.course_id,courseName:e.course_name||e.display_cell||""})}const o=(s.value?t.liveSchedules:t.draftSchedules).filter(t=>t.id!==e.id);a("update-assignments",o),i.value=null,c.value=null},safeLength:Vt,safeArray:Dt}}};a(780);const At=(0,Nt.Z)(It,[["render",function(t,a,o,n,s,l){const r=(0,e.resolveComponent)("InlineAssignmentEditor");return(0,e.openBlock)(),(0,e.createElementBlock)("div",y,[(0,e.createCommentVNode)(" Toolbar "),(0,e.createElementVNode)("div",x,[(0,e.createElementVNode)("div",k,[(0,e.createElementVNode)("label",C,[(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>n.showNonInstructional=e),onChange:a[1]||(a[1]=e=>t.$emit("toggle-non-instructional",n.showNonInstructional))},null,544),[[e.vModelCheckbox,n.showNonInstructional]]),(0,e.createTextVNode)(" Show Non-Instructional Blocks ")]),(0,e.createElementVNode)("label",E,[(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=e=>n.showLessonSchedules=e),onChange:a[3]||(a[3]=(...e)=>n.handleLessonScheduleToggle&&n.handleLessonScheduleToggle(...e))},null,544),[[e.vModelCheckbox,n.showLessonSchedules]]),(0,e.createTextVNode)(" Show Lesson Schedules (No Course) ")])]),(0,e.createElementVNode)("div",N,[(0,e.createElementVNode)("label",_,[S,(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>n.isLiveMode=e),onChange:a[5]||(a[5]=(...e)=>n.handleModeSwitch&&n.handleModeSwitch(...e)),class:"mode-toggle"},null,544),[[e.vModelCheckbox,n.isLiveMode]]),w])]),(0,e.createElementVNode)("div",V,[(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.selectedYearFilter=e),onChange:a[7]||(a[7]=e=>t.$emit("filter-year",n.selectedYearFilter))},[D,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.yearGroups,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t,value:t},(0,e.toDisplayString)(t),9,B))),128))],544),[[e.vModelSelect,n.selectedYearFilter]])]),(0,e.createElementVNode)("div",I,[(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.selectedClassFilter=e),onChange:a[9]||(a[9]=(...e)=>n.handleClassFilterChange&&n.handleClassFilterChange(...e))},[A,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.availableClasses,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name),9,T))),128))],544),[[e.vModelSelect,n.selectedClassFilter]])]),(0,e.createElementVNode)("div",L,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":a[10]||(a[10]=e=>n.searchTerm=e),type:"text",placeholder:"Search courses/classes...",class:"search-input",title:"Search assignments by course, class, or teacher name"},null,512),[[e.vModelText,n.searchTerm]]),n.searchTerm?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:a[11]||(a[11]=e=>n.searchTerm=""),class:"clear-search-btn",title:"Clear search"}," ‚úï ")):(0,e.createCommentVNode)("v-if",!0),n.debouncedSearchTerm||n.selectedClassFilter?((0,e.openBlock)(),(0,e.createElementBlock)("div",z,[(0,e.createElementVNode)("small",null,[(0,e.createTextVNode)(" Filters active: "),n.debouncedSearchTerm?((0,e.openBlock)(),(0,e.createElementBlock)("span",j,'Search: "'+(0,e.toDisplayString)(n.debouncedSearchTerm)+'"',1)):(0,e.createCommentVNode)("v-if",!0),n.selectedClassFilter?((0,e.openBlock)(),(0,e.createElementBlock)("span",M,"Class: "+(0,e.toDisplayString)(n.getClassName(n.selectedClassFilter)),1)):(0,e.createCommentVNode)("v-if",!0),n.showLessonSchedules?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",F,"Courses only")),n.showNonInstructional?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",P,"Instructional periods only"))])])):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createElementVNode)("div",W,[n.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:a[12]||(a[12]=(...e)=>n.clearPeriodFocus&&n.clearPeriodFocus(...e)),class:"focus-button active",title:"Show all periods"}," Show All Periods (Currently: "+(0,e.toDisplayString)(n.getFocusedPeriodName())+") ",1)):((0,e.openBlock)(),(0,e.createElementBlock)("span",$,"Click a period name to focus on that period and see available courses"))]),(0,e.createElementVNode)("div",R,[(0,e.createElementVNode)("button",{onClick:a[13]||(a[13]=e=>t.$emit("undo-last")),disabled:!o.canUndo,class:"undo-button",title:"Undo last change"}," ‚Ü∂ Undo ",8,O),(0,e.createElementVNode)("button",{onClick:a[14]||(a[14]=e=>t.$emit("save-draft")),class:(0,e.normalizeClass)(["save-button",{saving:o.isSaving}])},(0,e.toDisplayString)(o.isSaving?"Saving...":"Save Draft"),3)])]),(0,e.createCommentVNode)(" Main Grid "),n.safeLength(n.visibleDays)>0&&n.safeLength(n.visiblePeriods)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",U,[(0,e.createCommentVNode)(" Debug info for main grid with visibility status "),(0,e.createElementVNode)("div",G,[(0,e.createElementVNode)("small",null," ‚úÖ NORMAL MODE - Days: "+(0,e.toDisplayString)(n.safeLength(n.visibleDays))+", Periods: "+(0,e.toDisplayString)(n.safeLength(n.visiblePeriods))+" | Drafts: "+(0,e.toDisplayString)(n.safeLength(o.draftSchedules))+", Live: "+(0,e.toDisplayString)(n.safeLength(o.liveSchedules))+" | Mode: "+(0,e.toDisplayString)(n.isLiveMode?"Live":"Planning"),1)]),(0,e.createCommentVNode)(" Grid Header with Days "),(0,e.createElementVNode)("div",q,[(0,e.createElementVNode)("div",Y,[Z,(0,e.createElementVNode)("div",H,[(0,e.createElementVNode)("small",null,"Days: "+(0,e.toDisplayString)(n.safeLength(n.visibleDays))+", Periods: "+(0,e.toDisplayString)(n.safeLength(n.visiblePeriods)),1)])]),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleDays,(t,a)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:"day-header-cell",role:"columnheader","aria-colindex":a+1},[(0,e.createElementVNode)("span",K,(0,e.toDisplayString)(t.name),1),t.date?((0,e.openBlock)(),(0,e.createElementBlock)("span",Q,(0,e.toDisplayString)(n.formatDate(t.date)),1)):(0,e.createCommentVNode)("v-if",!0),(0,e.createElementVNode)("div",X,[(0,e.createElementVNode)("small",null,"ID: "+(0,e.toDisplayString)(t.id),1)])],8,J))),128))]),(0,e.createCommentVNode)(" Grid Body "),(0,e.createElementVNode)("div",ee,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visiblePeriods,(t,s)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:(0,e.normalizeClass)(["grid-row",{"non-instructional":!t.is_instructional}]),role:"row","aria-rowindex":s+1},[(0,e.createCommentVNode)(" Period Label "),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["period-label-cell",{focused:n.focusedPeriodId===t.id}]),role:"rowheader",onClick:e=>n.togglePeriodFocus(t.id),title:"Click to focus on this period"},[(0,e.createElementVNode)("div",oe,[(0,e.createElementVNode)("span",ne,(0,e.toDisplayString)(t.name),1),(0,e.createElementVNode)("span",se,(0,e.toDisplayString)(n.formatTime(t.start_time))+" - "+(0,e.toDisplayString)(n.formatTime(t.end_time)),1),t.is_instructional?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",le,(0,e.toDisplayString)(t.type||"Break"),1)),(0,e.createElementVNode)("div",re,[(0,e.createElementVNode)("small",null,"ID: "+(0,e.toDisplayString)(t.id)+", Instructional: "+(0,e.toDisplayString)(!1!==t.is_instructional?"Yes":"No"),1)])])],10,ae),(0,e.createCommentVNode)(" Day Cells "),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleDays,s=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`${t.id}-${s.id}`,class:(0,e.normalizeClass)(["schedule-cell drop-zone",n.getCellClasses(s.id,t.id)]),role:"gridcell",tabindex:"0",onClick:e=>n.handleCellClick(s.id,t.id,t),onKeydown:[(0,e.withKeys)(e=>n.handleCellClick(s.id,t.id,t),["enter"]),(0,e.withKeys)((0,e.withModifiers)(e=>n.handleCellClick(s.id,t.id,t),["prevent"]),["space"])],"aria-label":n.getCellAriaLabel(s,t),onDragover:(0,e.withModifiers)(e=>n.handleCellDragOver(e,s.id,t.id),["prevent"]),onDragenter:(0,e.withModifiers)(e=>n.handleCellDragEnter(e,s.id,t.id),["prevent"]),onDragleave:e=>n.handleCellDragLeave(e,s.id,t.id),onDrop:e=>n.handleCellDrop(e,s.id,t.id),"data-day-id":s.id,"data-period-id":t.id},[(0,e.createCommentVNode)(" Multiple Assignments Display "),n.safeLength(n.getCellAssignments(s.id,t.id))>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",ie,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getCellAssignments(s.id,t.id),(l,d)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:d,class:(0,e.normalizeClass)(["assignment-item draggable-assignment",n.getAssignmentClasses(l)]),style:(0,e.normalizeStyle)(n.getAssignmentStyles(l)),onClick:(0,e.withModifiers)(e=>n.handleAssignmentClick(l,s.id,t.id),["stop"]),draggable:!o.isReadOnly&&!n.isEditing(l.id),onDragstart:e=>n.handleAssignmentDragStart(e,l,s.id,t.id),onDragend:a[15]||(a[15]=e=>n.handleAssignmentDragEnd(e)),"data-assignment-id":l.id,"data-day-id":s.id,"data-period-id":t.id},[(0,e.createCommentVNode)(" Normal Assignment Display "),n.isEditing(l.id)?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",ue,[(0,e.createElementVNode)("span",fe,(0,e.toDisplayString)(n.getDisplayName(l)),1),l.class_id?((0,e.openBlock)(),(0,e.createElementBlock)("span",me,(0,e.toDisplayString)(n.getClassName(l.class_id)),1)):(0,e.createCommentVNode)("v-if",!0),n.safeLength(l.teacher_ids)>0?((0,e.openBlock)(),(0,e.createElementBlock)("span",pe,(0,e.toDisplayString)(n.getTeacherNames(l.teacher_ids)),1)):(0,e.createCommentVNode)("v-if",!0),l.room_id?((0,e.openBlock)(),(0,e.createElementBlock)("span",ge,(0,e.toDisplayString)(n.getRoomName(l.room_id)),1)):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Quick Edit Button "),o.isReadOnly?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:3,onClick:(0,e.withModifiers)(e=>n.startInlineEdit(l,s.id,t.id),["stop"]),class:"quick-edit-btn",title:"Click to edit inline"}," ‚úèÔ∏è ",8,be))])),(0,e.createCommentVNode)(" Inline Editor "),n.isEditing(l.id)?((0,e.openBlock)(),(0,e.createBlock)(r,{key:1,assignment:l,courses:o.courses,teachers:o.teachers,classes:o.classes,rooms:o.rooms,subjects:o.subjects,onSave:n.saveInlineEdit,onCancel:n.cancelInlineEdit,onDelete:n.deleteInlineAssignment},null,8,["assignment","courses","teachers","classes","rooms","subjects","onSave","onCancel","onDelete"])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Conflict Indicators "),n.hasConflicts(l)?((0,e.openBlock)(),(0,e.createElementBlock)("div",ve," ‚ö†Ô∏è ")):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Deleted Entity Warnings "),n.hasDeletedEntities(l)?((0,e.openBlock)(),(0,e.createElementBlock)("div",he," ‚ùå ")):(0,e.createCommentVNode)("v-if",!0)],46,ce))),128)),(0,e.createCommentVNode)(" Add More Button for cells with assignments "),(0,e.createElementVNode)("button",{class:"add-more-button",onClick:(0,e.withModifiers)(e=>n.openAssignmentModal(s.id,t.id,t),["stop"]),title:"Add another assignment"}," + ",8,ye)])):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createCommentVNode)(" Empty Cell "),(0,e.createElementVNode)("div",{class:"empty-cell",onClick:e=>n.openAssignmentModal(s.id,t.id,t)},ke,8,xe)],2112))],42,de))),128))],10,te))),128))])])):((0,e.openBlock)(),(0,e.createElementBlock)(e.Fragment,{key:1},[(0,e.createCommentVNode)(" Debug info when grid is hidden "),(0,e.createElementVNode)("div",Ce,[(0,e.createElementVNode)("div",Ee,[(0,e.createTextVNode)(" ‚ùå Grid Hidden - Debug Info: "),(0,e.createElementVNode)("ul",null,[(0,e.createElementVNode)("li",null,"Visible Days: "+(0,e.toDisplayString)(n.safeLength(n.visibleDays))+" ("+(0,e.toDisplayString)(n.visibleDays.map(e=>e.name).join(", "))+")",1),(0,e.createElementVNode)("li",null," Visible Periods: "+(0,e.toDisplayString)(n.safeLength(n.visiblePeriods))+" ("+(0,e.toDisplayString)(n.visiblePeriods.map(e=>e.name||e.label).join(", "))+") ",1),(0,e.createElementVNode)("li",null,"Show Non-Instructional: "+(0,e.toDisplayString)(n.showNonInstructional),1),(0,e.createElementVNode)("li",null,"Focused Period: "+(0,e.toDisplayString)(n.focusedPeriodId),1),(0,e.createElementVNode)("li",null,"Total Periods Available: "+(0,e.toDisplayString)(n.safeLength(o.periods)),1),(0,e.createElementVNode)("li",null,"Total School Days Available: "+(0,e.toDisplayString)(n.safeLength(o.schoolDays)),1)]),(0,e.createElementVNode)("button",{onClick:a[16]||(a[16]=e=>{n.showNonInstructional=!0,n.focusedPeriodId=null}),class:"emergency-show-btn"}," üö® Emergency: Show All Data ")])])],2112)),(0,e.createCommentVNode)(" Available Courses for Focused Period "),n.focusedPeriodId?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ne,[(0,e.createElementVNode)("h3",null,"Available Courses for "+(0,e.toDisplayString)(n.getFocusedPeriodName()),1),_e,(0,e.createElementVNode)("div",Se,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleDays,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:"day-courses-column"},[(0,e.createElementVNode)("h4",null,(0,e.toDisplayString)(t.name),1),(0,e.createElementVNode)("div",we,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getAvailableCoursesForSlot(t.id,n.focusedPeriodId),o=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:o.id,class:"course-card draggable-course",style:(0,e.normalizeStyle)(n.getCourseCardStyle(o)),onClick:e=>n.assignCourseToSlot(o,t.id,n.focusedPeriodId),title:`Click to assign or drag ${o.name||o.course_name} to schedule`,draggable:!0,"data-course-id":o.id,"data-day-id":t.id,"data-period-id":n.focusedPeriodId,onDragstart:e=>n.handleCourseDragStart(e,o),onDragend:a[17]||(a[17]=e=>n.handleCourseDragEnd(e))},[(0,e.createElementVNode)("div",De,(0,e.toDisplayString)(o.name||o.course_name||o.title),1),(0,e.createElementVNode)("div",Be,[o.course_code?((0,e.openBlock)(),(0,e.createElementBlock)("small",Ie,"Code: "+(0,e.toDisplayString)(o.course_code),1)):(0,e.createCommentVNode)("v-if",!0),o.max_students?((0,e.openBlock)(),(0,e.createElementBlock)("small",Ae,"Max: "+(0,e.toDisplayString)(o.max_students),1)):(0,e.createCommentVNode)("v-if",!0),o.subject_name?((0,e.openBlock)(),(0,e.createElementBlock)("small",Te,(0,e.toDisplayString)(o.subject_name),1)):(0,e.createCommentVNode)("v-if",!0)])],44,Ve))),128)),0===n.safeLength(n.getAvailableCoursesForSlot(t.id,n.focusedPeriodId))?((0,e.openBlock)(),(0,e.createElementBlock)("div",Le," No courses available for this day/period ")):(0,e.createCommentVNode)("v-if",!0)])]))),128))]),(0,e.createCommentVNode)(" No Preferred Days Courses Panel "),n.safeLength(n.getNoPreferredDaysCourses())>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",ze,[je,Me,(0,e.createElementVNode)("div",Fe,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getNoPreferredDaysCourses(),t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:`no-pref-${t.id}`,class:"course-card",style:(0,e.normalizeStyle)(n.getCourseCardStyle(t)),onClick:e=>n.assignCourseToFocusedSlot(t),title:`${t.name||t.course_name} - Can be scheduled on any day`},[(0,e.createElementVNode)("div",We,(0,e.toDisplayString)(t.name||t.course_name||t.title),1),(0,e.createElementVNode)("div",$e,[t.course_code?((0,e.openBlock)(),(0,e.createElementBlock)("small",Re,"Code: "+(0,e.toDisplayString)(t.course_code),1)):(0,e.createCommentVNode)("v-if",!0),t.max_students?((0,e.openBlock)(),(0,e.createElementBlock)("small",Oe,"Max: "+(0,e.toDisplayString)(t.max_students),1)):(0,e.createCommentVNode)("v-if",!0),t.subject_name?((0,e.openBlock)(),(0,e.createElementBlock)("small",Ue,(0,e.toDisplayString)(t.subject_name),1)):(0,e.createCommentVNode)("v-if",!0),Ge])],12,Pe))),128))])])):(0,e.createCommentVNode)("v-if",!0)])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Statistics Panel (if enabled) "),o.showStatistics?((0,e.openBlock)(),(0,e.createElementBlock)("div",qe,[Ye,(0,e.createElementVNode)("div",Ze,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.yearGroupStats,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.year,class:"year-stats"},[(0,e.createElementVNode)("h4",null,(0,e.toDisplayString)(t.year),1),(0,e.createElementVNode)("div",He,[Je,(0,e.createElementVNode)("span",Ke,(0,e.toDisplayString)(t.scheduledCourses)+"/day",1)]),(0,e.createElementVNode)("div",Qe,[Xe,(0,e.createElementVNode)("span",et,(0,e.toDisplayString)(t.availableSlots),1)]),(0,e.createElementVNode)("div",tt,[at,(0,e.createElementVNode)("span",ot,(0,e.toDisplayString)(Math.round(t.utilization))+"%",1)])]))),128))])])):(0,e.createCommentVNode)("v-if",!0)])}],["__scopeId","data-v-65eedbfa"]]),Tt=t=>((0,e.pushScopeId)("data-v-fdab452a"),t=t(),(0,e.popScopeId)(),t),Lt={class:"modal-header"},zt={key:0,class:"period-info"},jt={class:"info-item"},Mt=Tt(()=>(0,e.createElementVNode)("strong",null,"Day:",-1)),Ft={class:"info-item"},Pt=Tt(()=>(0,e.createElementVNode)("strong",null,"Period:",-1)),Wt={class:"info-item"},$t=Tt(()=>(0,e.createElementVNode)("strong",null,"Time:",-1)),Rt={key:1,class:"existing-assignments"},Ot={class:"assignment-list"},Ut={class:"assignment-header"},Gt={class:"course-name"},qt={class:"assignment-actions"},Yt=["onClick"],Zt=["onClick"],Ht={class:"assignment-details"},Jt={key:0,class:"detail-item"},Kt=Tt(()=>(0,e.createElementVNode)("strong",null,"Class:",-1)),Qt={key:1,class:"detail-item"},Xt=Tt(()=>(0,e.createElementVNode)("strong",null,"Teachers:",-1)),ea={key:2,class:"detail-item"},ta=Tt(()=>(0,e.createElementVNode)("strong",null,"Room:",-1)),aa={key:3,class:"detail-item"},oa=Tt(()=>(0,e.createElementVNode)("strong",null,"Meeting:",-1)),na={key:0,class:"conflicts-section"},sa=Tt(()=>(0,e.createElementVNode)("div",{class:"conflicts-header"},"‚ö†Ô∏è Conflicts Detected",-1)),la={class:"conflicts-list"},ra={class:"available-courses"},da=Tt(()=>(0,e.createElementVNode)("h3",null,"Available Courses",-1)),ia={class:"course-filter"},ca=Tt(()=>(0,e.createElementVNode)("option",{value:""},"All Year Groups",-1)),ua=["value"],fa={class:"course-grid"},ma=["onClick"],pa={class:"course-header"},ga={class:"course-name"},ba={class:"course-indicators"},va={key:0,class:"unavailable-badge",title:"Not in possible time slots"},ha={key:1,class:"conflict-badge",title:"Would cause conflict"},ya={key:0,class:"course-description"},xa={class:"course-details"},ka={key:0,class:"detail-small"},Ca={key:1,class:"detail-small"},Ea={key:0,class:"no-courses"},Na={key:2,class:"quick-assign-form"},_a={class:"form-grid"},Sa={class:"form-group"},wa=Tt(()=>(0,e.createElementVNode)("label",{for:"assign-class"},"Class:",-1)),Va=Tt(()=>(0,e.createElementVNode)("option",{value:""},"Select Class",-1)),Da=["value"],Ba={class:"form-group"},Ia=Tt(()=>(0,e.createElementVNode)("label",{for:"assign-room"},"Room:",-1)),Aa=Tt(()=>(0,e.createElementVNode)("option",{value:""},"Select Room",-1)),Ta=["value"],La={class:"form-group"},za=Tt(()=>(0,e.createElementVNode)("label",null,"Teachers:",-1)),ja={class:"teacher-grid"},Ma=["value"],Fa={class:"form-group"},Pa=Tt(()=>(0,e.createElementVNode)("label",{for:"meeting-name"},"Meeting Name (optional):",-1)),Wa={class:"form-actions"},$a=["disabled"],Ra={name:"AssignmentModal",props:{visible:{type:Boolean,default:!1},dayId:{type:Number,default:null},periodId:{type:Number,default:null},period:{type:Object,default:null},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},schoolDays:{type:Array,default:()=>[]},existingAssignments:{type:Array,default:()=>[]},conflicts:{type:Array,default:()=>[]},isReadOnly:{type:Boolean,default:!1},preSelectedCourse:{type:Object,default:null}},emits:["close","add-assignment","edit-assignment","remove-assignment"],setup(t,{emit:a}){const o=(0,e.ref)(""),n=(0,e.ref)(""),s=(0,e.ref)(null),l=(0,e.ref)({class_id:"",teacher_ids:[],room_id:"",meeting_name:""});(0,e.watch)(()=>t.preSelectedCourse,e=>{e&&t.visible&&(console.log("üéØ [AssignmentModal] Pre-selecting course:",{courseId:e.id,courseName:e.name||e.course_name}),b(e))},{immediate:!0}),(0,e.watch)(()=>t.visible,e=>{e||(s.value=null,l.value={class_id:"",teacher_ids:[],room_id:"",meeting_name:""})});const r=(0,e.computed)(()=>{if(!t.period)return"Manage Assignments";const e=t.schoolDays.find(e=>e.id===t.dayId||e.day_id===t.dayId);return`${e?.name||"Unknown Day"} - ${t.period?.name||t.period?.label||"Unknown Period"}`}),d=(0,e.computed)(()=>{if(!t.period)return null;const e=t.schoolDays.find(e=>e.id===t.dayId||e.day_id===t.dayId);return{dayName:e?.name||"Unknown Day",periodName:t.period?.name||t.period?.label||"Unknown Period",timeRange:`${g(t.period.start_time)} - ${g(t.period.end_time)}`}}),i=(0,e.computed)(()=>{const e=new Set;return t.classes.forEach(t=>{t.year_group&&e.add(t.year_group)}),Array.from(e).sort()}),c=(0,e.computed)(()=>{let e=t.courses;if(console.log("üìö [AssignmentModal] filteredCourses computation:",{totalCourses:Vt(t.courses),courseFilter:o.value,yearGroupFilter:n.value,sampleCourse:t.courses[0]}),o.value){const a=o.value.toLowerCase();e=e.filter(e=>{const t=[e.name,e.course_name,e.title,e.description,e.course_code,e.subject_name,e.important_information].filter(Boolean),o=t.some(e=>e?.toLowerCase().includes(a));return"archery"===a&&console.log("üîç [AssignmentModal] Archery search debug:",{courseId:e.id,searchableFields:t,matches:o,course:e}),o}),console.log("üìö [AssignmentModal] Search filtering:",{searchTerm:o.value,beforeFiltering:Vt(t.courses),afterFiltering:Vt(e),matchedCourses:e.map(e=>({id:e.id,name:e.name||e.course_name||e.title,code:e.course_code}))})}return n.value&&(e=e.filter(e=>e.year_groups?.includes(n.value))),console.log("üìö [AssignmentModal] Filtered courses result:",{filteredCount:Vt(e),courses:e.map(e=>({id:e.id,name:e.name}))}),e}),u=(0,e.computed)(()=>s.value&&s.value.year_groups?.length?t.classes.filter(e=>s.value.year_groups.includes(e.year_group)):t.classes),f=(0,e.computed)(()=>s.value&&s.value.subject_ids?.length?t.teachers.filter(e=>e.subject_ids?.some(e=>s.value.subject_ids.includes(e))):t.teachers),m=(0,e.computed)(()=>t.rooms),p=(0,e.computed)(()=>l.value.class_id&&Vt(l.value.teacher_ids)>0);function g(e){if(!e)return"";const t=e.split(":");return t.length>=2?`${t[0]}:${t[1]}`:e}function b(e){t.isReadOnly||(s.value=e,l.value={class_id:"",teacher_ids:[],room_id:"",meeting_name:""})}return(0,e.watch)(()=>t.visible,e=>{e||(s.value=null)}),{courseFilter:o,yearGroupFilter:n,selectedCourse:s,assignmentForm:l,modalTitle:r,periodInfo:d,yearGroups:i,filteredCourses:c,availableClasses:u,availableTeachers:f,availableRooms:m,isAssignmentValid:p,formatTime:g,getCourseName:function(e){if(!e)return"No Course";const a=t.courses.find(t=>t.id===e);return a?.name||a?.course_name||a?.title||"Unknown Course"},getClassName:function(e){if(!e)return"No Class";const a=t.classes.find(t=>t.id===e);return a?.name||"Unknown Class"},getTeacherNames:function(e){return e?.length?e.map(e=>{const a=t.teachers.find(t=>t.id===e);return a?.name||"Unknown Teacher"}).join(", "):"No Teachers"},getRoomName:function(e){if(!e)return"No Room";const a=t.rooms.find(t=>t.id===e);return a?.name||"Unknown Room"},hasAssignmentConflicts:function(e){return t.conflicts.some(t=>t.day_id===e.day_id&&t.period_id===e.period_id&&(t.assignment_id===e.id||t.teacher_ids?.some(t=>e.teacher_ids?.includes(t))||t.class_id===e.class_id||t.room_id===e.room_id))},getAssignmentConflicts:function(e){return t.conflicts.filter(t=>t.day_id===e.day_id&&t.period_id===e.period_id&&(t.assignment_id===e.id||t.teacher_ids?.some(t=>e.teacher_ids?.includes(t))||t.class_id===e.class_id||t.room_id===e.room_id))},getAssignmentCardStyle:function(e){const a=t.courses.find(t=>t.id===e.course_id),o=t.classes.find(t=>t.id===e.class_id);return{borderLeft:`4px solid ${a?.color||o?.color||"#e0e0e0"}`,backgroundColor:a?.color?`${a.color}10`:o?.color?`${o.color}10`:"#f9f9f9"}},isCourseAvailable:function(e){const a=Bt(e,0);if(0===Vt(a.possibleSlots))return console.log("üìö [AssignmentModal] Course has no time slot restrictions:",{courseId:a.id,courseName:a.name}),!0;console.log("üìö [AssignmentModal] Checking course availability:",{courseId:a.id,courseName:a.name,possibleSlots:a.possibleSlots,currentDayId:t.dayId,currentPeriodId:t.periodId});const o=a.possibleSlots.some(e=>{const a=e.dayId===t.dayId&&e.periodId===t.periodId;return a&&console.log("  ‚úÖ Slot matches:",{slot:e,targetDayId:t.dayId,targetPeriodId:t.periodId}),a});return console.log("üìö [AssignmentModal] Course availability result:",{courseId:a.id,courseName:a.name,isAvailable:o}),o},wouldCauseConflict:function(e){return t.existingAssignments.some(t=>t.course_id===e.id)},getCourseCardStyle:function(e){return{backgroundColor:e.color?`${e.color}15`:"#f9f9f9",borderColor:e.color||"#e0e0e0"}},selectCourse:b,cancelSelection:function(){s.value=null},confirmAssignment:function(){if(!p.value||!s.value)return;const e={schedule_type:"period",day_id:t.dayId,period_id:t.periodId,start_time:t.period.start_time,end_time:t.period.end_time,course_id:s.value.id,subject_id:s.value.subject_id||null,class_id:l.value.class_id,teacher_ids:[...l.value.teacher_ids],room_id:l.value.room_id||null,meeting_name:l.value.meeting_name||null,notes:null};a("add-assignment",e),s.value=null},editAssignment:function(e){a("edit-assignment",e)},removeAssignment:function(e){a("remove-assignment",e)},closeModal:function(){s.value=null,a("close")},safeLength:Vt,safeArray:Dt}}};a(650);const Oa=(0,Nt.Z)(Ra,[["render",function(t,a,o,n,s,l){return o.visible?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"assignment-modal-overlay",onClick:a[10]||(a[10]=(...e)=>n.closeModal&&n.closeModal(...e))},[(0,e.createElementVNode)("div",{class:"assignment-modal",onClick:a[9]||(a[9]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createCommentVNode)(" Header "),(0,e.createElementVNode)("div",Lt,[(0,e.createElementVNode)("h2",null,(0,e.toDisplayString)(n.modalTitle),1),(0,e.createElementVNode)("button",{class:"close-button",onClick:a[0]||(a[0]=(...e)=>n.closeModal&&n.closeModal(...e)),"aria-label":"Close"},"√ó")]),(0,e.createCommentVNode)(" Period/Time Info "),n.periodInfo?((0,e.openBlock)(),(0,e.createElementBlock)("div",zt,[(0,e.createElementVNode)("div",jt,[Mt,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(n.periodInfo.dayName),1)]),(0,e.createElementVNode)("div",Ft,[Pt,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(n.periodInfo.periodName),1)]),(0,e.createElementVNode)("div",Wt,[$t,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(n.periodInfo.timeRange),1)])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Existing Assignments "),n.safeLength(o.existingAssignments)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",Rt,[(0,e.createElementVNode)("h3",null,"Current Assignments ("+(0,e.toDisplayString)(n.safeLength(o.existingAssignments))+")",1),(0,e.createElementVNode)("div",Ot,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(o.existingAssignments,(t,a)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:a,class:(0,e.normalizeClass)(["assignment-card",{"has-conflicts":n.hasAssignmentConflicts(t)}]),style:(0,e.normalizeStyle)(n.getAssignmentCardStyle(t))},[(0,e.createElementVNode)("div",Ut,[(0,e.createElementVNode)("span",Gt,(0,e.toDisplayString)(n.getCourseName(t.course_id)),1),(0,e.createElementVNode)("div",qt,[(0,e.createElementVNode)("button",{onClick:e=>n.editAssignment(t),class:"edit-btn",title:"Edit assignment"}," ‚úèÔ∏è ",8,Yt),(0,e.createElementVNode)("button",{onClick:e=>n.removeAssignment(t),class:"remove-btn",title:"Remove assignment"}," üóëÔ∏è ",8,Zt)])]),(0,e.createElementVNode)("div",Ht,[t.class_id?((0,e.openBlock)(),(0,e.createElementBlock)("div",Jt,[Kt,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(n.getClassName(t.class_id)),1)])):(0,e.createCommentVNode)("v-if",!0),n.safeLength(t.teacher_ids)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",Qt,[Xt,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(n.getTeacherNames(t.teacher_ids)),1)])):(0,e.createCommentVNode)("v-if",!0),t.room_id?((0,e.openBlock)(),(0,e.createElementBlock)("div",ea,[ta,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(n.getRoomName(t.room_id)),1)])):(0,e.createCommentVNode)("v-if",!0),t.meeting_name?((0,e.openBlock)(),(0,e.createElementBlock)("div",aa,[oa,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(t.meeting_name),1)])):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createCommentVNode)(" Conflict Warnings "),n.hasAssignmentConflicts(t)?((0,e.openBlock)(),(0,e.createElementBlock)("div",na,[sa,(0,e.createElementVNode)("ul",la,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.getAssignmentConflicts(t),t=>((0,e.openBlock)(),(0,e.createElementBlock)("li",{key:t.id},(0,e.toDisplayString)(t.message),1))),128))])])):(0,e.createCommentVNode)("v-if",!0)],6))),128))])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Available Courses Section "),(0,e.createElementVNode)("div",ra,[da,(0,e.createCommentVNode)(" Course Filter "),(0,e.createElementVNode)("div",ia,[(0,e.withDirectives)((0,e.createElementVNode)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.courseFilter=e),type:"text",placeholder:"Search courses...",class:"filter-input"},null,512),[[e.vModelText,n.courseFilter]]),(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.yearGroupFilter=e),class:"filter-select"},[ca,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.yearGroups,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t,value:t},(0,e.toDisplayString)(t),9,ua))),128))],512),[[e.vModelSelect,n.yearGroupFilter]])]),(0,e.createCommentVNode)(" Course List "),(0,e.createElementVNode)("div",fa,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.filteredCourses,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:(0,e.normalizeClass)(["course-card",{available:n.isCourseAvailable(t),unavailable:!n.isCourseAvailable(t),"conflict-warning":n.wouldCauseConflict(t)}]),style:(0,e.normalizeStyle)(n.getCourseCardStyle(t)),onClick:e=>n.selectCourse(t)},[(0,e.createElementVNode)("div",pa,[(0,e.createElementVNode)("span",ga,(0,e.toDisplayString)(t.name),1),(0,e.createElementVNode)("div",ba,[n.isCourseAvailable(t)?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("span",va,"üö´")),n.wouldCauseConflict(t)?((0,e.openBlock)(),(0,e.createElementBlock)("span",ha,"‚ö†Ô∏è")):(0,e.createCommentVNode)("v-if",!0)])]),t.description?((0,e.openBlock)(),(0,e.createElementBlock)("div",ya,(0,e.toDisplayString)(t.description),1)):(0,e.createCommentVNode)("v-if",!0),(0,e.createElementVNode)("div",xa,[n.safeLength(t.year_groups)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",ka," Years: "+(0,e.toDisplayString)(t.year_groups.join(", ")),1)):(0,e.createCommentVNode)("v-if",!0),t.duration?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ca,"Duration: "+(0,e.toDisplayString)(t.duration)+"min",1)):(0,e.createCommentVNode)("v-if",!0)])],14,ma))),128))]),0===n.safeLength(n.filteredCourses)?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ea," No courses match your search criteria. ")):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createCommentVNode)(" Quick Assignment Form (appears after selecting course) "),n.selectedCourse?((0,e.openBlock)(),(0,e.createElementBlock)("div",Na,[(0,e.createElementVNode)("h3",null,"Assign "+(0,e.toDisplayString)(n.selectedCourse.name),1),(0,e.createElementVNode)("div",_a,[(0,e.createElementVNode)("div",Sa,[wa,(0,e.withDirectives)((0,e.createElementVNode)("select",{id:"assign-class","onUpdate:modelValue":a[3]||(a[3]=e=>n.assignmentForm.class_id=e),required:""},[Va,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.availableClasses,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name),9,Da))),128))],512),[[e.vModelSelect,n.assignmentForm.class_id]])]),(0,e.createElementVNode)("div",Ba,[Ia,(0,e.withDirectives)((0,e.createElementVNode)("select",{id:"assign-room","onUpdate:modelValue":a[4]||(a[4]=e=>n.assignmentForm.room_id=e)},[Aa,((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.availableRooms,t=>((0,e.openBlock)(),(0,e.createElementBlock)("option",{key:t.id,value:t.id},(0,e.toDisplayString)(t.name),9,Ta))),128))],512),[[e.vModelSelect,n.assignmentForm.room_id]])])]),(0,e.createElementVNode)("div",La,[za,(0,e.createElementVNode)("div",ja,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.availableTeachers,t=>((0,e.openBlock)(),(0,e.createElementBlock)("label",{key:t.id,class:"teacher-checkbox"},[(0,e.withDirectives)((0,e.createElementVNode)("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":a[5]||(a[5]=e=>n.assignmentForm.teacher_ids=e)},null,8,Ma),[[e.vModelCheckbox,n.assignmentForm.teacher_ids]]),(0,e.createTextVNode)(" "+(0,e.toDisplayString)(t.name),1)]))),128))])]),(0,e.createElementVNode)("div",Fa,[Pa,(0,e.withDirectives)((0,e.createElementVNode)("input",{id:"meeting-name","onUpdate:modelValue":a[6]||(a[6]=e=>n.assignmentForm.meeting_name=e),type:"text",placeholder:"Custom meeting name"},null,512),[[e.vModelText,n.assignmentForm.meeting_name]])]),(0,e.createElementVNode)("div",Wa,[(0,e.createElementVNode)("button",{onClick:a[7]||(a[7]=(...e)=>n.cancelSelection&&n.cancelSelection(...e)),class:"cancel-btn"},"Cancel"),(0,e.createElementVNode)("button",{onClick:a[8]||(a[8]=(...e)=>n.confirmAssignment&&n.confirmAssignment(...e)),class:"confirm-btn",disabled:!n.isAssignmentValid}," Add Assignment ",8,$a)])])):(0,e.createCommentVNode)("v-if",!0)])])):(0,e.createCommentVNode)("v-if",!0)}],["__scopeId","data-v-fdab452a"]]),Ua=t=>((0,e.pushScopeId)("data-v-52ced96f"),t=t(),(0,e.popScopeId)(),t),Ga={key:0,class:"conflict-panel"},qa={class:"panel-header"},Ya=Ua(()=>(0,e.createElementVNode)("span",{class:"conflict-icon"},"‚ö†Ô∏è",-1)),Za={class:"header-actions"},Ha=[(0,e.createStaticVNode)('<option value="" data-v-52ced96f>All Conflicts</option><option value="teacher" data-v-52ced96f>Teacher Conflicts</option><option value="room" data-v-52ced96f>Room Conflicts</option><option value="class" data-v-52ced96f>Class Conflicts</option><option value="time" data-v-52ced96f>Time Conflicts</option>',5)],Ja={class:"panel-content"},Ka={key:0,class:"no-conflicts"},Qa=[Ua(()=>(0,e.createElementVNode)("div",{class:"no-conflicts-icon"},"‚úÖ",-1)),Ua(()=>(0,e.createElementVNode)("h4",null,"No Conflicts Found",-1)),Ua(()=>(0,e.createElementVNode)("p",null,"Your schedule is conflict-free!",-1))],Xa={key:1,class:"conflicts-list"},eo={class:"conflict-header"},to={class:"conflict-title"},ao={class:"conflict-actions"},oo=["onClick"],no=["onClick"],so={class:"conflict-description"},lo={class:"conflict-details"},ro={class:"detail-row"},io=Ua(()=>(0,e.createElementVNode)("strong",null,"Time:",-1)),co={key:0},uo={key:0,class:"detail-row"},fo=Ua(()=>(0,e.createElementVNode)("strong",null,"Courses:",-1)),mo={class:"course-list"},po={key:1,class:"detail-row"},go=Ua(()=>(0,e.createElementVNode)("strong",null,"Teachers:",-1)),bo={class:"teacher-list"},vo={key:2,class:"detail-row"},ho=Ua(()=>(0,e.createElementVNode)("strong",null,"Classes:",-1)),yo={class:"class-list"},xo={key:3,class:"detail-row"},ko=Ua(()=>(0,e.createElementVNode)("strong",null,"Rooms:",-1)),Co={class:"room-list"},Eo={key:0,class:"conflict-suggestions"},No=Ua(()=>(0,e.createElementVNode)("div",{class:"suggestions-header"},"üí° Suggested Solutions:",-1)),_o={class:"suggestions-list"},So={class:"suggestion-text"},wo=["onClick"],Vo={key:1,class:"auto-resolve"},Do=["onClick"],Bo={key:0,class:"panel-footer"},Io={class:"conflict-summary"},Ao={class:"summary-item critical"},To={class:"summary-item high"},Lo={class:"summary-item medium"},zo={class:"summary-item low"},jo={class:"panel-actions"},Mo={name:"ConflictPanel",props:{visible:{type:Boolean,default:!1},conflicts:{type:Array,default:()=>[]},courses:{type:Array,default:()=>[]},teachers:{type:Array,default:()=>[]},classes:{type:Array,default:()=>[]},rooms:{type:Array,default:()=>[]},periods:{type:Array,default:()=>[]},schoolDays:{type:Array,default:()=>[]}},emits:["close","navigate-to-conflict","apply-suggestion","ignore-conflict","auto-resolve-all"],setup(t,{emit:a}){const o=(0,e.ref)(""),n=(0,e.computed)(()=>o.value?t.conflicts.filter(e=>e.type===o.value):t.conflicts),s=(0,e.computed)(()=>t.conflicts.filter(e=>"critical"===e.severity).length),l=(0,e.computed)(()=>t.conflicts.filter(e=>"high"===e.severity).length),r=(0,e.computed)(()=>t.conflicts.filter(e=>"medium"===e.severity).length),d=(0,e.computed)(()=>t.conflicts.filter(e=>"low"===e.severity).length),i=(0,e.computed)(()=>t.conflicts.filter(e=>e.auto_resolvable).length);function c(e){const a=t.schoolDays.find(t=>t.id===e);return a?.name||"Unknown Day"}function u(e){const a=t.periods.find(t=>t.id===e);return a?.name||"Unknown Period"}function f(e){return{teacher:"Teacher",room:"Room",class:"Class",time:"Time",resource:"Resource",warning:"Warning"}[e]||"Unknown"}function m(e){switch(e.type){case"teacher":return"Teacher is assigned to multiple classes at the same time";case"room":return"Room is booked for multiple classes at the same time";case"class":return"Class has overlapping assignments";case"time":return"Time slot conflict detected";default:return"Scheduling conflict detected"}}return{filterType:o,visibleConflicts:n,criticalConflicts:s,highConflicts:l,mediumConflicts:r,lowConflicts:d,autoResolvableConflicts:i,formatTime:function(e){if(!e)return"";const t=e.split(":");return t.length>=2?`${t[0]}:${t[1]}`:e},getDayName:c,getPeriodName:u,getCourseName:function(e){const a=t.courses.find(t=>t.id===e);return a?.name||"Unknown Course"},getTeacherName:function(e){const a=t.teachers.find(t=>t.id===e);return a?.name||"Unknown Teacher"},getClassName:function(e){const a=t.classes.find(t=>t.id===e);return a?.name||"Unknown Class"},getRoomName:function(e){const a=t.rooms.find(t=>t.id===e);return a?.name||"Unknown Room"},getCourseStyle:function(e){const a=t.courses.find(t=>t.id===e);return a?.color?{backgroundColor:a.color,color:"#fff"}:{}},getTeacherStyle:function(e){const a=t.teachers.find(t=>t.id===e);return a?.color?{backgroundColor:a.color,color:"#fff"}:{}},getClassStyle:function(e){const a=t.classes.find(t=>t.id===e);return a?.color?{backgroundColor:a.color,color:"#fff"}:{}},getConflictTypeIcon:function(e){return{teacher:"üë®‚Äçüè´",room:"üè†",class:"üë•",time:"‚è∞",resource:"üìã",warning:"‚ö†Ô∏è"}[e]||"‚ö†Ô∏è"},getConflictTypeName:f,getSeverityIcon:function(e){return{critical:"üî¥",high:"üü†",medium:"üü°",low:"üü¢"}[e]||"üü°"},getDefaultConflictMessage:m,navigateToConflict:function(e){a("navigate-to-conflict",e)},suggestFix:function(e){console.log("Suggesting fixes for conflict:",e)},applySuggestion:function(e){a("apply-suggestion",e)},ignoreConflict:function(e){a("ignore-conflict",e)},autoResolveAll:function(){a("auto-resolve-all")},exportConflicts:function(){const e=t.conflicts.map(e=>({Type:f(e.type),Severity:e.severity,Day:c(e.day_id),Period:u(e.period_id),Message:e.message||m(e)})),a=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),o=new Blob([a],{type:"text/csv"}),n=URL.createObjectURL(o),s=document.createElement("a");s.href=n,s.download="schedule-conflicts.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}}}};a(841);const Fo={name:"CourseScheduler",components:{SchedulerGrid:At,AssignmentModal:Oa,ConflictPanel:(0,Nt.Z)(Mo,[["render",function(t,a,o,n,s,l){return o.visible?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ga,[(0,e.createElementVNode)("div",qa,[(0,e.createElementVNode)("h3",null,[Ya,(0,e.createTextVNode)(" Schedule Conflicts ("+(0,e.toDisplayString)(n.visibleConflicts.length)+") ",1)]),(0,e.createElementVNode)("div",Za,[(0,e.withDirectives)((0,e.createElementVNode)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.filterType=e),class:"filter-select"},Ha,512),[[e.vModelSelect,n.filterType]]),(0,e.createElementVNode)("button",{onClick:a[1]||(a[1]=e=>t.$emit("close")),class:"close-button",title:"Close panel"},"√ó")])]),(0,e.createElementVNode)("div",Ja,[0===n.visibleConflicts.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ka,Qa)):((0,e.openBlock)(),(0,e.createElementBlock)("div",Xa,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(n.visibleConflicts,t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:(0,e.normalizeClass)(["conflict-item",`conflict-type-${t.type}`])},[(0,e.createElementVNode)("div",eo,[(0,e.createElementVNode)("div",to,[(0,e.createElementVNode)("span",{class:(0,e.normalizeClass)(["conflict-type-badge",`badge-${t.type}`])},(0,e.toDisplayString)(n.getConflictTypeIcon(t.type))+" "+(0,e.toDisplayString)(n.getConflictTypeName(t.type)),3),(0,e.createElementVNode)("span",{class:(0,e.normalizeClass)(["conflict-severity",`severity-${t.severity||"medium"}`])},(0,e.toDisplayString)(n.getSeverityIcon(t.severity)),3)]),(0,e.createElementVNode)("div",ao,[(0,e.createElementVNode)("button",{onClick:e=>n.navigateToConflict(t),class:"navigate-btn",title:"Go to conflict location"}," üìç Go To ",8,oo),"warning"!==t.type?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:e=>n.suggestFix(t),class:"suggest-btn",title:"Get suggestions to fix"}," üí° Fix ",8,no)):(0,e.createCommentVNode)("v-if",!0)])]),(0,e.createElementVNode)("div",so,(0,e.toDisplayString)(t.message||n.getDefaultConflictMessage(t)),1),(0,e.createElementVNode)("div",lo,[(0,e.createElementVNode)("div",ro,[io,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(n.getDayName(t.day_id))+", "+(0,e.toDisplayString)(n.getPeriodName(t.period_id))+" ",1),t.start_time&&t.end_time?((0,e.openBlock)(),(0,e.createElementBlock)("span",co," ("+(0,e.toDisplayString)(n.formatTime(t.start_time))+" - "+(0,e.toDisplayString)(n.formatTime(t.end_time))+") ",1)):(0,e.createCommentVNode)("v-if",!0)]),t.affected_courses?.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",uo,[fo,(0,e.createElementVNode)("span",mo,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(t.affected_courses,t=>((0,e.openBlock)(),(0,e.createElementBlock)("span",{key:t,class:"course-tag",style:(0,e.normalizeStyle)(n.getCourseStyle(t))},(0,e.toDisplayString)(n.getCourseName(t)),5))),128))])])):(0,e.createCommentVNode)("v-if",!0),t.affected_teachers?.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",po,[go,(0,e.createElementVNode)("span",bo,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(t.affected_teachers,t=>((0,e.openBlock)(),(0,e.createElementBlock)("span",{key:t,class:"teacher-tag",style:(0,e.normalizeStyle)(n.getTeacherStyle(t))},(0,e.toDisplayString)(n.getTeacherName(t)),5))),128))])])):(0,e.createCommentVNode)("v-if",!0),t.affected_classes?.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",vo,[ho,(0,e.createElementVNode)("span",yo,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(t.affected_classes,t=>((0,e.openBlock)(),(0,e.createElementBlock)("span",{key:t,class:"class-tag",style:(0,e.normalizeStyle)(n.getClassStyle(t))},(0,e.toDisplayString)(n.getClassName(t)),5))),128))])])):(0,e.createCommentVNode)("v-if",!0),t.affected_rooms?.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",xo,[ko,(0,e.createElementVNode)("span",Co,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(t.affected_rooms,t=>((0,e.openBlock)(),(0,e.createElementBlock)("span",{key:t,class:"room-tag"},(0,e.toDisplayString)(n.getRoomName(t)),1))),128))])])):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createCommentVNode)(" Suggestions (if available) "),t.suggestions?.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",Eo,[No,(0,e.createElementVNode)("ul",_o,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(t.suggestions,t=>((0,e.openBlock)(),(0,e.createElementBlock)("li",{key:t.id,class:"suggestion-item"},[(0,e.createElementVNode)("span",So,(0,e.toDisplayString)(t.text),1),t.action?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:e=>n.applySuggestion(t),class:"apply-suggestion-btn"}," Apply ",8,wo)):(0,e.createCommentVNode)("v-if",!0)]))),128))])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Auto-resolve option for low-severity conflicts "),"low"===t.severity||"warning"===t.type?((0,e.openBlock)(),(0,e.createElementBlock)("div",Vo,[(0,e.createElementVNode)("button",{onClick:e=>n.ignoreConflict(t),class:"ignore-btn"},"Ignore This Warning",8,Do)])):(0,e.createCommentVNode)("v-if",!0)],2))),128))]))]),(0,e.createCommentVNode)(" Panel Footer "),n.visibleConflicts.length>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",Bo,[(0,e.createElementVNode)("div",Io,[(0,e.createElementVNode)("span",Ao,(0,e.toDisplayString)(n.criticalConflicts)+" Critical",1),(0,e.createElementVNode)("span",To,(0,e.toDisplayString)(n.highConflicts)+" High",1),(0,e.createElementVNode)("span",Lo,(0,e.toDisplayString)(n.mediumConflicts)+" Medium",1),(0,e.createElementVNode)("span",zo,(0,e.toDisplayString)(n.lowConflicts)+" Low",1)]),(0,e.createElementVNode)("div",jo,[n.autoResolvableConflicts>0?((0,e.openBlock)(),(0,e.createElementBlock)("button",{key:0,onClick:a[2]||(a[2]=(...e)=>n.autoResolveAll&&n.autoResolveAll(...e)),class:"auto-resolve-btn"}," üîß Auto-Resolve "+(0,e.toDisplayString)(n.autoResolvableConflicts)+" Conflicts ",1)):(0,e.createCommentVNode)("v-if",!0),(0,e.createElementVNode)("button",{onClick:a[3]||(a[3]=(...e)=>n.exportConflicts&&n.exportConflicts(...e)),class:"export-btn"},"üìÑ Export Report")])])):(0,e.createCommentVNode)("v-if",!0)])):(0,e.createCommentVNode)("v-if",!0)}],["__scopeId","data-v-52ced96f"]])},props:{content:{type:Object,required:!0,default:()=>({schoolId:null,draftId:null,publishedBy:null,periods:[],courses:[],teachers:[],classes:[],rooms:[],schoolDays:[],draftSchedules:[],liveSchedules:[],subjects:[],emitDropEvents:!1})},wwElementState:{type:Object,required:!0},wwEditorState:{type:Object,required:!0}},setup(t,{emit:a}){const o=(0,e.ref)(!1),n=(0,e.ref)(!1),s=(0,e.ref)(!1),l=(0,e.ref)(!1),r=(0,e.ref)([]),d=(0,e.ref)({dayId:null,periodId:null,period:null,assignments:[],conflicts:[]}),i=(0,e.computed)(()=>t.content.schoolId||"No School ID"),c=(0,e.computed)(()=>t.content.draftId||"No Draft ID"),u=(0,e.computed)(()=>t.content.publishedBy||null),f=(0,e.computed)(()=>{const e=function(e){const t=_t(e);return wt(t)?t.map((e,t)=>{const a=e.block_number||e.blocknumber||t+1;let o=e.label||e.name_de||e.name||`Period ${a}`,n=e.time;e.start_time&&e.end_time?n=`${e.start_time} - ${e.end_time}`:(e.start_time||e.end_time)&&(n=e.start_time||e.end_time);let s=!0;if(e.block_type)s=!["break","pause","lunch","recess","assembly","flexband","fr√ºhdienst","hofpause","before_school"].includes(e.block_type.toLowerCase());else if("optional"===e.attendance_requirement)s=!1;else if(o&&"string"==typeof o){const e=o.toLowerCase();s=!["break","pause","lunch","flexband","fr√ºhdienst","hofpause"].some(t=>e.includes(t))}const l=e.id||`period-${a}`;return{...e,id:l,blockNumber:Number(a),label:o,name:o,time:n||`${a}. Period`,is_instructional:void 0!==e.is_instructional?e.is_instructional:s,type:e.block_type||e.type||(s?"lesson":"break"),block_number:Number(a)}}).sort((e,t)=>e.blockNumber-t.blockNumber):[]}(t.content.periods);return wt(e)?e:(console.log("üìã [Periods] No periods data available"),[])}),m=(0,e.computed)(()=>{const e=_t(t.content.courses);return wt(e)||console.log("üéØ [wwElement] Courses processing: no data available"),e.map((e,t)=>Bt(e,t))}),p=(0,e.computed)(()=>{const e=_t(t.content.teachers);return wt(e)||console.log("üë• [wwElement] Teachers processing: no data available"),e}),g=(0,e.computed)(()=>{const e=_t(t.content.classes);return wt(e)||console.log("üè´ [wwElement] Classes processing: no data available"),e}),b=(0,e.computed)(()=>{const e=_t(t.content.rooms);return wt(e)||console.log("üè† [wwElement] Rooms processing: no data available"),e}),v=(0,e.computed)(()=>{const e=_t(t.content.schoolDays);if(!wt(e))return console.log("üìÖ [wwElement] SchoolDays processing: no data available"),[];const a=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.map((e,t)=>{const o=e.name||e.name_en||e.day_name||a[t]||`Day ${t+1}`;return{...e,id:e.day_id||e.id,name:o,date:e.date||e.day_date||null,is_active:void 0===e.is_active||e.is_active,day_number:e.day_number||t+1,day_id:e.day_id||e.id}})}),h=(0,e.computed)(()=>{const e=_t(t.content.draftSchedules);return wt(e)||console.log("üìù [wwElement] Draft Schedules processing: no data available"),e}),y=(0,e.computed)(()=>{const e=_t(t.content.liveSchedules);return wt(e)||console.log("üì∫ [wwElement] Live Schedules processing: no data available"),e}),x=(0,e.computed)(()=>{const e=_t(t.content.subjects);return wt(e)||console.log("üìö [wwElement] Subjects processing: no data available"),e}),k=(0,e.computed)(()=>!!u.value),C=(0,e.computed)(()=>Vt(r.value)>0),E=(0,e.computed)(()=>function(e){const t=[],a=Date.now(),o=new Map;return e.forEach((e,t)=>{const a=`${e.day_id}-${e.period_id}`;o.has(a)||o.set(a,[]),o.get(a).push({...e,index:t})}),o.forEach((e,o)=>{if(Vt(e)<2)return;const[n,s]=o.split("-").map(Number),l=new Map;e.forEach(e=>{e.teacher_ids?.forEach(t=>{l.has(t)||l.set(t,[]),l.get(t).push(e)})}),l.forEach((e,l)=>{Vt(e)>1&&t.push({id:`${a}-teacher-${l}-${o}`,type:"teacher",severity:"high",day_id:n,period_id:s,affected_teachers:[l],affected_courses:e.map(e=>e.course_id),message:`Teacher is assigned to ${Vt(e)} courses at the same time`,auto_resolvable:!1})});const r=new Map;e.forEach(e=>{e.room_id&&(r.has(e.room_id)||r.set(e.room_id,[]),r.get(e.room_id).push(e))}),r.forEach((e,l)=>{Vt(e)>1&&t.push({id:`${a}-room-${l}-${o}`,type:"room",severity:"high",day_id:n,period_id:s,affected_rooms:[l],affected_courses:e.map(e=>e.course_id),message:`Room is booked for ${Vt(e)} courses at the same time`,auto_resolvable:!0})});const d=new Map;e.forEach(e=>{e.class_id&&(d.has(e.class_id)||d.set(e.class_id,[]),d.get(e.class_id).push(e))}),d.forEach((e,l)=>{Vt(e)>1&&t.push({id:`${a}-class-${l}-${o}`,type:"class",severity:"medium",day_id:n,period_id:s,affected_classes:[l],affected_courses:e.map(e=>e.course_id),message:`Class has ${Vt(e)} overlapping assignments`,auto_resolvable:!1})})}),t}(h.value)),N=(0,e.computed)(()=>{if(!d.value.dayId||!d.value.periodId)return m.value;const e=d.value.dayId,t=d.value.periodId;return e&&t&&console.log("üéØ [wwElement] availableCoursesForSlot filtering:",{currentDayId:e,currentPeriodId:t,totalCourses:Vt(m.value)}),m.value.filter(a=>{if(0===Vt(a.possibleSlots))return!0;const o=a.possibleSlots.some(a=>a.dayId===e&&a.periodId===t);return o&&console.log("  ‚úÖ Available course:",{courseName:a.name,possibleSlots:a.possibleSlots}),o})});function _(){const e=JSON.stringify(h.value);r.value.push(e),Vt(r.value)>10&&r.value.shift()}function S(){o.value=!1,d.value={dayId:null,periodId:null,period:null,assignments:[],conflicts:[],preSelectedCourse:null}}function w(e){a("trigger-event",{name:"updateDraftSchedules",event:{draftSchedules:e}})}async function V(){l.value=!0;try{a("trigger-event",{name:"saveDraft",event:{draftId:c.value,schedules:h.value,timestamp:(new Date).toISOString(),action:"save_draft"}}),a("save-draft-external",{draftId:c.value,schedules:h.value,timestamp:(new Date).toISOString()}),await new Promise(e=>setTimeout(e,1e3)),console.log("üíæ [wwElement] Draft saved successfully")}catch(e){console.error("‚ùå [wwElement] Error saving draft:",e)}finally{l.value=!1}}let D;return(0,e.watch)(h,()=>{k.value||(clearTimeout(D),D=setTimeout(()=>{V()},2e3))},{deep:!0}),(0,e.onMounted)(()=>{console.log("üöÄ [wwElement] Component mounted - Course Scheduler loaded successfully")}),(0,e.watch)(()=>t.content,(e,t)=>{e&&t&&(e?.periods?.length!==t?.periods?.length||e?.schoolDays?.length!==t?.schoolDays?.length||e?.courses?.length!==t?.courses?.length)&&console.log("üîÑ [wwElement] Content structure changed:",{periods:e?.periods?.length||0,schoolDays:e?.schoolDays?.length||0,courses:e?.courses?.length||0})},{deep:!0}),{schoolId:i,draftId:c,publishedBy:u,periods:f,courses:m,teachers:p,classes:g,rooms:b,schoolDays:v,draftSchedules:h,liveSchedules:y,subjects:x,showAssignmentModal:o,showConflicts:n,showTestData:s,selectedCell:d,isSaving:l,isReadOnly:k,canUndo:C,allConflicts:E,availableCoursesForSlot:N,handleCellClick:function({dayId:e,periodId:t,period:a,mode:n,preSelectedCourse:s}){if(k.value)return;const l=h.value.filter(a=>a.day_id===e&&a.period_id===t),r=E.value.filter(a=>a.day_id===e&&a.period_id===t);d.value={dayId:e,periodId:t,period:a,assignments:l,conflicts:r,preSelectedCourse:s},o.value=!0},closeAssignmentModal:S,addAssignment:function(e){_(),w([...h.value,e]),S()},editAssignment:function(e){S(),a("edit-assignment-requested",e)},removeAssignment:function(e){var o;_(),t.content.emitDropEvents&&function(e,t,a){try{if(console.log(`üöÄ [WeWeb Event] Attempting to emit: ${t}`),"function"==typeof e){console.log(`üì° [WeWeb Event] Using parent emit function for: ${t}`);try{return e("element-event",{name:t,event:t,data:a}),console.log(`‚úÖ [WeWeb Event] ${t} emitted successfully via parent emit`),!0}catch(e){return console.error(`‚ùå [WeWeb Event] ${t} failed via parent emit:`,e),!1}}if(e&&"function"==typeof e.$emit){console.log(`üì° [WeWeb Event] Fallback: Using Vue 2 $emit for: ${t}`);try{return e.$emit("element-event",{name:t,event:t,data:a}),console.log(`‚úÖ [WeWeb Event] ${t} emitted successfully via $emit`),!0}catch(e){return console.error(`‚ùå [WeWeb Event] ${t} failed via $emit:`,e),!1}}return console.error(`‚ùå [WeWeb Event] No valid emit function found for: ${t}`),!1}catch(e){return console.error(`‚ùå [WeWeb Event] Fatal error emitting ${t}:`,e),!1}}(a,"scheduler:remove",{schoolId:(o={schoolId:t.content.schoolId,draftId:t.content.draftId,dayId:e.day_id,periodId:e.period_id,assignmentId:e.id,courseId:e.course_id,courseName:e.course_name||e.display_cell||""}).schoolId||null,draftId:o.draftId||null,dayId:Number(o.dayId),periodId:String(o.periodId),assignmentId:String(o.assignmentId),courseId:o.courseId?String(o.courseId):null,courseName:o.courseName?String(o.courseName):null,source:"remove",timestamp:(new Date).toISOString()}),w(h.value.filter(t=>!(t.day_id===e.day_id&&t.period_id===e.period_id&&t.course_id===e.course_id&&t.class_id===e.class_id)))},updateAssignments:function(e){if("move"===e.action&&e.assignment){const t=[...h.value],a=t.findIndex(t=>t.id===e.assignment.id);if(-1!==a){const o={...t[a],day_id:e.toDayId,period_id:e.toPeriodId,day_name_de:v.value.find(t=>t.id===e.toDayId)?.name_de,day_name_en:v.value.find(t=>t.id===e.toDayId)?.name_en};t[a]=o,r.value.push(JSON.stringify(h.value)),w(t),console.log("‚úÖ [DragDrop] Assignment moved successfully:",{assignmentId:e.assignment.id,from:`${e.fromDayId}-${e.fromPeriodId}`,to:`${e.toDayId}-${e.toPeriodId}`})}else console.warn("‚ö†Ô∏è [DragDrop] Could not find assignment to move:",e.assignment.id)}else w(e)},undo:function(){if(0===Vt(r.value))return;const e=r.value.pop();w(JSON.parse(e))},saveDraft:V,handleAssignmentDetails:function(e){a("trigger-event",{name:"assignmentDetails",event:{assignment:e}})},handleToggleNonInstructional:function(e){a("trigger-event",{name:"toggleNonInstructional",event:{showNonInstructional:e}})},handleToggleLessonSchedules:function(e){a("trigger-event",{name:"toggleLessonSchedules",event:{showLessonSchedules:e}})},handleModeChanged:function(e){a("trigger-event",{name:"modeChanged",event:{mode:e}})},handlePeriodFocusChanged:function(e){a("trigger-event",{name:"periodFocusChanged",event:{focusedPeriodId:e}})},handleFilterYear:function(e){a("trigger-event",{name:"filterYear",event:{selectedYear:e}})},handleSchedulerDrop:function(e){console.log("üöÄ [WeWeb Event] scheduler:drop - Emitting element event with data:",e);try{a("element-event",{name:"scheduler:drop",event:"scheduler:drop",data:e}),console.log("‚úÖ [WeWeb Event] scheduler:drop emitted successfully")}catch(e){console.error("‚ùå [WeWeb Event] scheduler:drop emission failed:",e)}},handleSchedulerDragStart:function(e){console.log("üöÄ [WeWeb Event] scheduler:drag-start - Emitting element event");try{a("element-event",{name:"scheduler:drag-start",event:"scheduler:drag-start",data:e}),console.log("‚úÖ [WeWeb Event] scheduler:drag-start emitted successfully")}catch(e){console.error("‚ùå [WeWeb Event] scheduler:drag-start emission failed:",e)}},handleSchedulerDragEnd:function(e){console.log("üöÄ [WeWeb Event] scheduler:drag-end - Emitting element event");try{a("element-event",{name:"scheduler:drag-end",event:"scheduler:drag-end",data:e}),console.log("‚úÖ [WeWeb Event] scheduler:drag-end emitted successfully")}catch(e){console.error("‚ùå [WeWeb Event] scheduler:drag-end emission failed:",e)}},testEventEmission:function(){console.log("üß™ [WeWeb Event Test] ================================="),console.log("üß™ [WeWeb Event Test] Manual scheduler:drop event test"),console.log("üß™ [WeWeb Event Test] ================================="),console.log("üîç [WeWeb Event Test] Context analysis:"),console.log("  - Emit function type:",typeof a),console.log("  - Props available:",!!t),console.log("  - Content available:",!!content.value),console.log("  - EmitDropEvents setting:",content.value?.emitDropEvents),console.log("  - Window location:",window?.location?.href),console.log("  - WeWeb indicators present:",{hasWeWebGlobal:!!window.ww,hasWeWebEditor:!!window.wwEditor,userAgent:navigator.userAgent.includes("WeWeb")});const e={schoolId:content.value?.schoolId||null,draftId:content.value?.draftId||null,dayId:1,periodId:"test-period-id",courseId:"test-course-id",courseName:"Test Course",courseCode:"TEST101",source:"manual-test",timestamp:(new Date).toISOString()};console.log("üìã [WeWeb Event Test] Test event data:",e);try{console.log("üöÄ [WeWeb Event Test] Attempting to emit scheduler:drop..."),a("element-event",{name:"scheduler:drop",event:"scheduler:drop",data:e}),console.log("‚úÖ [WeWeb Event Test] ‚úÖ SUCCESS: scheduler:drop event emitted!"),console.log("üìå [WeWeb Event Test] Next steps:"),console.log('   1. Check WeWeb Workflow UI for "On element event" trigger'),console.log('   2. Look for "scheduler:drop" in the event dropdown'),console.log("   3. Event data will be available as {{ data.courseName }} etc.")}catch(e){console.error("‚ùå [WeWeb Event Test] ‚ùå FAILED: Event emission error:",e),console.log("üîß [WeWeb Event Test] Troubleshooting:"),console.log("   - Ensure component is loaded in WeWeb editor"),console.log("   - Check browser console for additional errors"),console.log("   - Try refreshing the WeWeb editor page")}console.log("üß™ [WeWeb Event Test] =================================")},navigateToConflict:function(e){d.value={dayId:e.day_id,periodId:e.period_id,period:f.value.find(t=>t.id===e.period_id),assignments:h.value.filter(t=>t.day_id===e.day_id&&t.period_id===e.period_id),conflicts:[e]},o.value=!0,n.value=!1},applySuggestion:function(e){a("trigger-event",{name:"applySuggestion",event:{suggestion:e}})},ignoreConflict:function(e){a("trigger-event",{name:"ignoreConflict",event:{conflictId:e.id}})},autoResolveConflicts:function(){a("trigger-event",{name:"autoResolveConflicts",event:{conflicts:E.value.filter(e=>e.auto_resolvable)}})},emitTestEvent:function(){try{a("element-event",{name:"scheduler:drop",event:"scheduler:drop",data:{message:"Test WeWeb element event from Course Scheduler!",timestamp:(new Date).toISOString(),testData:{periods:Vt(f.value),courses:Vt(m.value),teachers:Vt(p.value),classes:Vt(g.value),rooms:Vt(b.value),draftSchedules:Vt(h.value),conflicts:Vt(E.value),isReadOnly:k.value}}}),console.log("‚úÖ Test WeWeb element event emitted successfully!"),alert("Test WeWeb element event emitted successfully!")}catch(e){console.error("‚ùå Failed to emit test WeWeb element event:",e),alert("Error emitting WeWeb element event: "+e.message)}},logCurrentData:function(){if(console.log("üêõ [wwElement] === COMPLETE DATA DUMP ==="),console.log("Raw content object:",t.content),console.log("School ID:",i.value),console.log("Draft ID:",c.value),console.log("Published By:",u.value),console.log("üìÖ PERIODS ANALYSIS:"),console.log("  Raw periods:",t.content.periods),console.log("  Processed periods:",f.value),Vt(f.value)>0){const e=f.value[0];console.log("  Sample period object keys:",Object.keys(e)),console.log("  Sample period values:",e)}if(console.log("üóìÔ∏è SCHOOL DAYS ANALYSIS:"),console.log("  Raw schoolDays:",t.content.schoolDays),console.log("  Processed schoolDays:",v.value),Vt(v.value)>0){const e=v.value[0];console.log("  Sample day object keys:",Object.keys(e)),console.log("  Sample day values:",e)}console.log("Courses:",Vt(m.value),m.value.slice(0,2)),console.log("Teachers:",Vt(p.value),p.value.slice(0,2)),console.log("Classes:",Vt(g.value),g.value.slice(0,2)),console.log("Rooms:",Vt(b.value),b.value.slice(0,2)),console.log("Draft Schedules:",Vt(h.value),h.value.slice(0,2)),console.log("Live Schedules:",Vt(y.value),y.value.slice(0,2)),console.log("Is Read Only:",k.value),console.log("Can Undo:",C.value),console.log("All Conflicts:",Vt(E.value),E.value),console.log("üêõ [wwElement] === END COMPLETE DATA DUMP ===")},safeLength:Vt,safeArray:Dt}}};a(850);const Po=(0,Nt.Z)(Fo,[["render",function(t,a,h,y,x,k){const C=(0,e.resolveComponent)("SchedulerGrid"),E=(0,e.resolveComponent)("AssignmentModal"),N=(0,e.resolveComponent)("ConflictPanel");return(0,e.openBlock)(),(0,e.createElementBlock)("div",o,[(0,e.createCommentVNode)(" Header with Planning Mode Controls "),(0,e.createElementVNode)("div",n,[s,(0,e.createElementVNode)("div",l,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["mode-indicator",{"read-only":y.isReadOnly}])},(0,e.toDisplayString)(y.isReadOnly?"Published Schedule (Read-Only)":"Planning Mode"),3),y.isReadOnly?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createElementBlock)("div",r,[(0,e.createElementVNode)("button",{onClick:a[0]||(a[0]=(...e)=>y.testEventEmission&&y.testEventEmission(...e)),class:"test-btn",style:{background:"#007bff",color:"white",border:"none",padding:"8px 12px","border-radius":"4px","margin-right":"8px"}}," üß™ Test Event "),(0,e.createElementVNode)("button",{onClick:a[1]||(a[1]=(...e)=>y.undo&&y.undo(...e)),disabled:!y.canUndo,class:"undo-btn"},"‚Ü∂ Undo",8,d),(0,e.createElementVNode)("button",{onClick:a[2]||(a[2]=e=>y.showConflicts=!y.showConflicts),class:(0,e.normalizeClass)(["conflicts-btn",{active:y.showConflicts}])}," ‚ö†Ô∏è Conflicts ("+(0,e.toDisplayString)(y.safeLength(y.allConflicts))+") ",3)]))])]),(0,e.createCommentVNode)(" Main Scheduler Grid "),(0,e.createElementVNode)("div",i,[(0,e.createVNode)(C,{periods:y.periods,"school-days":y.schoolDays,courses:y.courses,teachers:y.teachers,classes:y.classes,rooms:y.rooms,subjects:y.subjects,"draft-schedules":y.draftSchedules,"live-schedules":y.liveSchedules,conflicts:y.allConflicts,"can-undo":y.canUndo,"is-saving":y.isSaving,"is-read-only":y.isReadOnly,"show-statistics":!0,"emit-drop-events":h.content.emitDropEvents,"school-id":h.content.schoolId,"draft-id":h.content.draftId,"parent-emit":t.emit,onCellClick:y.handleCellClick,onAssignmentDetails:y.handleAssignmentDetails,onToggleNonInstructional:y.handleToggleNonInstructional,onToggleLessonSchedules:y.handleToggleLessonSchedules,onModeChanged:y.handleModeChanged,onPeriodFocusChanged:y.handlePeriodFocusChanged,onFilterYear:y.handleFilterYear,onSchedulerDrop:y.handleSchedulerDrop,onSchedulerDragStart:y.handleSchedulerDragStart,onSchedulerDragEnd:y.handleSchedulerDragEnd,onUndoLast:y.undo,onSaveDraft:y.saveDraft,onUpdateAssignments:y.updateAssignments},null,8,["periods","school-days","courses","teachers","classes","rooms","subjects","draft-schedules","live-schedules","conflicts","can-undo","is-saving","is-read-only","emit-drop-events","school-id","draft-id","parent-emit","onCellClick","onAssignmentDetails","onToggleNonInstructional","onToggleLessonSchedules","onModeChanged","onPeriodFocusChanged","onFilterYear","onSchedulerDrop","onSchedulerDragStart","onSchedulerDragEnd","onUndoLast","onSaveDraft","onUpdateAssignments"])]),(0,e.createCommentVNode)(" Assignment Modal "),(0,e.createVNode)(E,{visible:y.showAssignmentModal,"day-id":y.selectedCell.dayId,"period-id":y.selectedCell.periodId,period:y.selectedCell.period,courses:y.availableCoursesForSlot,teachers:y.teachers,classes:y.classes,rooms:y.rooms,subjects:y.subjects,"school-days":y.schoolDays,"existing-assignments":y.selectedCell.assignments,conflicts:y.selectedCell.conflicts,"is-read-only":y.isReadOnly,"pre-selected-course":y.selectedCell.preSelectedCourse,onClose:y.closeAssignmentModal,onAddAssignment:y.addAssignment,onEditAssignment:y.editAssignment,onRemoveAssignment:y.removeAssignment},null,8,["visible","day-id","period-id","period","courses","teachers","classes","rooms","subjects","school-days","existing-assignments","conflicts","is-read-only","pre-selected-course","onClose","onAddAssignment","onEditAssignment","onRemoveAssignment"]),(0,e.createCommentVNode)(" Conflict Panel "),y.showConflicts&&y.safeLength(y.allConflicts)>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",c,[(0,e.createVNode)(N,{visible:y.showConflicts,conflicts:y.allConflicts,courses:y.courses,teachers:y.teachers,classes:y.classes,rooms:y.rooms,periods:y.periods,"school-days":y.schoolDays,onClose:a[3]||(a[3]=e=>y.showConflicts=!1),onNavigateToConflict:y.navigateToConflict,onApplySuggestion:y.applySuggestion,onIgnoreConflict:y.ignoreConflict,onAutoResolveAll:y.autoResolveConflicts},null,8,["visible","conflicts","courses","teachers","classes","rooms","periods","school-days","onNavigateToConflict","onApplySuggestion","onIgnoreConflict","onAutoResolveAll"])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Hidden test section for development "),y.showTestData?((0,e.openBlock)(),(0,e.createElementBlock)("div",u,[(0,e.createElementVNode)("button",{onClick:a[4]||(a[4]=e=>y.showTestData=!1),class:"close-test"},"√ó"),f,(0,e.createElementVNode)("div",m,[(0,e.createElementVNode)("div",null,[p,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(y.schoolId),1)]),(0,e.createElementVNode)("div",null,[g,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(y.draftId),1)]),(0,e.createElementVNode)("div",null,[b,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(y.publishedBy||"Not Published"),1)]),(0,e.createElementVNode)("div",null,[v,(0,e.createTextVNode)(" "+(0,e.toDisplayString)(y.safeLength(y.periods))+" periods, "+(0,e.toDisplayString)(y.safeLength(y.courses))+" courses, "+(0,e.toDisplayString)(y.safeLength(y.teachers))+" teachers ",1)]),(0,e.createElementVNode)("button",{onClick:a[5]||(a[5]=(...e)=>y.emitTestEvent&&y.emitTestEvent(...e)),class:"test-button"},"Test Event Emission")])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Show test data toggle "),(0,e.createElementVNode)("button",{onClick:a[6]||(a[6]=e=>y.showTestData=!y.showTestData),class:"test-toggle",title:"Toggle test data"},"üß™"),(0,e.createCommentVNode)(" Debug data button "),(0,e.createElementVNode)("button",{onClick:a[7]||(a[7]=(...e)=>y.logCurrentData&&y.logCurrentData(...e)),class:"debug-toggle",title:"Log current data to console"},"üêõ")])}],["__scopeId","data-v-5b1dcfa6"]]),Wo="course-scheduler",$o={options:{lazyHydrate:!0},editor:{label:{en:"Course Scheduler"},icon:"calendar",bubble:{icon:"calendar"}},properties:{schoolId:{label:{en:"School ID",fr:"ID √âcole"},type:"Text",options:{placeholder:"Enter school UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the school for which the schedule is being created"}},draftId:{label:{en:"Draft ID",fr:"ID Brouillon"},type:"Text",options:{placeholder:"Enter draft UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the current draft being edited"}},publishedBy:{label:{en:"Published By",fr:"Publi√© par"},type:"Text",options:{placeholder:"Enter user UUID"},bindable:!0,defaultValue:null,bindingValidation:{validations:[{type:"string"}],tooltip:"UUID of the user publishing the schedule, or null if not published"}},periods:{label:{en:"Periods",fr:"P√©riodes"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of period objects with id, name, start_time, end_time properties"}},courses:{label:{en:"Courses",fr:"Cours"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of course objects with id, name, color properties"}},teachers:{label:{en:"Teachers",fr:"Enseignants"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of teacher objects with id, name, color properties"}},classes:{label:{en:"Classes",fr:"Classes"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of class objects with id, name, color properties"}},rooms:{label:{en:"Rooms",fr:"Salles"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of room objects with id, name properties"}},subjects:{label:{en:"Subjects",fr:"Mati√®res"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of subject objects with id, name properties"}},schoolDays:{label:{en:"School Days",fr:"Jours scolaires"},type:"Array",bindable:!0,defaultValue:[{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"}],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of school day objects with id, name properties (1=Sunday to 7=Saturday)"}},draftSchedules:{label:{en:"Draft Schedules",fr:"Brouillons horaires"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of draft schedule entries with day_id, period_id/time, course_id, teacher_ids, etc."}},liveSchedules:{label:{en:"Live Schedules",fr:"Horaires publi√©s"},type:"Array",bindable:!0,defaultValue:[],bindingValidation:{validations:[{type:"array"}],tooltip:"Array of published schedule entries for reference/conflict checking"}},emitDropEvents:{label:{en:"Emit Drop Events",fr:"√âmettre √©v√©nements de d√©p√¥t"},type:"OnOff",bindable:!0,defaultValue:!1,bindingValidation:{validations:[{type:"boolean"}],tooltip:"When enabled, emits scheduler:drop events instead of opening assignment modal. Allows WeWeb workflows to handle persistence."}}},events:{"scheduler:drop":{label:{en:"On course dropped",fr:"Lors du d√©p√¥t de cours"},tooltip:{en:"Triggered when a course is dropped onto the schedule grid",fr:"D√©clench√© quand un cours est d√©pos√© sur la grille horaire"}},"scheduler:drag-start":{label:{en:"On drag start",fr:"D√©but du glissement"},tooltip:{en:"Triggered when dragging a course begins",fr:"D√©clench√© quand le glissement d'un cours commence"}},"scheduler:drag-end":{label:{en:"On drag end",fr:"Fin du glissement"},tooltip:{en:"Triggered when dragging ends (success or failure)",fr:"D√©clench√© quand le glissement se termine (succ√®s ou √©chec)"}},"scheduler:remove":{label:{en:"On assignment removed",fr:"Assignation supprim√©e"},tooltip:{en:"Triggered when a course assignment is deleted",fr:"D√©clench√© quand une assignation de cours est supprim√©e"}}}};function Ro(){return!!window.addWwComponent&&(window.addWwComponent({name:Wo,version:"1.0.0",content:Po,type:"wwobject",wwDev:!1,port:void 0,config:$o}),!0)}if(0!==Wo.indexOf("__")&&($o.name=Wo),$o.wwDev=!1,$o.port=void 0,!Ro()){const e=setInterval(function(){Ro()&&clearInterval(e)},10)}})()})();